2021-08-02 19:45:25.272 INFO  org.hibernate.validator.internal.util.Version     :21   [32m                  [0;39m HV000001: Hibernate Validator 6.1.5.Final
2021-08-02 19:45:25.293 INFO  com.cq.wiki.config.WikiApplication                :55   [32m                  [0;39m Starting WikiApplication on LAPTOP-T0P8U4U3 with PID 16488 (D:\IdeaProjects\wiki\target\classes started by 程崎 in D:\IdeaProjects\wiki)
2021-08-02 19:45:25.294 INFO  com.cq.wiki.config.WikiApplication                :651  [32m                  [0;39m No active profile set, falling back to default profiles: default
2021-08-02 19:45:25.358 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :225  [32m                  [0;39m Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2021-08-02 19:45:25.359 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :225  [32m                  [0;39m For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2021-08-02 19:45:27.158 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :108  [32m                  [0;39m Tomcat initialized with port(s): 7770 (http)
2021-08-02 19:45:27.168 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Initializing ProtocolHandler ["http-nio-7770"]
2021-08-02 19:45:27.169 INFO  org.apache.catalina.core.StandardService          :173  [32m                  [0;39m Starting service [Tomcat]
2021-08-02 19:45:27.169 INFO  org.apache.catalina.core.StandardEngine           :173  [32m                  [0;39m Starting Servlet engine: [Apache Tomcat/9.0.37]
2021-08-02 19:45:27.171 INFO  org.apache.catalina.core.AprLifecycleListener     :173  [32m                  [0;39m An older version [1.2.14] of the Apache Tomcat Native library is installed, while Tomcat recommends a minimum version of [1.2.23]
2021-08-02 19:45:27.172 INFO  org.apache.catalina.core.AprLifecycleListener     :173  [32m                  [0;39m Loaded Apache Tomcat Native library [1.2.14] using APR version [1.6.2].
2021-08-02 19:45:27.172 INFO  org.apache.catalina.core.AprLifecycleListener     :173  [32m                  [0;39m APR capabilities: IPv6 [true], sendfile [true], accept filters [false], random [true].
2021-08-02 19:45:27.172 INFO  org.apache.catalina.core.AprLifecycleListener     :173  [32m                  [0;39m APR/OpenSSL configuration: useAprConnector [false], useOpenSSL [true]
2021-08-02 19:45:28.201 INFO  org.apache.catalina.core.AprLifecycleListener     :173  [32m                  [0;39m OpenSSL successfully initialized [OpenSSL 1.0.2l  25 May 2017]
2021-08-02 19:45:28.304 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring embedded WebApplicationContext
2021-08-02 19:45:28.304 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext    :285  [32m                  [0;39m Root WebApplicationContext: initialization completed in 2945 ms
2021-08-02 19:45:29.419 INFO  o.s.scheduling.concurrent.ThreadPoolTaskExecutor  :181  [32m                  [0;39m Initializing ExecutorService 'applicationTaskExecutor'
2021-08-02 19:45:29.471 INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer    :58   [32m                  [0;39m LiveReload server is running on port 35729
2021-08-02 19:45:29.656 INFO  o.s.scheduling.concurrent.ThreadPoolTaskScheduler :181  [32m                  [0;39m Initializing ExecutorService 'taskScheduler'
2021-08-02 19:45:29.757 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Starting ProtocolHandler ["http-nio-7770"]
2021-08-02 19:45:29.784 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :220  [32m                  [0;39m Tomcat started on port(s): 7770 (http) with context path ''
2021-08-02 19:45:30.061 INFO  com.cq.wiki.config.WikiApplication                :61   [32m                  [0;39m Started WikiApplication in 5.239 seconds (JVM running for 5.983)
2021-08-02 19:45:30.065 INFO  com.cq.wiki.config.WikiApplication                :26   [32m                  [0;39m 启动成功！！
2021-08-02 19:45:30.065 INFO  com.cq.wiki.config.WikiApplication                :27   [32m                  [0;39m 地址: 	http://127.0.0.1:7770
2021-08-02 19:45:35.012 INFO  com.cq.wiki.job.DocJob                            :31   [32m77366181283106816 [0;39m 更新电子书下的文档数据开始
2021-08-02 19:45:35.032 INFO  com.zaxxer.hikari.HikariDataSource                :110  [32m77366181283106816 [0;39m HikariPool-1 - Starting...
2021-08-02 19:45:35.535 INFO  com.zaxxer.hikari.HikariDataSource                :123  [32m77366181283106816 [0;39m HikariPool-1 - Start completed.
2021-08-02 19:45:35.541 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77366181283106816 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-08-02 19:45:35.560 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77366181283106816 [0;39m ==> Parameters: 
2021-08-02 19:45:35.583 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77366181283106816 [0;39m <==    Updates: 11
2021-08-02 19:45:35.585 INFO  com.cq.wiki.job.DocJob                            :34   [32m77366181283106816 [0;39m 更新电子书下的文档数据结束，耗时：572毫秒
2021-08-02 19:46:00.015 INFO  com.cq.wiki.job.EbookSnapshotJob                  :32   [32m77366286153289728 [0;39m 生成今日电子书快照开始
2021-08-02 19:46:00.016 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m77366286153289728 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-02 19:46:00.018 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m77366286153289728 [0;39m ==> Parameters: 
2021-08-02 19:46:00.042 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m77366286153289728 [0;39m <==    Updates: 11
2021-08-02 19:46:00.043 INFO  com.cq.wiki.job.EbookSnapshotJob                  :35   [32m77366286153289728 [0;39m 生成今日电子书快照结束，耗时：28毫秒
2021-08-02 19:46:05.009 INFO  com.cq.wiki.job.DocJob                            :31   [32m77366307099643904 [0;39m 更新电子书下的文档数据开始
2021-08-02 19:46:05.011 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77366307099643904 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-08-02 19:46:05.012 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77366307099643904 [0;39m ==> Parameters: 
2021-08-02 19:46:05.014 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77366307099643904 [0;39m <==    Updates: 11
2021-08-02 19:46:05.014 INFO  com.cq.wiki.job.DocJob                            :34   [32m77366307099643904 [0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2021-08-02 19:46:35.010 INFO  com.cq.wiki.job.DocJob                            :31   [32m77366432932958208 [0;39m 更新电子书下的文档数据开始
2021-08-02 19:46:35.012 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77366432932958208 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-08-02 19:46:35.013 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77366432932958208 [0;39m ==> Parameters: 
2021-08-02 19:46:35.015 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77366432932958208 [0;39m <==    Updates: 11
2021-08-02 19:46:35.015 INFO  com.cq.wiki.job.DocJob                            :34   [32m77366432932958208 [0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2021-08-02 19:47:00.006 INFO  com.cq.wiki.job.EbookSnapshotJob                  :32   [32m77366537773780992 [0;39m 生成今日电子书快照开始
2021-08-02 19:47:00.008 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m77366537773780992 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-02 19:47:00.009 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m77366537773780992 [0;39m ==> Parameters: 
2021-08-02 19:47:00.013 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m77366537773780992 [0;39m <==    Updates: 0
2021-08-02 19:47:00.013 INFO  com.cq.wiki.job.EbookSnapshotJob                  :35   [32m77366537773780992 [0;39m 生成今日电子书快照结束，耗时：6毫秒
2021-08-02 19:47:05.008 INFO  com.cq.wiki.job.DocJob                            :31   [32m77366558753689600 [0;39m 更新电子书下的文档数据开始
2021-08-02 19:47:05.009 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77366558753689600 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-08-02 19:47:05.010 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77366558753689600 [0;39m ==> Parameters: 
2021-08-02 19:47:05.011 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77366558753689600 [0;39m <==    Updates: 11
2021-08-02 19:47:05.011 INFO  com.cq.wiki.job.DocJob                            :34   [32m77366558753689600 [0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2021-08-02 19:47:35.003 INFO  com.cq.wiki.job.DocJob                            :31   [32m77366684561838080 [0;39m 更新电子书下的文档数据开始
2021-08-02 19:47:35.005 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77366684561838080 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-08-02 19:47:35.005 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77366684561838080 [0;39m ==> Parameters: 
2021-08-02 19:47:35.007 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77366684561838080 [0;39m <==    Updates: 11
2021-08-02 19:47:35.007 INFO  com.cq.wiki.job.DocJob                            :34   [32m77366684561838080 [0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2021-08-02 19:48:00.013 INFO  com.cq.wiki.job.EbookSnapshotJob                  :32   [32m77366789461381120 [0;39m 生成今日电子书快照开始
2021-08-02 19:48:00.014 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m77366789461381120 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-02 19:48:00.015 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m77366789461381120 [0;39m ==> Parameters: 
2021-08-02 19:48:00.018 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m77366789461381120 [0;39m <==    Updates: 0
2021-08-02 19:48:00.018 INFO  com.cq.wiki.job.EbookSnapshotJob                  :35   [32m77366789461381120 [0;39m 生成今日电子书快照结束，耗时：5毫秒
2021-08-02 19:48:05.011 INFO  com.cq.wiki.job.DocJob                            :31   [32m77366810424512512 [0;39m 更新电子书下的文档数据开始
2021-08-02 19:48:05.013 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77366810424512512 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-08-02 19:48:05.014 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77366810424512512 [0;39m ==> Parameters: 
2021-08-02 19:48:05.017 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77366810424512512 [0;39m <==    Updates: 11
2021-08-02 19:48:05.018 INFO  com.cq.wiki.job.DocJob                            :34   [32m77366810424512512 [0;39m 更新电子书下的文档数据结束，耗时：6毫秒
2021-08-02 19:48:35.003 INFO  com.cq.wiki.job.DocJob                            :31   [32m77366936220078080 [0;39m 更新电子书下的文档数据开始
2021-08-02 19:48:35.004 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77366936220078080 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-08-02 19:48:35.005 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77366936220078080 [0;39m ==> Parameters: 
2021-08-02 19:48:35.007 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77366936220078080 [0;39m <==    Updates: 11
2021-08-02 19:48:35.008 INFO  com.cq.wiki.job.DocJob                            :34   [32m77366936220078080 [0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2021-08-02 19:49:00.010 INFO  com.cq.wiki.job.EbookSnapshotJob                  :32   [32m77367041107038208 [0;39m 生成今日电子书快照开始
2021-08-02 19:49:00.011 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m77367041107038208 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-02 19:49:00.013 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m77367041107038208 [0;39m ==> Parameters: 
2021-08-02 19:49:00.015 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m77367041107038208 [0;39m <==    Updates: 0
2021-08-02 19:49:00.015 INFO  com.cq.wiki.job.EbookSnapshotJob                  :35   [32m77367041107038208 [0;39m 生成今日电子书快照结束，耗时：5毫秒
2021-08-02 19:49:05.005 INFO  com.cq.wiki.job.DocJob                            :31   [32m77367062057586688 [0;39m 更新电子书下的文档数据开始
2021-08-02 19:49:05.006 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77367062057586688 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-08-02 19:49:05.007 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77367062057586688 [0;39m ==> Parameters: 
2021-08-02 19:49:05.008 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77367062057586688 [0;39m <==    Updates: 11
2021-08-02 19:49:05.009 INFO  com.cq.wiki.job.DocJob                            :34   [32m77367062057586688 [0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2021-08-02 19:49:35.003 INFO  com.cq.wiki.job.DocJob                            :31   [32m77367187878318080 [0;39m 更新电子书下的文档数据开始
2021-08-02 19:49:35.005 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77367187878318080 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-08-02 19:49:35.005 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77367187878318080 [0;39m ==> Parameters: 
2021-08-02 19:49:35.007 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77367187878318080 [0;39m <==    Updates: 11
2021-08-02 19:49:35.008 INFO  com.cq.wiki.job.DocJob                            :34   [32m77367187878318080 [0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2021-08-02 19:50:00.013 INFO  com.cq.wiki.job.EbookSnapshotJob                  :32   [32m77367292777861120 [0;39m 生成今日电子书快照开始
2021-08-02 19:50:00.015 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m77367292777861120 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-02 19:50:00.016 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m77367292777861120 [0;39m ==> Parameters: 
2021-08-02 19:50:00.019 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m77367292777861120 [0;39m <==    Updates: 0
2021-08-02 19:50:00.019 INFO  com.cq.wiki.job.EbookSnapshotJob                  :35   [32m77367292777861120 [0;39m 生成今日电子书快照结束，耗时：5毫秒
2021-08-02 19:50:05.014 INFO  com.cq.wiki.job.DocJob                            :31   [32m77367313753575424 [0;39m 更新电子书下的文档数据开始
2021-08-02 19:50:05.015 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77367313753575424 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-08-02 19:50:05.015 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77367313753575424 [0;39m ==> Parameters: 
2021-08-02 19:50:05.016 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77367313753575424 [0;39m <==    Updates: 11
2021-08-02 19:50:05.017 INFO  com.cq.wiki.job.DocJob                            :34   [32m77367313753575424 [0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2021-08-02 19:50:35.002 INFO  com.cq.wiki.job.DocJob                            :31   [32m77367439532363776 [0;39m 更新电子书下的文档数据开始
2021-08-02 19:50:35.004 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77367439532363776 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-08-02 19:50:35.005 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77367439532363776 [0;39m ==> Parameters: 
2021-08-02 19:50:35.007 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77367439532363776 [0;39m <==    Updates: 11
2021-08-02 19:50:35.007 INFO  com.cq.wiki.job.DocJob                            :34   [32m77367439532363776 [0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2021-08-02 19:51:00.007 INFO  com.cq.wiki.job.EbookSnapshotJob                  :32   [32m77367544410935296 [0;39m 生成今日电子书快照开始
2021-08-02 19:51:00.009 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m77367544410935296 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-02 19:51:00.010 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m77367544410935296 [0;39m ==> Parameters: 
2021-08-02 19:51:00.013 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m77367544410935296 [0;39m <==    Updates: 0
2021-08-02 19:51:00.013 INFO  com.cq.wiki.job.EbookSnapshotJob                  :35   [32m77367544410935296 [0;39m 生成今日电子书快照结束，耗时：5毫秒
2021-08-02 19:51:05.000 INFO  com.cq.wiki.job.DocJob                            :31   [32m77367565353095168 [0;39m 更新电子书下的文档数据开始
2021-08-02 19:51:05.002 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77367565353095168 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-08-02 19:51:05.002 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77367565353095168 [0;39m ==> Parameters: 
2021-08-02 19:51:05.004 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77367565353095168 [0;39m <==    Updates: 11
2021-08-02 19:51:05.004 INFO  com.cq.wiki.job.DocJob                            :34   [32m77367565353095168 [0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2021-08-02 19:51:35.002 INFO  com.cq.wiki.job.DocJob                            :31   [32m77367691190603776 [0;39m 更新电子书下的文档数据开始
2021-08-02 19:51:35.004 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77367691190603776 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-08-02 19:51:35.004 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77367691190603776 [0;39m ==> Parameters: 
2021-08-02 19:51:35.005 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77367691190603776 [0;39m <==    Updates: 11
2021-08-02 19:51:35.006 INFO  com.cq.wiki.job.DocJob                            :34   [32m77367691190603776 [0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2021-08-02 19:52:00.009 INFO  com.cq.wiki.job.EbookSnapshotJob                  :32   [32m77367796077563904 [0;39m 生成今日电子书快照开始
2021-08-02 19:52:00.011 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m77367796077563904 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-02 19:52:00.012 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m77367796077563904 [0;39m ==> Parameters: 
2021-08-02 19:52:00.014 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m77367796077563904 [0;39m <==    Updates: 0
2021-08-02 19:52:00.015 INFO  com.cq.wiki.job.EbookSnapshotJob                  :35   [32m77367796077563904 [0;39m 生成今日电子书快照结束，耗时：5毫秒
2021-08-02 19:52:05.004 INFO  com.cq.wiki.job.DocJob                            :31   [32m77367817028112384 [0;39m 更新电子书下的文档数据开始
2021-08-02 19:52:05.005 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77367817028112384 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-08-02 19:52:05.006 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77367817028112384 [0;39m ==> Parameters: 
2021-08-02 19:52:05.007 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77367817028112384 [0;39m <==    Updates: 11
2021-08-02 19:52:05.008 INFO  com.cq.wiki.job.DocJob                            :34   [32m77367817028112384 [0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2021-08-02 19:52:35.014 INFO  com.cq.wiki.job.DocJob                            :31   [32m77367942899175424 [0;39m 更新电子书下的文档数据开始
2021-08-02 19:52:35.015 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77367942899175424 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-08-02 19:52:35.016 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77367942899175424 [0;39m ==> Parameters: 
2021-08-02 19:52:35.017 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77367942899175424 [0;39m <==    Updates: 11
2021-08-02 19:52:35.017 INFO  com.cq.wiki.job.DocJob                            :34   [32m77367942899175424 [0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2021-08-02 19:52:38.736 INFO  org.apache.tomcat.util.http.parser.Cookie         :173  [32m                  [0;39m A cookie header was received [1621348084] that contained an invalid cookie. That cookie will be ignored.
 Note: further occurrences of this error will be logged at DEBUG level.
2021-08-02 19:52:38.744 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring DispatcherServlet 'dispatcherServlet'
2021-08-02 19:52:38.744 INFO  org.springframework.web.servlet.DispatcherServlet :525  [32m                  [0;39m Initializing Servlet 'dispatcherServlet'
2021-08-02 19:52:38.752 INFO  org.springframework.web.servlet.DispatcherServlet :547  [32m                  [0;39m Completed initialization in 7 ms
2021-08-02 19:52:50.901 ERROR com.cq.wiki.controller.ControllerExceptionHandler :59   [32m                  [0;39m 系统异常：
org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public com.cq.wiki.resp.CommonResp com.cq.wiki.controller.UserController.login(com.cq.wiki.req.UserLoginReq): [Field error in object 'userLoginReq' on field 'password': rejected value [123456]; codes [Pattern.userLoginReq.password,Pattern.password,Pattern.java.lang.String,Pattern]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [userLoginReq.password,password]; arguments []; default message [password],[Ljavax.validation.constraints.Pattern$Flag;@45533edc,^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,32}$]; default message [【密码】不正确.]] 
	at org.springframework.web.servlet.mvc.method.annotation.RequestResponseBodyMethodProcessor.resolveArgument(RequestResponseBodyMethodProcessor.java:139)
	at org.springframework.web.method.support.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:121)
	at org.springframework.web.method.support.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:167)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:134)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:105)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:878)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:792)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1040)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:943)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:652)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:733)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:373)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:868)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1589)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)
2021-08-02 19:52:50.906 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver   :199  [32m                  [0;39m Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public com.cq.wiki.resp.CommonResp com.cq.wiki.controller.UserController.login(com.cq.wiki.req.UserLoginReq): [Field error in object 'userLoginReq' on field 'password': rejected value [123456]; codes [Pattern.userLoginReq.password,Pattern.password,Pattern.java.lang.String,Pattern]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [userLoginReq.password,password]; arguments []; default message [password],[Ljavax.validation.constraints.Pattern$Flag;@45533edc,^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,32}$]; default message [【密码】不正确.]] ]
2021-08-02 19:53:00.007 INFO  com.cq.wiki.job.EbookSnapshotJob                  :32   [32m77368047727415296 [0;39m 生成今日电子书快照开始
2021-08-02 19:53:00.017 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m77368047727415296 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-02 19:53:00.018 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m77368047727415296 [0;39m ==> Parameters: 
2021-08-02 19:53:00.025 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m77368047727415296 [0;39m <==    Updates: 0
2021-08-02 19:53:00.026 INFO  com.cq.wiki.job.EbookSnapshotJob                  :35   [32m77368047727415296 [0;39m 生成今日电子书快照结束，耗时：19毫秒
2021-08-02 19:53:05.013 INFO  com.cq.wiki.job.DocJob                            :31   [32m77368068724101120 [0;39m 更新电子书下的文档数据开始
2021-08-02 19:53:05.014 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77368068724101120 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-08-02 19:53:05.014 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77368068724101120 [0;39m ==> Parameters: 
2021-08-02 19:53:05.015 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77368068724101120 [0;39m <==    Updates: 11
2021-08-02 19:53:05.016 INFO  com.cq.wiki.job.DocJob                            :34   [32m77368068724101120 [0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2021-08-02 19:53:35.011 INFO  com.cq.wiki.job.DocJob                            :31   [32m77368194544832512 [0;39m 更新电子书下的文档数据开始
2021-08-02 19:53:35.012 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77368194544832512 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-08-02 19:53:35.012 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77368194544832512 [0;39m ==> Parameters: 
2021-08-02 19:53:35.013 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77368194544832512 [0;39m <==    Updates: 11
2021-08-02 19:53:35.014 INFO  com.cq.wiki.job.DocJob                            :34   [32m77368194544832512 [0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2021-08-02 19:54:00.007 INFO  com.cq.wiki.job.EbookSnapshotJob                  :32   [32m77368299385655296 [0;39m 生成今日电子书快照开始
2021-08-02 19:54:00.009 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m77368299385655296 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-02 19:54:00.010 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m77368299385655296 [0;39m ==> Parameters: 
2021-08-02 19:54:00.012 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m77368299385655296 [0;39m <==    Updates: 0
2021-08-02 19:54:00.013 INFO  com.cq.wiki.job.EbookSnapshotJob                  :35   [32m77368299385655296 [0;39m 生成今日电子书快照结束，耗时：6毫秒
2021-08-02 19:54:05.010 INFO  com.cq.wiki.job.DocJob                            :31   [32m77368320369758208 [0;39m 更新电子书下的文档数据开始
2021-08-02 19:54:05.011 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77368320369758208 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-08-02 19:54:05.011 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77368320369758208 [0;39m ==> Parameters: 
2021-08-02 19:54:05.012 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77368320369758208 [0;39m <==    Updates: 11
2021-08-02 19:54:05.013 INFO  com.cq.wiki.job.DocJob                            :34   [32m77368320369758208 [0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2021-08-02 19:54:35.013 INFO  com.cq.wiki.job.DocJob                            :31   [32m77368446211461120 [0;39m 更新电子书下的文档数据开始
2021-08-02 19:54:35.014 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77368446211461120 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-08-02 19:54:35.015 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77368446211461120 [0;39m ==> Parameters: 
2021-08-02 19:54:35.016 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77368446211461120 [0;39m <==    Updates: 11
2021-08-02 19:54:35.016 INFO  com.cq.wiki.job.DocJob                            :34   [32m77368446211461120 [0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2021-08-02 19:55:00.016 INFO  com.cq.wiki.job.EbookSnapshotJob                  :32   [32m77368551081644032 [0;39m 生成今日电子书快照开始
2021-08-02 19:55:00.018 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m77368551081644032 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-02 19:55:00.019 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m77368551081644032 [0;39m ==> Parameters: 
2021-08-02 19:55:00.022 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m77368551081644032 [0;39m <==    Updates: 0
2021-08-02 19:55:00.023 INFO  com.cq.wiki.job.EbookSnapshotJob                  :35   [32m77368551081644032 [0;39m 生成今日电子书快照结束，耗时：6毫秒
2021-08-02 19:55:05.001 INFO  com.cq.wiki.job.DocJob                            :31   [32m77368571990249472 [0;39m 更新电子书下的文档数据开始
2021-08-02 19:55:05.002 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77368571990249472 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-08-02 19:55:05.003 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77368571990249472 [0;39m ==> Parameters: 
2021-08-02 19:55:05.003 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77368571990249472 [0;39m <==    Updates: 11
2021-08-02 19:55:05.004 INFO  com.cq.wiki.job.DocJob                            :34   [32m77368571990249472 [0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2021-08-02 19:55:35.007 INFO  com.cq.wiki.job.DocJob                            :31   [32m77368697844535296 [0;39m 更新电子书下的文档数据开始
2021-08-02 19:55:35.008 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77368697844535296 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-08-02 19:55:35.009 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77368697844535296 [0;39m ==> Parameters: 
2021-08-02 19:55:35.010 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77368697844535296 [0;39m <==    Updates: 11
2021-08-02 19:55:35.010 INFO  com.cq.wiki.job.DocJob                            :34   [32m77368697844535296 [0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2021-08-02 19:56:00.008 INFO  com.cq.wiki.job.EbookSnapshotJob                  :32   [32m77368802706329600 [0;39m 生成今日电子书快照开始
2021-08-02 19:56:00.009 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m77368802706329600 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-02 19:56:00.010 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m77368802706329600 [0;39m ==> Parameters: 
2021-08-02 19:56:00.014 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m77368802706329600 [0;39m <==    Updates: 0
2021-08-02 19:56:00.014 INFO  com.cq.wiki.job.EbookSnapshotJob                  :35   [32m77368802706329600 [0;39m 生成今日电子书快照结束，耗时：6毫秒
2021-08-02 19:56:05.011 INFO  com.cq.wiki.job.DocJob                            :31   [32m77368823690432512 [0;39m 更新电子书下的文档数据开始
2021-08-02 19:56:05.012 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77368823690432512 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-08-02 19:56:05.013 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77368823690432512 [0;39m ==> Parameters: 
2021-08-02 19:56:05.014 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77368823690432512 [0;39m <==    Updates: 11
2021-08-02 19:56:05.014 INFO  com.cq.wiki.job.DocJob                            :34   [32m77368823690432512 [0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2021-08-02 19:56:27.730 ERROR com.cq.wiki.controller.ControllerExceptionHandler :59   [32m                  [0;39m 系统异常：
org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public com.cq.wiki.resp.CommonResp com.cq.wiki.controller.UserController.login(com.cq.wiki.req.UserLoginReq): [Field error in object 'userLoginReq' on field 'password': rejected value [123456]; codes [Pattern.userLoginReq.password,Pattern.password,Pattern.java.lang.String,Pattern]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [userLoginReq.password,password]; arguments []; default message [password],[Ljavax.validation.constraints.Pattern$Flag;@45533edc,^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,32}$]; default message [【密码】不正确.]] 
	at org.springframework.web.servlet.mvc.method.annotation.RequestResponseBodyMethodProcessor.resolveArgument(RequestResponseBodyMethodProcessor.java:139)
	at org.springframework.web.method.support.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:121)
	at org.springframework.web.method.support.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:167)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:134)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:105)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:878)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:792)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1040)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:943)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:652)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:733)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:373)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:868)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1589)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)
2021-08-02 19:56:27.734 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver   :199  [32m                  [0;39m Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public com.cq.wiki.resp.CommonResp com.cq.wiki.controller.UserController.login(com.cq.wiki.req.UserLoginReq): [Field error in object 'userLoginReq' on field 'password': rejected value [123456]; codes [Pattern.userLoginReq.password,Pattern.password,Pattern.java.lang.String,Pattern]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [userLoginReq.password,password]; arguments []; default message [password],[Ljavax.validation.constraints.Pattern$Flag;@45533edc,^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,32}$]; default message [【密码】不正确.]] ]
2021-08-02 19:56:35.014 INFO  com.cq.wiki.job.DocJob                            :31   [32m77368949532135424 [0;39m 更新电子书下的文档数据开始
2021-08-02 19:56:35.016 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77368949532135424 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-08-02 19:56:35.017 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77368949532135424 [0;39m ==> Parameters: 
2021-08-02 19:56:35.018 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77368949532135424 [0;39m <==    Updates: 11
2021-08-02 19:56:35.019 INFO  com.cq.wiki.job.DocJob                            :34   [32m77368949532135424 [0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2021-08-02 19:57:00.002 INFO  com.cq.wiki.job.EbookSnapshotJob                  :32   [32m77369054339403776 [0;39m 生成今日电子书快照开始
2021-08-02 19:57:00.003 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m77369054339403776 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-02 19:57:00.004 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m77369054339403776 [0;39m ==> Parameters: 
2021-08-02 19:57:00.006 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m77369054339403776 [0;39m <==    Updates: 0
2021-08-02 19:57:00.007 INFO  com.cq.wiki.job.EbookSnapshotJob                  :35   [32m77369054339403776 [0;39m 生成今日电子书快照结束，耗时：5毫秒
2021-08-02 19:57:05.013 INFO  com.cq.wiki.job.DocJob                            :31   [32m77369075357061120 [0;39m 更新电子书下的文档数据开始
2021-08-02 19:57:05.014 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77369075357061120 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-08-02 19:57:05.015 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77369075357061120 [0;39m ==> Parameters: 
2021-08-02 19:57:05.016 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77369075357061120 [0;39m <==    Updates: 11
2021-08-02 19:57:05.016 INFO  com.cq.wiki.job.DocJob                            :34   [32m77369075357061120 [0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2021-08-02 19:57:05.961 INFO  o.s.scheduling.concurrent.ThreadPoolTaskScheduler :218  [32m                  [0;39m Shutting down ExecutorService 'taskScheduler'
2021-08-02 19:57:05.962 INFO  o.s.scheduling.concurrent.ThreadPoolTaskExecutor  :218  [32m                  [0;39m Shutting down ExecutorService 'applicationTaskExecutor'
2021-08-02 19:57:05.964 INFO  com.zaxxer.hikari.HikariDataSource                :350  [32m                  [0;39m HikariPool-1 - Shutdown initiated...
2021-08-02 19:57:05.979 INFO  com.zaxxer.hikari.HikariDataSource                :352  [32m                  [0;39m HikariPool-1 - Shutdown completed.
2021-08-02 19:57:06.160 INFO  com.cq.wiki.config.WikiApplication                :55   [32m                  [0;39m Starting WikiApplication on LAPTOP-T0P8U4U3 with PID 16488 (D:\IdeaProjects\wiki\target\classes started by 程崎 in D:\IdeaProjects\wiki)
2021-08-02 19:57:06.160 INFO  com.cq.wiki.config.WikiApplication                :651  [32m                  [0;39m No active profile set, falling back to default profiles: default
2021-08-02 19:57:06.585 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :108  [32m                  [0;39m Tomcat initialized with port(s): 7770 (http)
2021-08-02 19:57:06.585 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Initializing ProtocolHandler ["http-nio-7770"]
2021-08-02 19:57:06.585 INFO  org.apache.catalina.core.StandardService          :173  [32m                  [0;39m Starting service [Tomcat]
2021-08-02 19:57:06.585 INFO  org.apache.catalina.core.StandardEngine           :173  [32m                  [0;39m Starting Servlet engine: [Apache Tomcat/9.0.37]
2021-08-02 19:57:06.586 INFO  org.apache.catalina.core.AprLifecycleListener     :173  [32m                  [0;39m An older version [1.2.14] of the Apache Tomcat Native library is installed, while Tomcat recommends a minimum version of [1.2.23]
2021-08-02 19:57:06.586 INFO  org.apache.catalina.core.AprLifecycleListener     :173  [32m                  [0;39m Loaded Apache Tomcat Native library [1.2.14] using APR version [1.6.2].
2021-08-02 19:57:06.586 INFO  org.apache.catalina.core.AprLifecycleListener     :173  [32m                  [0;39m APR capabilities: IPv6 [true], sendfile [true], accept filters [false], random [true].
2021-08-02 19:57:06.586 INFO  org.apache.catalina.core.AprLifecycleListener     :173  [32m                  [0;39m APR/OpenSSL configuration: useAprConnector [false], useOpenSSL [true]
2021-08-02 19:57:06.587 INFO  org.apache.catalina.core.AprLifecycleListener     :173  [32m                  [0;39m OpenSSL successfully initialized [OpenSSL 1.0.2l  25 May 2017]
2021-08-02 19:57:06.602 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring embedded WebApplicationContext
2021-08-02 19:57:06.602 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext    :285  [32m                  [0;39m Root WebApplicationContext: initialization completed in 438 ms
2021-08-02 19:57:07.163 INFO  o.s.scheduling.concurrent.ThreadPoolTaskExecutor  :181  [32m                  [0;39m Initializing ExecutorService 'applicationTaskExecutor'
2021-08-02 19:57:07.191 INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer    :58   [32m                  [0;39m LiveReload server is running on port 35729
2021-08-02 19:57:07.295 INFO  o.s.scheduling.concurrent.ThreadPoolTaskScheduler :181  [32m                  [0;39m Initializing ExecutorService 'taskScheduler'
2021-08-02 19:57:07.360 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Starting ProtocolHandler ["http-nio-7770"]
2021-08-02 19:57:07.373 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :220  [32m                  [0;39m Tomcat started on port(s): 7770 (http) with context path ''
2021-08-02 19:57:07.479 INFO  com.cq.wiki.config.WikiApplication                :61   [32m                  [0;39m Started WikiApplication in 1.35 seconds (JVM running for 703.4)
2021-08-02 19:57:07.482 INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener :63   [32m                  [0;39m Condition evaluation unchanged
2021-08-02 19:57:07.483 INFO  com.cq.wiki.config.WikiApplication                :26   [32m                  [0;39m 启动成功！！
2021-08-02 19:57:07.483 INFO  com.cq.wiki.config.WikiApplication                :27   [32m                  [0;39m 地址: 	http://127.0.0.1:7770
2021-08-02 19:57:09.836 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring DispatcherServlet 'dispatcherServlet'
2021-08-02 19:57:09.837 INFO  org.springframework.web.servlet.DispatcherServlet :525  [32m                  [0;39m Initializing Servlet 'dispatcherServlet'
2021-08-02 19:57:09.844 INFO  org.springframework.web.servlet.DispatcherServlet :547  [32m                  [0;39m Completed initialization in 7 ms
2021-08-02 19:57:09.852 INFO  com.cq.wiki.aspect.LogAspect                      :52   [32m77369095649103872 [0;39m ------------- 开始 -------------
2021-08-02 19:57:09.852 INFO  com.cq.wiki.aspect.LogAspect                      :53   [32m77369095649103872 [0;39m 请求地址: http://localhost:7770/user/login POST
2021-08-02 19:57:09.852 INFO  com.cq.wiki.aspect.LogAspect                      :54   [32m77369095649103872 [0;39m 类名方法: com.cq.wiki.controller.UserController.login
2021-08-02 19:57:09.853 INFO  com.cq.wiki.aspect.LogAspect                      :55   [32m77369095649103872 [0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-08-02 19:57:09.898 INFO  com.cq.wiki.aspect.LogAspect                      :77   [32m77369095649103872 [0;39m 请求参数: [{"loginName":"test"}]
2021-08-02 19:57:09.922 INFO  com.zaxxer.hikari.HikariDataSource                :110  [32m77369095649103872 [0;39m HikariPool-2 - Starting...
2021-08-02 19:57:09.938 INFO  com.zaxxer.hikari.HikariDataSource                :123  [32m77369095649103872 [0;39m HikariPool-2 - Start completed.
2021-08-02 19:57:09.939 DEBUG com.cq.wiki.mapper.UserMapper.selectByExample     :137  [32m77369095649103872 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user WHERE ( login_name = ? )
2021-08-02 19:57:09.940 DEBUG com.cq.wiki.mapper.UserMapper.selectByExample     :137  [32m77369095649103872 [0;39m ==> Parameters: test(String)
2021-08-02 19:57:09.955 TRACE com.cq.wiki.mapper.UserMapper.selectByExample     :143  [32m77369095649103872 [0;39m <==    Columns: id, login_name, name, password
2021-08-02 19:57:09.956 TRACE com.cq.wiki.mapper.UserMapper.selectByExample     :143  [32m77369095649103872 [0;39m <==        Row: 6290961574199, test, 测试, e70e2222a9d67c4f2eae107533359aa4
2021-08-02 19:57:09.957 DEBUG com.cq.wiki.mapper.UserMapper.selectByExample     :137  [32m77369095649103872 [0;39m <==      Total: 1
2021-08-02 19:57:09.961 INFO  com.cq.wiki.service.UserService                   :71   [32m77369095649103872 [0;39m 密码错误，输入密码：e10adc3949ba59abbe56e057f20f883e,数据库密码：e70e2222a9d67c4f2eae107533359aa4
2021-08-02 19:57:09.962 WARN  com.cq.wiki.controller.ControllerExceptionHandler :44   [32m77369095649103872 [0;39m 业务异常：用户名不存在或密码错误
2021-08-02 19:57:09.965 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver   :199  [32m77369095649103872 [0;39m Resolved [com.cq.wiki.exception.BusinessException: 用户名不存在或密码错误]
2021-08-02 19:57:16.254 INFO  com.cq.wiki.aspect.LogAspect                      :52   [32m77369122505232384 [0;39m ------------- 开始 -------------
2021-08-02 19:57:16.255 INFO  com.cq.wiki.aspect.LogAspect                      :53   [32m77369122505232384 [0;39m 请求地址: http://localhost:7770/user/login POST
2021-08-02 19:57:16.255 INFO  com.cq.wiki.aspect.LogAspect                      :54   [32m77369122505232384 [0;39m 类名方法: com.cq.wiki.controller.UserController.login
2021-08-02 19:57:16.255 INFO  com.cq.wiki.aspect.LogAspect                      :55   [32m77369122505232384 [0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-08-02 19:57:16.255 INFO  com.cq.wiki.aspect.LogAspect                      :77   [32m77369122505232384 [0;39m 请求参数: [{"loginName":"test"}]
2021-08-02 19:57:16.257 DEBUG com.cq.wiki.mapper.UserMapper.selectByExample     :137  [32m77369122505232384 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user WHERE ( login_name = ? )
2021-08-02 19:57:16.258 DEBUG com.cq.wiki.mapper.UserMapper.selectByExample     :137  [32m77369122505232384 [0;39m ==> Parameters: test(String)
2021-08-02 19:57:16.259 TRACE com.cq.wiki.mapper.UserMapper.selectByExample     :143  [32m77369122505232384 [0;39m <==    Columns: id, login_name, name, password
2021-08-02 19:57:16.259 TRACE com.cq.wiki.mapper.UserMapper.selectByExample     :143  [32m77369122505232384 [0;39m <==        Row: 6290961574199, test, 测试, e70e2222a9d67c4f2eae107533359aa4
2021-08-02 19:57:16.260 DEBUG com.cq.wiki.mapper.UserMapper.selectByExample     :137  [32m77369122505232384 [0;39m <==      Total: 1
2021-08-02 19:57:16.260 INFO  com.cq.wiki.service.UserService                   :71   [32m77369122505232384 [0;39m 密码错误，输入密码：098f6bcd4621d373cade4e832627b4f6,数据库密码：e70e2222a9d67c4f2eae107533359aa4
2021-08-02 19:57:16.260 WARN  com.cq.wiki.controller.ControllerExceptionHandler :44   [32m77369122505232384 [0;39m 业务异常：用户名不存在或密码错误
2021-08-02 19:57:16.261 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver   :199  [32m77369122505232384 [0;39m Resolved [com.cq.wiki.exception.BusinessException: 用户名不存在或密码错误]
2021-08-02 19:57:35.009 INFO  com.cq.wiki.job.DocJob                            :31   [32m77369201169403904 [0;39m 更新电子书下的文档数据开始
2021-08-02 19:57:35.013 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77369201169403904 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-08-02 19:57:35.013 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77369201169403904 [0;39m ==> Parameters: 
2021-08-02 19:57:35.015 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77369201169403904 [0;39m <==    Updates: 11
2021-08-02 19:57:35.015 INFO  com.cq.wiki.job.DocJob                            :34   [32m77369201169403904 [0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2021-08-02 19:58:00.005 INFO  com.cq.wiki.job.EbookSnapshotJob                  :32   [32m77369306010226688 [0;39m 生成今日电子书快照开始
2021-08-02 19:58:00.007 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m77369306010226688 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-02 19:58:00.007 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m77369306010226688 [0;39m ==> Parameters: 
2021-08-02 19:58:00.010 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m77369306010226688 [0;39m <==    Updates: 0
2021-08-02 19:58:00.011 INFO  com.cq.wiki.job.EbookSnapshotJob                  :35   [32m77369306010226688 [0;39m 生成今日电子书快照结束，耗时：5毫秒
2021-08-02 19:58:05.001 INFO  com.cq.wiki.job.DocJob                            :31   [32m77369326964969472 [0;39m 更新电子书下的文档数据开始
2021-08-02 19:58:05.003 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77369326964969472 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-08-02 19:58:05.003 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77369326964969472 [0;39m ==> Parameters: 
2021-08-02 19:58:05.004 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77369326964969472 [0;39m <==    Updates: 11
2021-08-02 19:58:05.004 INFO  com.cq.wiki.job.DocJob                            :34   [32m77369326964969472 [0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2021-08-02 19:58:35.014 INFO  com.cq.wiki.job.DocJob                            :31   [32m77369452848615424 [0;39m 更新电子书下的文档数据开始
2021-08-02 19:58:35.015 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77369452848615424 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-08-02 19:58:35.015 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77369452848615424 [0;39m ==> Parameters: 
2021-08-02 19:58:35.016 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77369452848615424 [0;39m <==    Updates: 11
2021-08-02 19:58:35.017 INFO  com.cq.wiki.job.DocJob                            :34   [32m77369452848615424 [0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2021-08-02 19:59:00.016 INFO  com.cq.wiki.job.EbookSnapshotJob                  :32   [32m77369557714604032 [0;39m 生成今日电子书快照开始
2021-08-02 19:59:00.017 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m77369557714604032 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-02 19:59:00.018 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m77369557714604032 [0;39m ==> Parameters: 
2021-08-02 19:59:00.019 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m77369557714604032 [0;39m <==    Updates: 0
2021-08-02 19:59:00.020 INFO  com.cq.wiki.job.EbookSnapshotJob                  :35   [32m77369557714604032 [0;39m 生成今日电子书快照结束，耗时：4毫秒
2021-08-02 19:59:04.487 INFO  com.cq.wiki.aspect.LogAspect                      :52   [32m77369576467337216 [0;39m ------------- 开始 -------------
2021-08-02 19:59:04.488 INFO  com.cq.wiki.aspect.LogAspect                      :53   [32m77369576467337216 [0;39m 请求地址: http://localhost:7770/user/login POST
2021-08-02 19:59:04.488 INFO  com.cq.wiki.aspect.LogAspect                      :54   [32m77369576467337216 [0;39m 类名方法: com.cq.wiki.controller.UserController.login
2021-08-02 19:59:04.488 INFO  com.cq.wiki.aspect.LogAspect                      :55   [32m77369576467337216 [0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-08-02 19:59:04.488 INFO  com.cq.wiki.aspect.LogAspect                      :77   [32m77369576467337216 [0;39m 请求参数: [{"loginName":"test"}]
2021-08-02 19:59:04.490 DEBUG com.cq.wiki.mapper.UserMapper.selectByExample     :137  [32m77369576467337216 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user WHERE ( login_name = ? )
2021-08-02 19:59:04.490 DEBUG com.cq.wiki.mapper.UserMapper.selectByExample     :137  [32m77369576467337216 [0;39m ==> Parameters: test(String)
2021-08-02 19:59:04.491 TRACE com.cq.wiki.mapper.UserMapper.selectByExample     :143  [32m77369576467337216 [0;39m <==    Columns: id, login_name, name, password
2021-08-02 19:59:04.491 TRACE com.cq.wiki.mapper.UserMapper.selectByExample     :143  [32m77369576467337216 [0;39m <==        Row: 6290961574199, test, 测试, e70e2222a9d67c4f2eae107533359aa4
2021-08-02 19:59:04.491 DEBUG com.cq.wiki.mapper.UserMapper.selectByExample     :137  [32m77369576467337216 [0;39m <==      Total: 1
2021-08-02 19:59:04.492 INFO  com.cq.wiki.service.UserService                   :71   [32m77369576467337216 [0;39m 密码错误，输入密码：098f6bcd4621d373cade4e832627b4f6,数据库密码：e70e2222a9d67c4f2eae107533359aa4
2021-08-02 19:59:04.493 WARN  com.cq.wiki.controller.ControllerExceptionHandler :44   [32m77369576467337216 [0;39m 业务异常：用户名不存在或密码错误
2021-08-02 19:59:04.493 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver   :199  [32m77369576467337216 [0;39m Resolved [com.cq.wiki.exception.BusinessException: 用户名不存在或密码错误]
2021-08-02 19:59:05.011 INFO  com.cq.wiki.job.DocJob                            :31   [32m77369578665152512 [0;39m 更新电子书下的文档数据开始
2021-08-02 19:59:05.012 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77369578665152512 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-08-02 19:59:05.013 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77369578665152512 [0;39m ==> Parameters: 
2021-08-02 19:59:05.014 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77369578665152512 [0;39m <==    Updates: 11
2021-08-02 19:59:05.014 INFO  com.cq.wiki.job.DocJob                            :34   [32m77369578665152512 [0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2021-08-02 19:59:06.473 INFO  com.cq.wiki.aspect.LogAspect                      :52   [32m77369584797224960 [0;39m ------------- 开始 -------------
2021-08-02 19:59:06.474 INFO  com.cq.wiki.aspect.LogAspect                      :53   [32m77369584797224960 [0;39m 请求地址: http://localhost:7770/user/login POST
2021-08-02 19:59:06.474 INFO  com.cq.wiki.aspect.LogAspect                      :54   [32m77369584797224960 [0;39m 类名方法: com.cq.wiki.controller.UserController.login
2021-08-02 19:59:06.474 INFO  com.cq.wiki.aspect.LogAspect                      :55   [32m77369584797224960 [0;39m 远程地址: 0:0:0:0:0:0:0:1
2021-08-02 19:59:06.474 INFO  com.cq.wiki.aspect.LogAspect                      :77   [32m77369584797224960 [0;39m 请求参数: [{"loginName":"test"}]
2021-08-02 19:59:06.476 DEBUG com.cq.wiki.mapper.UserMapper.selectByExample     :137  [32m77369584797224960 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user WHERE ( login_name = ? )
2021-08-02 19:59:06.476 DEBUG com.cq.wiki.mapper.UserMapper.selectByExample     :137  [32m77369584797224960 [0;39m ==> Parameters: test(String)
2021-08-02 19:59:06.478 TRACE com.cq.wiki.mapper.UserMapper.selectByExample     :143  [32m77369584797224960 [0;39m <==    Columns: id, login_name, name, password
2021-08-02 19:59:06.478 TRACE com.cq.wiki.mapper.UserMapper.selectByExample     :143  [32m77369584797224960 [0;39m <==        Row: 6290961574199, test, 测试, e70e2222a9d67c4f2eae107533359aa4
2021-08-02 19:59:06.479 DEBUG com.cq.wiki.mapper.UserMapper.selectByExample     :137  [32m77369584797224960 [0;39m <==      Total: 1
2021-08-02 19:59:06.479 INFO  com.cq.wiki.service.UserService                   :71   [32m77369584797224960 [0;39m 密码错误，输入密码：098f6bcd4621d373cade4e832627b4f6,数据库密码：e70e2222a9d67c4f2eae107533359aa4
2021-08-02 19:59:06.480 WARN  com.cq.wiki.controller.ControllerExceptionHandler :44   [32m77369584797224960 [0;39m 业务异常：用户名不存在或密码错误
2021-08-02 19:59:06.481 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver   :199  [32m77369584797224960 [0;39m Resolved [com.cq.wiki.exception.BusinessException: 用户名不存在或密码错误]
2021-08-02 19:59:35.007 INFO  com.cq.wiki.job.DocJob                            :31   [32m77369704477495296 [0;39m 更新电子书下的文档数据开始
2021-08-02 19:59:35.008 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77369704477495296 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-08-02 19:59:35.009 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77369704477495296 [0;39m ==> Parameters: 
2021-08-02 19:59:35.010 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77369704477495296 [0;39m <==    Updates: 11
2021-08-02 19:59:35.010 INFO  com.cq.wiki.job.DocJob                            :34   [32m77369704477495296 [0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2021-08-02 20:00:00.004 INFO  com.cq.wiki.job.EbookSnapshotJob                  :32   [32m77369809322512384 [0;39m 生成今日电子书快照开始
2021-08-02 20:00:00.006 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m77369809322512384 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-02 20:00:00.006 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m77369809322512384 [0;39m ==> Parameters: 
2021-08-02 20:00:00.009 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m77369809322512384 [0;39m <==    Updates: 0
2021-08-02 20:00:00.009 INFO  com.cq.wiki.job.EbookSnapshotJob                  :35   [32m77369809322512384 [0;39m 生成今日电子书快照结束，耗时：4毫秒
2021-08-02 20:00:05.015 INFO  com.cq.wiki.job.DocJob                            :31   [32m77369830340169728 [0;39m 更新电子书下的文档数据开始
2021-08-02 20:00:05.016 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77369830340169728 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-08-02 20:00:05.016 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77369830340169728 [0;39m ==> Parameters: 
2021-08-02 20:00:05.018 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77369830340169728 [0;39m <==    Updates: 11
2021-08-02 20:00:05.018 INFO  com.cq.wiki.job.DocJob                            :34   [32m77369830340169728 [0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2021-08-02 20:00:35.002 INFO  com.cq.wiki.job.DocJob                            :31   [32m77369956114763776 [0;39m 更新电子书下的文档数据开始
2021-08-02 20:00:35.003 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77369956114763776 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-08-02 20:00:35.003 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77369956114763776 [0;39m ==> Parameters: 
2021-08-02 20:00:35.004 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77369956114763776 [0;39m <==    Updates: 11
2021-08-02 20:00:35.005 INFO  com.cq.wiki.job.DocJob                            :34   [32m77369956114763776 [0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2021-08-02 20:01:00.010 INFO  com.cq.wiki.job.EbookSnapshotJob                  :32   [32m77370061005918208 [0;39m 生成今日电子书快照开始
2021-08-02 20:01:00.011 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m77370061005918208 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-02 20:01:00.012 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m77370061005918208 [0;39m ==> Parameters: 
2021-08-02 20:01:00.016 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m77370061005918208 [0;39m <==    Updates: 0
2021-08-02 20:01:00.017 INFO  com.cq.wiki.job.EbookSnapshotJob                  :35   [32m77370061005918208 [0;39m 生成今日电子书快照结束，耗时：7毫秒
2021-08-02 20:01:05.012 INFO  com.cq.wiki.job.DocJob                            :31   [32m77370081985826816 [0;39m 更新电子书下的文档数据开始
2021-08-02 20:01:05.013 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77370081985826816 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-08-02 20:01:05.014 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77370081985826816 [0;39m ==> Parameters: 
2021-08-02 20:01:05.015 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77370081985826816 [0;39m <==    Updates: 11
2021-08-02 20:01:05.015 INFO  com.cq.wiki.job.DocJob                            :34   [32m77370081985826816 [0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2021-08-02 20:01:35.008 INFO  com.cq.wiki.job.DocJob                            :31   [32m77370207798169600 [0;39m 更新电子书下的文档数据开始
2021-08-02 20:01:35.009 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77370207798169600 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-08-02 20:01:35.010 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77370207798169600 [0;39m ==> Parameters: 
2021-08-02 20:01:35.011 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m77370207798169600 [0;39m <==    Updates: 11
2021-08-02 20:01:35.012 INFO  com.cq.wiki.job.DocJob                            :34   [32m77370207798169600 [0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2021-08-02 20:01:46.107 INFO  o.s.scheduling.concurrent.ThreadPoolTaskScheduler :218  [32m                  [0;39m Shutting down ExecutorService 'taskScheduler'
2021-08-02 20:01:46.108 INFO  o.s.scheduling.concurrent.ThreadPoolTaskExecutor  :218  [32m                  [0;39m Shutting down ExecutorService 'applicationTaskExecutor'
2021-08-02 20:01:46.109 INFO  com.zaxxer.hikari.HikariDataSource                :350  [32m                  [0;39m HikariPool-2 - Shutdown initiated...
2021-08-02 20:01:46.114 INFO  com.zaxxer.hikari.HikariDataSource                :352  [32m                  [0;39m HikariPool-2 - Shutdown completed.
2021-08-02 20:01:46.263 INFO  com.cq.wiki.config.WikiApplication                :55   [32m                  [0;39m Starting WikiApplication on LAPTOP-T0P8U4U3 with PID 16488 (D:\IdeaProjects\wiki\target\classes started by 程崎 in D:\IdeaProjects\wiki)
2021-08-02 20:01:46.264 INFO  com.cq.wiki.config.WikiApplication                :651  [32m                  [0;39m No active profile set, falling back to default profiles: default
2021-08-02 20:01:46.632 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :108  [32m                  [0;39m Tomcat initialized with port(s): 7770 (http)
2021-08-02 20:01:46.632 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Initializing ProtocolHandler ["http-nio-7770"]
2021-08-02 20:01:46.632 INFO  org.apache.catalina.core.StandardService          :173  [32m                  [0;39m Starting service [Tomcat]
2021-08-02 20:01:46.633 INFO  org.apache.catalina.core.StandardEngine           :173  [32m                  [0;39m Starting Servlet engine: [Apache Tomcat/9.0.37]
2021-08-02 20:01:46.633 INFO  org.apache.catalina.core.AprLifecycleListener     :173  [32m                  [0;39m An older version [1.2.14] of the Apache Tomcat Native library is installed, while Tomcat recommends a minimum version of [1.2.23]
2021-08-02 20:01:46.633 INFO  org.apache.catalina.core.AprLifecycleListener     :173  [32m                  [0;39m Loaded Apache Tomcat Native library [1.2.14] using APR version [1.6.2].
2021-08-02 20:01:46.633 INFO  org.apache.catalina.core.AprLifecycleListener     :173  [32m                  [0;39m APR capabilities: IPv6 [true], sendfile [true], accept filters [false], random [true].
2021-08-02 20:01:46.633 INFO  org.apache.catalina.core.AprLifecycleListener     :173  [32m                  [0;39m APR/OpenSSL configuration: useAprConnector [false], useOpenSSL [true]
2021-08-02 20:01:46.633 INFO  org.apache.catalina.core.AprLifecycleListener     :173  [32m                  [0;39m OpenSSL successfully initialized [OpenSSL 1.0.2l  25 May 2017]
2021-08-02 20:01:46.644 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring embedded WebApplicationContext
2021-08-02 20:01:46.644 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext    :285  [32m                  [0;39m Root WebApplicationContext: initialization completed in 378 ms
2021-08-02 20:01:47.090 INFO  o.s.scheduling.concurrent.ThreadPoolTaskExecutor  :181  [32m                  [0;39m Initializing ExecutorService 'applicationTaskExecutor'
2021-08-02 20:01:47.127 INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer    :58   [32m                  [0;39m LiveReload server is running on port 35729
2021-08-02 20:01:47.214 INFO  o.s.scheduling.concurrent.ThreadPoolTaskScheduler :181  [32m                  [0;39m Initializing ExecutorService 'taskScheduler'
2021-08-02 20:01:47.266 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Starting ProtocolHandler ["http-nio-7770"]
2021-08-02 20:01:47.273 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :220  [32m                  [0;39m Tomcat started on port(s): 7770 (http) with context path ''
2021-08-02 20:01:47.344 INFO  com.cq.wiki.config.WikiApplication                :61   [32m                  [0;39m Started WikiApplication in 1.109 seconds (JVM running for 983.265)
2021-08-02 20:01:47.346 INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener :63   [32m                  [0;39m Condition evaluation unchanged
2021-08-02 20:01:47.346 INFO  com.cq.wiki.config.WikiApplication                :26   [32m                  [0;39m 启动成功！！
2021-08-02 20:01:47.346 INFO  com.cq.wiki.config.WikiApplication                :27   [32m                  [0;39m 地址: 	http://127.0.0.1:7770

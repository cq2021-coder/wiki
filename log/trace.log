2021-06-30 17:48:44.187 INFO  org.hibernate.validator.internal.util.Version     :21   [32m                  [0;39m HV000001: Hibernate Validator 6.1.5.Final
2021-06-30 17:48:44.218 INFO  com.cq.wiki.config.WikiApplication                :55   [32m                  [0;39m Starting WikiApplication on LAPTOP-T0P8U4U3 with PID 12404 (D:\IdeaProjects\wiki\target\classes started by 程崎 in D:\IdeaProjects\wiki)
2021-06-30 17:48:44.218 INFO  com.cq.wiki.config.WikiApplication                :651  [32m                  [0;39m No active profile set, falling back to default profiles: default
2021-06-30 17:48:44.281 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :225  [32m                  [0;39m Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2021-06-30 17:48:44.281 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :225  [32m                  [0;39m For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2021-06-30 17:48:45.836 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :108  [32m                  [0;39m Tomcat initialized with port(s): 8880 (http)
2021-06-30 17:48:45.852 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Initializing ProtocolHandler ["http-nio-8880"]
2021-06-30 17:48:45.852 INFO  org.apache.catalina.core.StandardService          :173  [32m                  [0;39m Starting service [Tomcat]
2021-06-30 17:48:45.852 INFO  org.apache.catalina.core.StandardEngine           :173  [32m                  [0;39m Starting Servlet engine: [Apache Tomcat/9.0.37]
2021-06-30 17:48:45.852 INFO  org.apache.catalina.core.AprLifecycleListener     :173  [32m                  [0;39m An older version [1.2.14] of the Apache Tomcat Native library is installed, while Tomcat recommends a minimum version of [1.2.23]
2021-06-30 17:48:45.852 INFO  org.apache.catalina.core.AprLifecycleListener     :173  [32m                  [0;39m Loaded Apache Tomcat Native library [1.2.14] using APR version [1.6.2].
2021-06-30 17:48:45.852 INFO  org.apache.catalina.core.AprLifecycleListener     :173  [32m                  [0;39m APR capabilities: IPv6 [true], sendfile [true], accept filters [false], random [true].
2021-06-30 17:48:45.852 INFO  org.apache.catalina.core.AprLifecycleListener     :173  [32m                  [0;39m APR/OpenSSL configuration: useAprConnector [false], useOpenSSL [true]
2021-06-30 17:48:46.880 INFO  org.apache.catalina.core.AprLifecycleListener     :173  [32m                  [0;39m OpenSSL successfully initialized [OpenSSL 1.0.2l  25 May 2017]
2021-06-30 17:48:46.992 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring embedded WebApplicationContext
2021-06-30 17:48:46.992 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext    :285  [32m                  [0;39m Root WebApplicationContext: initialization completed in 2711 ms
2021-06-30 17:48:47.945 INFO  o.s.scheduling.concurrent.ThreadPoolTaskExecutor  :181  [32m                  [0;39m Initializing ExecutorService 'applicationTaskExecutor'
2021-06-30 17:48:48.007 INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer    :58   [32m                  [0;39m LiveReload server is running on port 35729
2021-06-30 17:48:48.164 INFO  o.s.scheduling.concurrent.ThreadPoolTaskScheduler :181  [32m                  [0;39m Initializing ExecutorService 'taskScheduler'
2021-06-30 17:48:48.242 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Starting ProtocolHandler ["http-nio-8880"]
2021-06-30 17:48:48.258 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :220  [32m                  [0;39m Tomcat started on port(s): 8880 (http) with context path ''
2021-06-30 17:48:48.508 INFO  com.cq.wiki.config.WikiApplication                :61   [32m                  [0;39m Started WikiApplication in 4.704 seconds (JVM running for 5.379)
2021-06-30 17:48:48.508 INFO  com.cq.wiki.config.WikiApplication                :26   [32m                  [0;39m 启动成功！！
2021-06-30 17:48:48.508 INFO  com.cq.wiki.config.WikiApplication                :27   [32m                  [0;39m 地址: 	http://127.0.0.1:8880
2021-06-30 17:49:00.013 INFO  com.cq.wiki.job.EbookSnapshotJob                  :32   [32m65378042566021120 [0;39m 生成今日电子书快照开始
2021-06-30 17:49:00.028 INFO  com.zaxxer.hikari.HikariDataSource                :110  [32m65378042566021120 [0;39m HikariPool-1 - Starting...
2021-06-30 17:49:00.497 INFO  com.zaxxer.hikari.HikariDataSource                :123  [32m65378042566021120 [0;39m HikariPool-1 - Start completed.
2021-06-30 17:49:00.497 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65378042566021120 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-06-30 17:49:00.512 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65378042566021120 [0;39m ==> Parameters: 
2021-06-30 17:49:00.512 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65378042566021120 [0;39m <==    Updates: 0
2021-06-30 17:49:00.512 INFO  com.cq.wiki.job.EbookSnapshotJob                  :35   [32m65378042566021120 [0;39m 生成今日电子书快照结束，耗时：499毫秒
2021-06-30 17:49:05.005 INFO  com.cq.wiki.job.DocJob                            :31   [32m65378063503986688 [0;39m 更新电子书下的文档数据开始
2021-06-30 17:49:05.005 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65378063503986688 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-06-30 17:49:05.005 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65378063503986688 [0;39m ==> Parameters: 
2021-06-30 17:49:05.023 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65378063503986688 [0;39m <==    Updates: 7
2021-06-30 17:49:05.023 INFO  com.cq.wiki.job.DocJob                            :34   [32m65378063503986688 [0;39m 更新电子书下的文档数据结束，耗时：18毫秒
2021-06-30 17:49:35.015 INFO  com.cq.wiki.job.DocJob                            :31   [32m65378189375049728 [0;39m 更新电子书下的文档数据开始
2021-06-30 17:49:35.015 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65378189375049728 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-06-30 17:49:35.015 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65378189375049728 [0;39m ==> Parameters: 
2021-06-30 17:49:35.015 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65378189375049728 [0;39m <==    Updates: 7
2021-06-30 17:49:35.015 INFO  com.cq.wiki.job.DocJob                            :34   [32m65378189375049728 [0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2021-06-30 17:50:00.025 INFO  com.cq.wiki.job.EbookSnapshotJob                  :32   [32m65378294274592768 [0;39m 生成今日电子书快照开始
2021-06-30 17:50:00.025 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65378294274592768 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-06-30 17:50:00.025 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65378294274592768 [0;39m ==> Parameters: 
2021-06-30 17:50:00.025 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65378294274592768 [0;39m <==    Updates: 0
2021-06-30 17:50:00.025 INFO  com.cq.wiki.job.EbookSnapshotJob                  :35   [32m65378294274592768 [0;39m 生成今日电子书快照结束，耗时：0毫秒
2021-06-30 17:50:05.011 INFO  com.cq.wiki.job.DocJob                            :31   [32m65378315187392512 [0;39m 更新电子书下的文档数据开始
2021-06-30 17:50:05.011 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65378315187392512 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-06-30 17:50:05.011 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65378315187392512 [0;39m ==> Parameters: 
2021-06-30 17:50:05.011 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65378315187392512 [0;39m <==    Updates: 7
2021-06-30 17:50:05.011 INFO  com.cq.wiki.job.DocJob                            :34   [32m65378315187392512 [0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2021-06-30 17:50:35.016 INFO  com.cq.wiki.job.DocJob                            :31   [32m65378441037484032 [0;39m 更新电子书下的文档数据开始
2021-06-30 17:50:35.016 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65378441037484032 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-06-30 17:50:35.016 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65378441037484032 [0;39m ==> Parameters: 
2021-06-30 17:50:35.016 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65378441037484032 [0;39m <==    Updates: 7
2021-06-30 17:50:35.016 INFO  com.cq.wiki.job.DocJob                            :34   [32m65378441037484032 [0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2021-06-30 17:51:00.005 INFO  com.cq.wiki.job.EbookSnapshotJob                  :32   [32m65378545848946688 [0;39m 生成今日电子书快照开始
2021-06-30 17:51:00.005 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65378545848946688 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-06-30 17:51:00.005 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65378545848946688 [0;39m ==> Parameters: 
2021-06-30 17:51:00.005 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65378545848946688 [0;39m <==    Updates: 0
2021-06-30 17:51:00.005 INFO  com.cq.wiki.job.EbookSnapshotJob                  :35   [32m65378545848946688 [0;39m 生成今日电子书快照结束，耗时：0毫秒
2021-06-30 17:51:05.019 INFO  com.cq.wiki.job.DocJob                            :31   [32m65378566879186944 [0;39m 更新电子书下的文档数据开始
2021-06-30 17:51:05.019 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65378566879186944 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-06-30 17:51:05.019 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65378566879186944 [0;39m ==> Parameters: 
2021-06-30 17:51:05.019 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65378566879186944 [0;39m <==    Updates: 7
2021-06-30 17:51:05.019 INFO  com.cq.wiki.job.DocJob                            :34   [32m65378566879186944 [0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2021-06-30 17:51:35.012 INFO  com.cq.wiki.job.DocJob                            :31   [32m65378692678946816 [0;39m 更新电子书下的文档数据开始
2021-06-30 17:51:35.012 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65378692678946816 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-06-30 17:51:35.012 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65378692678946816 [0;39m ==> Parameters: 
2021-06-30 17:51:35.012 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65378692678946816 [0;39m <==    Updates: 7
2021-06-30 17:51:35.012 INFO  com.cq.wiki.job.DocJob                            :34   [32m65378692678946816 [0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2021-06-30 17:52:00.009 INFO  com.cq.wiki.job.EbookSnapshotJob                  :32   [32m65378797523963904 [0;39m 生成今日电子书快照开始
2021-06-30 17:52:00.009 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65378797523963904 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-06-30 17:52:00.009 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65378797523963904 [0;39m ==> Parameters: 
2021-06-30 17:52:00.009 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65378797523963904 [0;39m <==    Updates: 0
2021-06-30 17:52:00.009 INFO  com.cq.wiki.job.EbookSnapshotJob                  :35   [32m65378797523963904 [0;39m 生成今日电子书快照结束，耗时：0毫秒
2021-06-30 17:52:05.015 INFO  com.cq.wiki.job.DocJob                            :31   [32m65378818520649728 [0;39m 更新电子书下的文档数据开始
2021-06-30 17:52:05.015 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65378818520649728 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-06-30 17:52:05.015 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65378818520649728 [0;39m ==> Parameters: 
2021-06-30 17:52:05.015 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65378818520649728 [0;39m <==    Updates: 7
2021-06-30 17:52:05.015 INFO  com.cq.wiki.job.DocJob                            :34   [32m65378818520649728 [0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2021-06-30 17:52:35.015 INFO  com.cq.wiki.job.DocJob                            :31   [32m65378944349769728 [0;39m 更新电子书下的文档数据开始
2021-06-30 17:52:35.015 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65378944349769728 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-06-30 17:52:35.015 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65378944349769728 [0;39m ==> Parameters: 
2021-06-30 17:52:35.015 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65378944349769728 [0;39m <==    Updates: 7
2021-06-30 17:52:35.015 INFO  com.cq.wiki.job.DocJob                            :34   [32m65378944349769728 [0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2021-06-30 17:53:00.018 INFO  com.cq.wiki.job.EbookSnapshotJob                  :32   [32m65379049219952640 [0;39m 生成今日电子书快照开始
2021-06-30 17:53:00.018 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65379049219952640 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-06-30 17:53:00.018 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65379049219952640 [0;39m ==> Parameters: 
2021-06-30 17:53:00.018 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65379049219952640 [0;39m <==    Updates: 0
2021-06-30 17:53:00.018 INFO  com.cq.wiki.job.EbookSnapshotJob                  :35   [32m65379049219952640 [0;39m 生成今日电子书快照结束，耗时：0毫秒
2021-06-30 17:53:05.008 INFO  com.cq.wiki.job.DocJob                            :31   [32m65379070149529600 [0;39m 更新电子书下的文档数据开始
2021-06-30 17:53:05.008 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65379070149529600 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-06-30 17:53:05.008 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65379070149529600 [0;39m ==> Parameters: 
2021-06-30 17:53:05.008 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65379070149529600 [0;39m <==    Updates: 7
2021-06-30 17:53:05.008 INFO  com.cq.wiki.job.DocJob                            :34   [32m65379070149529600 [0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2021-06-30 17:53:31.810 INFO  o.s.scheduling.concurrent.ThreadPoolTaskScheduler :218  [32m                  [0;39m Shutting down ExecutorService 'taskScheduler'
2021-06-30 17:53:31.810 INFO  o.s.scheduling.concurrent.ThreadPoolTaskExecutor  :218  [32m                  [0;39m Shutting down ExecutorService 'applicationTaskExecutor'
2021-06-30 17:53:31.810 INFO  com.zaxxer.hikari.HikariDataSource                :350  [32m                  [0;39m HikariPool-1 - Shutdown initiated...
2021-06-30 17:53:31.834 INFO  com.zaxxer.hikari.HikariDataSource                :352  [32m                  [0;39m HikariPool-1 - Shutdown completed.
2021-06-30 17:53:31.975 INFO  com.cq.wiki.config.WikiApplication                :55   [32m                  [0;39m Starting WikiApplication on LAPTOP-T0P8U4U3 with PID 12404 (D:\IdeaProjects\wiki\target\classes started by 程崎 in D:\IdeaProjects\wiki)
2021-06-30 17:53:31.975 INFO  com.cq.wiki.config.WikiApplication                :651  [32m                  [0;39m No active profile set, falling back to default profiles: default
2021-06-30 17:53:32.335 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :108  [32m                  [0;39m Tomcat initialized with port(s): 8880 (http)
2021-06-30 17:53:32.335 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Initializing ProtocolHandler ["http-nio-8880"]
2021-06-30 17:53:32.335 INFO  org.apache.catalina.core.StandardService          :173  [32m                  [0;39m Starting service [Tomcat]
2021-06-30 17:53:32.335 INFO  org.apache.catalina.core.StandardEngine           :173  [32m                  [0;39m Starting Servlet engine: [Apache Tomcat/9.0.37]
2021-06-30 17:53:32.335 INFO  org.apache.catalina.core.AprLifecycleListener     :173  [32m                  [0;39m An older version [1.2.14] of the Apache Tomcat Native library is installed, while Tomcat recommends a minimum version of [1.2.23]
2021-06-30 17:53:32.335 INFO  org.apache.catalina.core.AprLifecycleListener     :173  [32m                  [0;39m Loaded Apache Tomcat Native library [1.2.14] using APR version [1.6.2].
2021-06-30 17:53:32.335 INFO  org.apache.catalina.core.AprLifecycleListener     :173  [32m                  [0;39m APR capabilities: IPv6 [true], sendfile [true], accept filters [false], random [true].
2021-06-30 17:53:32.335 INFO  org.apache.catalina.core.AprLifecycleListener     :173  [32m                  [0;39m APR/OpenSSL configuration: useAprConnector [false], useOpenSSL [true]
2021-06-30 17:53:32.335 INFO  org.apache.catalina.core.AprLifecycleListener     :173  [32m                  [0;39m OpenSSL successfully initialized [OpenSSL 1.0.2l  25 May 2017]
2021-06-30 17:53:32.351 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring embedded WebApplicationContext
2021-06-30 17:53:32.351 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext    :285  [32m                  [0;39m Root WebApplicationContext: initialization completed in 376 ms
2021-06-30 17:53:32.804 INFO  o.s.scheduling.concurrent.ThreadPoolTaskExecutor  :181  [32m                  [0;39m Initializing ExecutorService 'applicationTaskExecutor'
2021-06-30 17:53:32.851 INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer    :58   [32m                  [0;39m LiveReload server is running on port 35729
2021-06-30 17:53:32.939 INFO  o.s.scheduling.concurrent.ThreadPoolTaskScheduler :181  [32m                  [0;39m Initializing ExecutorService 'taskScheduler'
2021-06-30 17:53:32.986 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Starting ProtocolHandler ["http-nio-8880"]
2021-06-30 17:53:32.986 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :220  [32m                  [0;39m Tomcat started on port(s): 8880 (http) with context path ''
2021-06-30 17:53:33.064 INFO  com.cq.wiki.config.WikiApplication                :61   [32m                  [0;39m Started WikiApplication in 1.12 seconds (JVM running for 289.943)
2021-06-30 17:53:33.064 INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener :63   [32m                  [0;39m Condition evaluation unchanged
2021-06-30 17:53:33.064 INFO  com.cq.wiki.config.WikiApplication                :26   [32m                  [0;39m 启动成功！！
2021-06-30 17:53:33.064 INFO  com.cq.wiki.config.WikiApplication                :27   [32m                  [0;39m 地址: 	http://127.0.0.1:8880
2021-06-30 17:53:35.017 INFO  com.cq.wiki.job.DocJob                            :31   [32m65379196016398336 [0;39m 更新电子书下的文档数据开始
2021-06-30 17:53:35.017 INFO  com.zaxxer.hikari.HikariDataSource                :110  [32m65379196016398336 [0;39m HikariPool-2 - Starting...
2021-06-30 17:53:35.033 INFO  com.zaxxer.hikari.HikariDataSource                :123  [32m65379196016398336 [0;39m HikariPool-2 - Start completed.
2021-06-30 17:53:35.033 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65379196016398336 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-06-30 17:53:35.033 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65379196016398336 [0;39m ==> Parameters: 
2021-06-30 17:53:35.033 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65379196016398336 [0;39m <==    Updates: 7
2021-06-30 17:53:35.033 INFO  com.cq.wiki.job.DocJob                            :34   [32m65379196016398336 [0;39m 更新电子书下的文档数据结束，耗时：16毫秒
2021-06-30 17:54:00.025 INFO  com.cq.wiki.job.EbookSnapshotJob                  :32   [32m65379300907552768 [0;39m 生成今日电子书快照开始
2021-06-30 17:54:00.025 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65379300907552768 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-06-30 17:54:00.025 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65379300907552768 [0;39m ==> Parameters: 
2021-06-30 17:54:00.025 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65379300907552768 [0;39m <==    Updates: 0
2021-06-30 17:54:00.025 INFO  com.cq.wiki.job.EbookSnapshotJob                  :35   [32m65379300907552768 [0;39m 生成今日电子书快照结束，耗时：0毫秒
2021-06-30 17:54:05.021 INFO  com.cq.wiki.job.DocJob                            :31   [32m65379321862295552 [0;39m 更新电子书下的文档数据开始
2021-06-30 17:54:05.021 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65379321862295552 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-06-30 17:54:05.021 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65379321862295552 [0;39m ==> Parameters: 
2021-06-30 17:54:05.021 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65379321862295552 [0;39m <==    Updates: 7
2021-06-30 17:54:05.021 INFO  com.cq.wiki.job.DocJob                            :34   [32m65379321862295552 [0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2021-06-30 17:54:35.019 INFO  com.cq.wiki.job.DocJob                            :31   [32m65379447683026944 [0;39m 更新电子书下的文档数据开始
2021-06-30 17:54:35.019 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65379447683026944 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-06-30 17:54:35.019 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65379447683026944 [0;39m ==> Parameters: 
2021-06-30 17:54:35.019 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65379447683026944 [0;39m <==    Updates: 7
2021-06-30 17:54:35.019 INFO  com.cq.wiki.job.DocJob                            :34   [32m65379447683026944 [0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2021-06-30 17:55:00.018 INFO  com.cq.wiki.job.EbookSnapshotJob                  :32   [32m65379552536432640 [0;39m 生成今日电子书快照开始
2021-06-30 17:55:00.018 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65379552536432640 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-06-30 17:55:00.018 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65379552536432640 [0;39m ==> Parameters: 
2021-06-30 17:55:00.018 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65379552536432640 [0;39m <==    Updates: 0
2021-06-30 17:55:00.018 INFO  com.cq.wiki.job.EbookSnapshotJob                  :35   [32m65379552536432640 [0;39m 生成今日电子书快照结束，耗时：0毫秒
2021-06-30 17:55:05.006 INFO  com.cq.wiki.job.DocJob                            :31   [32m65379573457620992 [0;39m 更新电子书下的文档数据开始
2021-06-30 17:55:05.006 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65379573457620992 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-06-30 17:55:05.006 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65379573457620992 [0;39m ==> Parameters: 
2021-06-30 17:55:05.006 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65379573457620992 [0;39m <==    Updates: 7
2021-06-30 17:55:05.006 INFO  com.cq.wiki.job.DocJob                            :34   [32m65379573457620992 [0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2021-06-30 17:55:35.005 INFO  com.cq.wiki.job.DocJob                            :31   [32m65379699282546688 [0;39m 更新电子书下的文档数据开始
2021-06-30 17:55:35.005 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65379699282546688 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-06-30 17:55:35.005 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65379699282546688 [0;39m ==> Parameters: 
2021-06-30 17:55:35.005 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65379699282546688 [0;39m <==    Updates: 7
2021-06-30 17:55:35.005 INFO  com.cq.wiki.job.DocJob                            :34   [32m65379699282546688 [0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2021-06-30 17:55:39.180 INFO  o.s.scheduling.concurrent.ThreadPoolTaskScheduler :218  [32m                  [0;39m Shutting down ExecutorService 'taskScheduler'
2021-06-30 17:55:39.180 INFO  o.s.scheduling.concurrent.ThreadPoolTaskExecutor  :218  [32m                  [0;39m Shutting down ExecutorService 'applicationTaskExecutor'
2021-06-30 17:55:39.180 INFO  com.zaxxer.hikari.HikariDataSource                :350  [32m                  [0;39m HikariPool-2 - Shutdown initiated...
2021-06-30 17:55:39.196 INFO  com.zaxxer.hikari.HikariDataSource                :352  [32m                  [0;39m HikariPool-2 - Shutdown completed.
2021-06-30 17:55:39.322 INFO  com.cq.wiki.config.WikiApplication                :55   [32m                  [0;39m Starting WikiApplication on LAPTOP-T0P8U4U3 with PID 12404 (D:\IdeaProjects\wiki\target\classes started by 程崎 in D:\IdeaProjects\wiki)
2021-06-30 17:55:39.322 INFO  com.cq.wiki.config.WikiApplication                :651  [32m                  [0;39m No active profile set, falling back to default profiles: default
2021-06-30 17:55:39.675 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :108  [32m                  [0;39m Tomcat initialized with port(s): 8880 (http)
2021-06-30 17:55:39.675 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Initializing ProtocolHandler ["http-nio-8880"]
2021-06-30 17:55:39.675 INFO  org.apache.catalina.core.StandardService          :173  [32m                  [0;39m Starting service [Tomcat]
2021-06-30 17:55:39.675 INFO  org.apache.catalina.core.StandardEngine           :173  [32m                  [0;39m Starting Servlet engine: [Apache Tomcat/9.0.37]
2021-06-30 17:55:39.675 INFO  org.apache.catalina.core.AprLifecycleListener     :173  [32m                  [0;39m An older version [1.2.14] of the Apache Tomcat Native library is installed, while Tomcat recommends a minimum version of [1.2.23]
2021-06-30 17:55:39.675 INFO  org.apache.catalina.core.AprLifecycleListener     :173  [32m                  [0;39m Loaded Apache Tomcat Native library [1.2.14] using APR version [1.6.2].
2021-06-30 17:55:39.675 INFO  org.apache.catalina.core.AprLifecycleListener     :173  [32m                  [0;39m APR capabilities: IPv6 [true], sendfile [true], accept filters [false], random [true].
2021-06-30 17:55:39.675 INFO  org.apache.catalina.core.AprLifecycleListener     :173  [32m                  [0;39m APR/OpenSSL configuration: useAprConnector [false], useOpenSSL [true]
2021-06-30 17:55:39.675 INFO  org.apache.catalina.core.AprLifecycleListener     :173  [32m                  [0;39m OpenSSL successfully initialized [OpenSSL 1.0.2l  25 May 2017]
2021-06-30 17:55:39.691 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring embedded WebApplicationContext
2021-06-30 17:55:39.691 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext    :285  [32m                  [0;39m Root WebApplicationContext: initialization completed in 369 ms
2021-06-30 17:55:40.098 INFO  o.s.scheduling.concurrent.ThreadPoolTaskExecutor  :181  [32m                  [0;39m Initializing ExecutorService 'applicationTaskExecutor'
2021-06-30 17:55:40.114 INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer    :58   [32m                  [0;39m LiveReload server is running on port 35729
2021-06-30 17:55:40.208 INFO  o.s.scheduling.concurrent.ThreadPoolTaskScheduler :181  [32m                  [0;39m Initializing ExecutorService 'taskScheduler'
2021-06-30 17:55:40.270 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Starting ProtocolHandler ["http-nio-8880"]
2021-06-30 17:55:40.270 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :220  [32m                  [0;39m Tomcat started on port(s): 8880 (http) with context path ''
2021-06-30 17:55:40.348 INFO  com.cq.wiki.config.WikiApplication                :61   [32m                  [0;39m Started WikiApplication in 1.044 seconds (JVM running for 417.216)
2021-06-30 17:55:40.348 INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener :63   [32m                  [0;39m Condition evaluation unchanged
2021-06-30 17:55:40.348 INFO  com.cq.wiki.config.WikiApplication                :26   [32m                  [0;39m 启动成功！！
2021-06-30 17:55:40.348 INFO  com.cq.wiki.config.WikiApplication                :27   [32m                  [0;39m 地址: 	http://127.0.0.1:8880
2021-06-30 17:56:00.015 INFO  com.cq.wiki.job.EbookSnapshotJob                  :32   [32m65379804182089728 [0;39m 生成今日电子书快照开始
2021-06-30 17:56:00.015 INFO  com.zaxxer.hikari.HikariDataSource                :110  [32m65379804182089728 [0;39m HikariPool-3 - Starting...
2021-06-30 17:56:00.031 INFO  com.zaxxer.hikari.HikariDataSource                :123  [32m65379804182089728 [0;39m HikariPool-3 - Start completed.
2021-06-30 17:56:00.031 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65379804182089728 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-06-30 17:56:00.031 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65379804182089728 [0;39m ==> Parameters: 
2021-06-30 17:56:00.031 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65379804182089728 [0;39m <==    Updates: 0
2021-06-30 17:56:00.031 INFO  com.cq.wiki.job.EbookSnapshotJob                  :35   [32m65379804182089728 [0;39m 生成今日电子书快照结束，耗时：16毫秒
2021-06-30 17:56:05.007 INFO  com.cq.wiki.job.DocJob                            :31   [32m65379825120055296 [0;39m 更新电子书下的文档数据开始
2021-06-30 17:56:05.007 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65379825120055296 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-06-30 17:56:05.007 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65379825120055296 [0;39m ==> Parameters: 
2021-06-30 17:56:05.007 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65379825120055296 [0;39m <==    Updates: 7
2021-06-30 17:56:05.007 INFO  com.cq.wiki.job.DocJob                            :34   [32m65379825120055296 [0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2021-06-30 17:56:35.012 INFO  com.cq.wiki.job.DocJob                            :31   [32m65379950970146816 [0;39m 更新电子书下的文档数据开始
2021-06-30 17:56:35.012 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65379950970146816 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-06-30 17:56:35.012 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65379950970146816 [0;39m ==> Parameters: 
2021-06-30 17:56:35.012 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65379950970146816 [0;39m <==    Updates: 7
2021-06-30 17:56:35.012 INFO  com.cq.wiki.job.DocJob                            :34   [32m65379950970146816 [0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2021-06-30 17:57:00.012 INFO  com.cq.wiki.job.EbookSnapshotJob                  :32   [32m65380055827746816 [0;39m 生成今日电子书快照开始
2021-06-30 17:57:00.012 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65380055827746816 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-06-30 17:57:00.012 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65380055827746816 [0;39m ==> Parameters: 
2021-06-30 17:57:00.012 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65380055827746816 [0;39m <==    Updates: 0
2021-06-30 17:57:00.012 INFO  com.cq.wiki.job.EbookSnapshotJob                  :35   [32m65380055827746816 [0;39m 生成今日电子书快照结束，耗时：0毫秒
2021-06-30 17:57:05.019 INFO  com.cq.wiki.job.DocJob                            :31   [32m65380076828626944 [0;39m 更新电子书下的文档数据开始
2021-06-30 17:57:05.019 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65380076828626944 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-06-30 17:57:05.019 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65380076828626944 [0;39m ==> Parameters: 
2021-06-30 17:57:05.019 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65380076828626944 [0;39m <==    Updates: 7
2021-06-30 17:57:05.019 INFO  com.cq.wiki.job.DocJob                            :34   [32m65380076828626944 [0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2021-06-30 17:57:35.008 INFO  com.cq.wiki.job.DocJob                            :31   [32m65380202611609600 [0;39m 更新电子书下的文档数据开始
2021-06-30 17:57:35.008 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65380202611609600 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-06-30 17:57:35.008 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65380202611609600 [0;39m ==> Parameters: 
2021-06-30 17:57:35.008 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65380202611609600 [0;39m <==    Updates: 7
2021-06-30 17:57:35.008 INFO  com.cq.wiki.job.DocJob                            :34   [32m65380202611609600 [0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2021-06-30 17:58:00.017 INFO  com.cq.wiki.job.EbookSnapshotJob                  :32   [32m65380307506958336 [0;39m 生成今日电子书快照开始
2021-06-30 17:58:00.017 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65380307506958336 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-06-30 17:58:00.017 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65380307506958336 [0;39m ==> Parameters: 
2021-06-30 17:58:00.017 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65380307506958336 [0;39m <==    Updates: 0
2021-06-30 17:58:00.017 INFO  com.cq.wiki.job.EbookSnapshotJob                  :35   [32m65380307506958336 [0;39m 生成今日电子书快照结束，耗时：0毫秒
2021-06-30 17:58:05.006 INFO  com.cq.wiki.job.DocJob                            :31   [32m65380328432340992 [0;39m 更新电子书下的文档数据开始
2021-06-30 17:58:05.006 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65380328432340992 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-06-30 17:58:05.006 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65380328432340992 [0;39m ==> Parameters: 
2021-06-30 17:58:05.006 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65380328432340992 [0;39m <==    Updates: 7
2021-06-30 17:58:05.006 INFO  com.cq.wiki.job.DocJob                            :34   [32m65380328432340992 [0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2021-06-30 17:58:35.006 INFO  com.cq.wiki.job.DocJob                            :31   [32m65380454261460992 [0;39m 更新电子书下的文档数据开始
2021-06-30 17:58:35.006 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65380454261460992 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-06-30 17:58:35.006 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65380454261460992 [0;39m ==> Parameters: 
2021-06-30 17:58:35.006 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65380454261460992 [0;39m <==    Updates: 7
2021-06-30 17:58:35.006 INFO  com.cq.wiki.job.DocJob                            :34   [32m65380454261460992 [0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2021-06-30 17:59:00.013 INFO  com.cq.wiki.job.EbookSnapshotJob                  :32   [32m65380559148421120 [0;39m 生成今日电子书快照开始
2021-06-30 17:59:00.013 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65380559148421120 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-06-30 17:59:00.013 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65380559148421120 [0;39m ==> Parameters: 
2021-06-30 17:59:00.013 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65380559148421120 [0;39m <==    Updates: 0
2021-06-30 17:59:00.013 INFO  com.cq.wiki.job.EbookSnapshotJob                  :35   [32m65380559148421120 [0;39m 生成今日电子书快照结束，耗时：0毫秒
2021-06-30 17:59:05.012 INFO  com.cq.wiki.job.DocJob                            :31   [32m65380580115746816 [0;39m 更新电子书下的文档数据开始
2021-06-30 17:59:05.012 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65380580115746816 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-06-30 17:59:05.012 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65380580115746816 [0;39m ==> Parameters: 
2021-06-30 17:59:05.012 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65380580115746816 [0;39m <==    Updates: 7
2021-06-30 17:59:05.012 INFO  com.cq.wiki.job.DocJob                            :34   [32m65380580115746816 [0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2021-06-30 17:59:35.009 INFO  com.cq.wiki.job.DocJob                            :31   [32m65380705932283904 [0;39m 更新电子书下的文档数据开始
2021-06-30 17:59:35.009 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65380705932283904 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-06-30 17:59:35.009 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65380705932283904 [0;39m ==> Parameters: 
2021-06-30 17:59:35.009 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65380705932283904 [0;39m <==    Updates: 7
2021-06-30 17:59:35.009 INFO  com.cq.wiki.job.DocJob                            :34   [32m65380705932283904 [0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2021-06-30 18:00:00.021 INFO  com.cq.wiki.job.EbookSnapshotJob                  :32   [32m65380810840215552 [0;39m 生成今日电子书快照开始
2021-06-30 18:00:00.021 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65380810840215552 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-06-30 18:00:00.021 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65380810840215552 [0;39m ==> Parameters: 
2021-06-30 18:00:00.021 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65380810840215552 [0;39m <==    Updates: 0
2021-06-30 18:00:00.021 INFO  com.cq.wiki.job.EbookSnapshotJob                  :35   [32m65380810840215552 [0;39m 生成今日电子书快照结束，耗时：0毫秒
2021-06-30 18:00:05.010 INFO  com.cq.wiki.job.DocJob                            :31   [32m65380831765598208 [0;39m 更新电子书下的文档数据开始
2021-06-30 18:00:05.010 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65380831765598208 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-06-30 18:00:05.010 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65380831765598208 [0;39m ==> Parameters: 
2021-06-30 18:00:05.010 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65380831765598208 [0;39m <==    Updates: 7
2021-06-30 18:00:05.010 INFO  com.cq.wiki.job.DocJob                            :34   [32m65380831765598208 [0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2021-06-30 18:00:35.013 INFO  com.cq.wiki.job.DocJob                            :31   [32m65380957607301120 [0;39m 更新电子书下的文档数据开始
2021-06-30 18:00:35.013 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65380957607301120 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-06-30 18:00:35.013 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65380957607301120 [0;39m ==> Parameters: 
2021-06-30 18:00:35.013 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65380957607301120 [0;39m <==    Updates: 7
2021-06-30 18:00:35.013 INFO  com.cq.wiki.job.DocJob                            :34   [32m65380957607301120 [0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2021-06-30 18:01:00.015 INFO  com.cq.wiki.job.EbookSnapshotJob                  :32   [32m65381062473289728 [0;39m 生成今日电子书快照开始
2021-06-30 18:01:00.017 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65381062473289728 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-06-30 18:01:00.019 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65381062473289728 [0;39m ==> Parameters: 
2021-06-30 18:01:00.024 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65381062473289728 [0;39m <==    Updates: 0
2021-06-30 18:01:00.024 INFO  com.cq.wiki.job.EbookSnapshotJob                  :35   [32m65381062473289728 [0;39m 生成今日电子书快照结束，耗时：9毫秒
2021-06-30 18:01:05.013 INFO  com.cq.wiki.job.DocJob                            :31   [32m65381083436421120 [0;39m 更新电子书下的文档数据开始
2021-06-30 18:01:05.015 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65381083436421120 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-06-30 18:01:05.015 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65381083436421120 [0;39m ==> Parameters: 
2021-06-30 18:01:05.016 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65381083436421120 [0;39m <==    Updates: 7
2021-06-30 18:01:05.017 INFO  com.cq.wiki.job.DocJob                            :34   [32m65381083436421120 [0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2021-06-30 18:01:13.436 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring DispatcherServlet 'dispatcherServlet'
2021-06-30 18:01:13.437 INFO  org.springframework.web.servlet.DispatcherServlet :525  [32m                  [0;39m Initializing Servlet 'dispatcherServlet'
2021-06-30 18:01:13.446 INFO  org.springframework.web.servlet.DispatcherServlet :547  [32m                  [0;39m Completed initialization in 9 ms
2021-06-30 18:01:13.490 INFO  com.cq.wiki.websocket.WebSocketServer             :32   [32m                  [0;39m 有新连接：token：Adhe3nQLAK，session id：0，当前连接数：1
2021-06-30 18:01:13.643 INFO  com.cq.wiki.interceptor.LoginInterceptor          :33   [32m                  [0;39m ------------- LoginInterceptor 开始 -------------
2021-06-30 18:01:13.643 INFO  com.cq.wiki.interceptor.LoginInterceptor          :33   [32m                  [0;39m ------------- LoginInterceptor 开始 -------------
2021-06-30 18:01:13.643 INFO  com.cq.wiki.interceptor.LoginInterceptor          :38   [32m                  [0;39m 从请求头里获取token：null
2021-06-30 18:01:13.643 INFO  com.cq.wiki.interceptor.LoginInterceptor          :38   [32m                  [0;39m 从请求头里获取token：null
2021-06-30 18:01:13.649 WARN  com.cq.wiki.controller.ControllerExceptionHandler :44   [32m                  [0;39m 业务异常：无令牌，请重新登录
2021-06-30 18:01:13.649 WARN  com.cq.wiki.controller.ControllerExceptionHandler :44   [32m                  [0;39m 业务异常：无令牌，请重新登录
2021-06-30 18:01:13.658 INFO  com.cq.wiki.aspect.LogAspect                      :52   [32m65381119691984896 [0;39m ------------- 开始 -------------
2021-06-30 18:01:13.659 INFO  com.cq.wiki.aspect.LogAspect                      :53   [32m65381119691984896 [0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2021-06-30 18:01:13.659 INFO  com.cq.wiki.aspect.LogAspect                      :54   [32m65381119691984896 [0;39m 类名方法: com.cq.wiki.controller.CategoryController.allBook
2021-06-30 18:01:13.659 INFO  com.cq.wiki.aspect.LogAspect                      :55   [32m65381119691984896 [0;39m 远程地址: 127.0.0.1
2021-06-30 18:01:13.680 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver   :199  [32m                  [0;39m Resolved [com.cq.wiki.exception.BusinessException: 无令牌，请重新登录]
2021-06-30 18:01:13.680 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver   :199  [32m                  [0;39m Resolved [com.cq.wiki.exception.BusinessException: 无令牌，请重新登录]
2021-06-30 18:01:13.698 INFO  com.cq.wiki.aspect.LogAspect                      :77   [32m65381119691984896 [0;39m 请求参数: []
2021-06-30 18:01:13.717 DEBUG com.cq.wiki.mapper.CategoryMapper.selectByExample :137  [32m65381119691984896 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-06-30 18:01:13.718 DEBUG com.cq.wiki.mapper.CategoryMapper.selectByExample :137  [32m65381119691984896 [0;39m ==> Parameters: 
2021-06-30 18:01:13.737 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65381119691984896 [0;39m <==    Columns: id, parent, name, sort
2021-06-30 18:01:13.738 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65381119691984896 [0;39m <==        Row: 100, 0, 前端开发, 100
2021-06-30 18:01:13.740 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65381119691984896 [0;39m <==        Row: 101, 100, Vue, 101
2021-06-30 18:01:13.740 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65381119691984896 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-06-30 18:01:13.740 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65381119691984896 [0;39m <==        Row: 200, 0, Java, 200
2021-06-30 18:01:13.740 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65381119691984896 [0;39m <==        Row: 201, 200, 基础应用, 201
2021-06-30 18:01:13.741 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65381119691984896 [0;39m <==        Row: 202, 200, 框架开发, 202
2021-06-30 18:01:13.741 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65381119691984896 [0;39m <==        Row: 300, 0, Python, 300
2021-06-30 18:01:13.741 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65381119691984896 [0;39m <==        Row: 301, 300, 基础应用, 301
2021-06-30 18:01:13.742 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65381119691984896 [0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-06-30 18:01:13.742 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65381119691984896 [0;39m <==        Row: 400, 0, 数据库, 400
2021-06-30 18:01:13.742 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65381119691984896 [0;39m <==        Row: 401, 400, MySQL, 401
2021-06-30 18:01:13.742 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65381119691984896 [0;39m <==        Row: 402, 400, Oracle, 402
2021-06-30 18:01:13.743 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65381119691984896 [0;39m <==        Row: 500, 0, 其他, 500
2021-06-30 18:01:13.743 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65381119691984896 [0;39m <==        Row: 501, 500, 服务器, 501
2021-06-30 18:01:13.743 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65381119691984896 [0;39m <==        Row: 502, 500, 开发工具, 502
2021-06-30 18:01:13.744 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65381119691984896 [0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-06-30 18:01:13.745 DEBUG com.cq.wiki.mapper.CategoryMapper.selectByExample :137  [32m65381119691984896 [0;39m <==      Total: 16
2021-06-30 18:01:13.769 INFO  com.cq.wiki.aspect.LogAspect                      :89   [32m65381119691984896 [0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架开发","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":402,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-06-30 18:01:13.770 INFO  com.cq.wiki.aspect.LogAspect                      :90   [32m65381119691984896 [0;39m ------------- 结束 耗时：114 ms -------------
2021-06-30 18:01:35.001 INFO  com.cq.wiki.job.DocJob                            :31   [32m65381209215209472 [0;39m 更新电子书下的文档数据开始
2021-06-30 18:01:35.001 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65381209215209472 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-06-30 18:01:35.001 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65381209215209472 [0;39m ==> Parameters: 
2021-06-30 18:01:35.001 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65381209215209472 [0;39m <==    Updates: 7
2021-06-30 18:01:35.001 INFO  com.cq.wiki.job.DocJob                            :34   [32m65381209215209472 [0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2021-06-30 18:02:00.014 INFO  com.cq.wiki.job.EbookSnapshotJob                  :32   [32m65381314127335424 [0;39m 生成今日电子书快照开始
2021-06-30 18:02:00.014 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65381314127335424 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-06-30 18:02:00.014 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65381314127335424 [0;39m ==> Parameters: 
2021-06-30 18:02:00.014 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65381314127335424 [0;39m <==    Updates: 0
2021-06-30 18:02:00.014 INFO  com.cq.wiki.job.EbookSnapshotJob                  :35   [32m65381314127335424 [0;39m 生成今日电子书快照结束，耗时：0毫秒
2021-06-30 18:02:05.008 INFO  com.cq.wiki.job.DocJob                            :31   [32m65381335073689600 [0;39m 更新电子书下的文档数据开始
2021-06-30 18:02:05.008 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65381335073689600 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-06-30 18:02:05.008 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65381335073689600 [0;39m ==> Parameters: 
2021-06-30 18:02:05.008 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65381335073689600 [0;39m <==    Updates: 7
2021-06-30 18:02:05.008 INFO  com.cq.wiki.job.DocJob                            :34   [32m65381335073689600 [0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2021-06-30 18:02:07.324 INFO  com.cq.wiki.interceptor.LoginInterceptor          :33   [32m                  [0;39m ------------- LoginInterceptor 开始 -------------
2021-06-30 18:02:07.324 INFO  com.cq.wiki.interceptor.LoginInterceptor          :38   [32m                  [0;39m 从请求头里获取token：null
2021-06-30 18:02:07.324 INFO  com.cq.wiki.interceptor.LoginInterceptor          :33   [32m                  [0;39m ------------- LoginInterceptor 开始 -------------
2021-06-30 18:02:07.324 INFO  com.cq.wiki.aspect.LogAspect                      :52   [32m65381344787697664 [0;39m ------------- 开始 -------------
2021-06-30 18:02:07.324 INFO  com.cq.wiki.interceptor.LoginInterceptor          :38   [32m                  [0;39m 从请求头里获取token：null
2021-06-30 18:02:07.324 INFO  com.cq.wiki.aspect.LogAspect                      :53   [32m65381344787697664 [0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2021-06-30 18:02:07.324 WARN  com.cq.wiki.controller.ControllerExceptionHandler :44   [32m                  [0;39m 业务异常：无令牌，请重新登录
2021-06-30 18:02:07.324 INFO  com.cq.wiki.aspect.LogAspect                      :54   [32m65381344787697664 [0;39m 类名方法: com.cq.wiki.controller.CategoryController.allBook
2021-06-30 18:02:07.324 WARN  com.cq.wiki.controller.ControllerExceptionHandler :44   [32m                  [0;39m 业务异常：无令牌，请重新登录
2021-06-30 18:02:07.324 INFO  com.cq.wiki.aspect.LogAspect                      :55   [32m65381344787697664 [0;39m 远程地址: 127.0.0.1
2021-06-30 18:02:07.324 INFO  com.cq.wiki.aspect.LogAspect                      :77   [32m65381344787697664 [0;39m 请求参数: []
2021-06-30 18:02:07.324 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver   :199  [32m                  [0;39m Resolved [com.cq.wiki.exception.BusinessException: 无令牌，请重新登录]
2021-06-30 18:02:07.324 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver   :199  [32m                  [0;39m Resolved [com.cq.wiki.exception.BusinessException: 无令牌，请重新登录]
2021-06-30 18:02:07.324 DEBUG com.cq.wiki.mapper.CategoryMapper.selectByExample :137  [32m65381344787697664 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-06-30 18:02:07.324 DEBUG com.cq.wiki.mapper.CategoryMapper.selectByExample :137  [32m65381344787697664 [0;39m ==> Parameters: 
2021-06-30 18:02:07.324 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65381344787697664 [0;39m <==    Columns: id, parent, name, sort
2021-06-30 18:02:07.324 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65381344787697664 [0;39m <==        Row: 100, 0, 前端开发, 100
2021-06-30 18:02:07.324 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65381344787697664 [0;39m <==        Row: 101, 100, Vue, 101
2021-06-30 18:02:07.324 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65381344787697664 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-06-30 18:02:07.324 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65381344787697664 [0;39m <==        Row: 200, 0, Java, 200
2021-06-30 18:02:07.324 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65381344787697664 [0;39m <==        Row: 201, 200, 基础应用, 201
2021-06-30 18:02:07.324 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65381344787697664 [0;39m <==        Row: 202, 200, 框架开发, 202
2021-06-30 18:02:07.324 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65381344787697664 [0;39m <==        Row: 300, 0, Python, 300
2021-06-30 18:02:07.324 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65381344787697664 [0;39m <==        Row: 301, 300, 基础应用, 301
2021-06-30 18:02:07.324 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65381344787697664 [0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-06-30 18:02:07.324 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65381344787697664 [0;39m <==        Row: 400, 0, 数据库, 400
2021-06-30 18:02:07.324 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65381344787697664 [0;39m <==        Row: 401, 400, MySQL, 401
2021-06-30 18:02:07.324 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65381344787697664 [0;39m <==        Row: 402, 400, Oracle, 402
2021-06-30 18:02:07.324 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65381344787697664 [0;39m <==        Row: 500, 0, 其他, 500
2021-06-30 18:02:07.324 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65381344787697664 [0;39m <==        Row: 501, 500, 服务器, 501
2021-06-30 18:02:07.324 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65381344787697664 [0;39m <==        Row: 502, 500, 开发工具, 502
2021-06-30 18:02:07.324 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65381344787697664 [0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-06-30 18:02:07.324 DEBUG com.cq.wiki.mapper.CategoryMapper.selectByExample :137  [32m65381344787697664 [0;39m <==      Total: 16
2021-06-30 18:02:07.324 INFO  com.cq.wiki.aspect.LogAspect                      :89   [32m65381344787697664 [0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架开发","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":402,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-06-30 18:02:07.324 INFO  com.cq.wiki.aspect.LogAspect                      :90   [32m65381344787697664 [0;39m ------------- 结束 耗时：0 ms -------------
2021-06-30 18:02:35.019 INFO  com.cq.wiki.job.DocJob                            :31   [32m65381460948946944 [0;39m 更新电子书下的文档数据开始
2021-06-30 18:02:35.019 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65381460948946944 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-06-30 18:02:35.019 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65381460948946944 [0;39m ==> Parameters: 
2021-06-30 18:02:35.019 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65381460948946944 [0;39m <==    Updates: 7
2021-06-30 18:02:35.019 INFO  com.cq.wiki.job.DocJob                            :34   [32m65381460948946944 [0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2021-06-30 18:03:00.016 INFO  com.cq.wiki.job.EbookSnapshotJob                  :32   [32m65381565793964032 [0;39m 生成今日电子书快照开始
2021-06-30 18:03:00.016 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65381565793964032 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-06-30 18:03:00.016 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65381565793964032 [0;39m ==> Parameters: 
2021-06-30 18:03:00.016 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65381565793964032 [0;39m <==    Updates: 0
2021-06-30 18:03:00.016 INFO  com.cq.wiki.job.EbookSnapshotJob                  :35   [32m65381565793964032 [0;39m 生成今日电子书快照结束，耗时：0毫秒
2021-06-30 18:03:02.419 INFO  com.cq.wiki.interceptor.LoginInterceptor          :33   [32m                  [0;39m ------------- LoginInterceptor 开始 -------------
2021-06-30 18:03:02.419 INFO  com.cq.wiki.interceptor.LoginInterceptor          :33   [32m                  [0;39m ------------- LoginInterceptor 开始 -------------
2021-06-30 18:03:02.419 INFO  com.cq.wiki.interceptor.LoginInterceptor          :38   [32m                  [0;39m 从请求头里获取token：null
2021-06-30 18:03:02.419 INFO  com.cq.wiki.interceptor.LoginInterceptor          :38   [32m                  [0;39m 从请求头里获取token：null
2021-06-30 18:03:02.419 WARN  com.cq.wiki.controller.ControllerExceptionHandler :44   [32m                  [0;39m 业务异常：无令牌，请重新登录
2021-06-30 18:03:02.419 WARN  com.cq.wiki.controller.ControllerExceptionHandler :44   [32m                  [0;39m 业务异常：无令牌，请重新登录
2021-06-30 18:03:02.419 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver   :199  [32m                  [0;39m Resolved [com.cq.wiki.exception.BusinessException: 无令牌，请重新登录]
2021-06-30 18:03:02.419 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver   :199  [32m                  [0;39m Resolved [com.cq.wiki.exception.BusinessException: 无令牌，请重新登录]
2021-06-30 18:03:05.007 INFO  com.cq.wiki.job.DocJob                            :31   [32m65381586727735296 [0;39m 更新电子书下的文档数据开始
2021-06-30 18:03:05.008 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65381586727735296 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-06-30 18:03:05.009 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65381586727735296 [0;39m ==> Parameters: 
2021-06-30 18:03:05.010 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65381586727735296 [0;39m <==    Updates: 7
2021-06-30 18:03:05.010 INFO  com.cq.wiki.job.DocJob                            :34   [32m65381586727735296 [0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2021-06-30 18:03:05.413 INFO  com.cq.wiki.websocket.WebSocketServer             :41   [32m                  [0;39m 连接关闭，token：Adhe3nQLAK，session id：0！当前连接数：0
2021-06-30 18:03:06.189 INFO  com.cq.wiki.websocket.WebSocketServer             :32   [32m                  [0;39m 有新连接：token：APftAfGqD7，session id：1，当前连接数：1
2021-06-30 18:03:06.308 INFO  com.cq.wiki.interceptor.LoginInterceptor          :33   [32m                  [0;39m ------------- LoginInterceptor 开始 -------------
2021-06-30 18:03:06.309 INFO  com.cq.wiki.aspect.LogAspect                      :52   [32m65381592188719104 [0;39m ------------- 开始 -------------
2021-06-30 18:03:06.309 INFO  com.cq.wiki.interceptor.LoginInterceptor          :38   [32m                  [0;39m 从请求头里获取token：null
2021-06-30 18:03:06.309 INFO  com.cq.wiki.interceptor.LoginInterceptor          :33   [32m                  [0;39m ------------- LoginInterceptor 开始 -------------
2021-06-30 18:03:06.309 INFO  com.cq.wiki.aspect.LogAspect                      :53   [32m65381592188719104 [0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2021-06-30 18:03:06.309 INFO  com.cq.wiki.interceptor.LoginInterceptor          :38   [32m                  [0;39m 从请求头里获取token：null
2021-06-30 18:03:06.309 WARN  com.cq.wiki.controller.ControllerExceptionHandler :44   [32m                  [0;39m 业务异常：无令牌，请重新登录
2021-06-30 18:03:06.309 INFO  com.cq.wiki.aspect.LogAspect                      :54   [32m65381592188719104 [0;39m 类名方法: com.cq.wiki.controller.CategoryController.allBook
2021-06-30 18:03:06.309 WARN  com.cq.wiki.controller.ControllerExceptionHandler :44   [32m                  [0;39m 业务异常：无令牌，请重新登录
2021-06-30 18:03:06.309 INFO  com.cq.wiki.aspect.LogAspect                      :55   [32m65381592188719104 [0;39m 远程地址: 127.0.0.1
2021-06-30 18:03:06.309 INFO  com.cq.wiki.aspect.LogAspect                      :77   [32m65381592188719104 [0;39m 请求参数: []
2021-06-30 18:03:06.310 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver   :199  [32m                  [0;39m Resolved [com.cq.wiki.exception.BusinessException: 无令牌，请重新登录]
2021-06-30 18:03:06.310 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver   :199  [32m                  [0;39m Resolved [com.cq.wiki.exception.BusinessException: 无令牌，请重新登录]
2021-06-30 18:03:06.310 DEBUG com.cq.wiki.mapper.CategoryMapper.selectByExample :137  [32m65381592188719104 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-06-30 18:03:06.311 DEBUG com.cq.wiki.mapper.CategoryMapper.selectByExample :137  [32m65381592188719104 [0;39m ==> Parameters: 
2021-06-30 18:03:06.312 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65381592188719104 [0;39m <==    Columns: id, parent, name, sort
2021-06-30 18:03:06.313 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65381592188719104 [0;39m <==        Row: 100, 0, 前端开发, 100
2021-06-30 18:03:06.313 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65381592188719104 [0;39m <==        Row: 101, 100, Vue, 101
2021-06-30 18:03:06.313 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65381592188719104 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-06-30 18:03:06.314 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65381592188719104 [0;39m <==        Row: 200, 0, Java, 200
2021-06-30 18:03:06.314 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65381592188719104 [0;39m <==        Row: 201, 200, 基础应用, 201
2021-06-30 18:03:06.315 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65381592188719104 [0;39m <==        Row: 202, 200, 框架开发, 202
2021-06-30 18:03:06.315 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65381592188719104 [0;39m <==        Row: 300, 0, Python, 300
2021-06-30 18:03:06.315 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65381592188719104 [0;39m <==        Row: 301, 300, 基础应用, 301
2021-06-30 18:03:06.315 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65381592188719104 [0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-06-30 18:03:06.315 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65381592188719104 [0;39m <==        Row: 400, 0, 数据库, 400
2021-06-30 18:03:06.316 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65381592188719104 [0;39m <==        Row: 401, 400, MySQL, 401
2021-06-30 18:03:06.316 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65381592188719104 [0;39m <==        Row: 402, 400, Oracle, 402
2021-06-30 18:03:06.316 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65381592188719104 [0;39m <==        Row: 500, 0, 其他, 500
2021-06-30 18:03:06.316 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65381592188719104 [0;39m <==        Row: 501, 500, 服务器, 501
2021-06-30 18:03:06.316 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65381592188719104 [0;39m <==        Row: 502, 500, 开发工具, 502
2021-06-30 18:03:06.317 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65381592188719104 [0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-06-30 18:03:06.317 DEBUG com.cq.wiki.mapper.CategoryMapper.selectByExample :137  [32m65381592188719104 [0;39m <==      Total: 16
2021-06-30 18:03:06.318 INFO  com.cq.wiki.aspect.LogAspect                      :89   [32m65381592188719104 [0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架开发","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":402,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-06-30 18:03:06.318 INFO  com.cq.wiki.aspect.LogAspect                      :90   [32m65381592188719104 [0;39m ------------- 结束 耗时：9 ms -------------
2021-06-30 18:03:09.541 INFO  com.cq.wiki.aspect.LogAspect                      :52   [32m65381605744709632 [0;39m ------------- 开始 -------------
2021-06-30 18:03:09.542 INFO  com.cq.wiki.aspect.LogAspect                      :53   [32m65381605744709632 [0;39m 请求地址: http://127.0.0.1:8880/user/login POST
2021-06-30 18:03:09.542 INFO  com.cq.wiki.aspect.LogAspect                      :54   [32m65381605744709632 [0;39m 类名方法: com.cq.wiki.controller.UserController.login
2021-06-30 18:03:09.542 INFO  com.cq.wiki.aspect.LogAspect                      :55   [32m65381605744709632 [0;39m 远程地址: 127.0.0.1
2021-06-30 18:03:09.544 INFO  com.cq.wiki.aspect.LogAspect                      :77   [32m65381605744709632 [0;39m 请求参数: [{"loginName":"test"}]
2021-06-30 18:03:09.554 DEBUG com.cq.wiki.mapper.UserMapper.selectByExample     :137  [32m65381605744709632 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user WHERE ( login_name = ? )
2021-06-30 18:03:09.555 DEBUG com.cq.wiki.mapper.UserMapper.selectByExample     :137  [32m65381605744709632 [0;39m ==> Parameters: test(String)
2021-06-30 18:03:09.560 TRACE com.cq.wiki.mapper.UserMapper.selectByExample     :143  [32m65381605744709632 [0;39m <==    Columns: id, login_name, name, password
2021-06-30 18:03:09.560 TRACE com.cq.wiki.mapper.UserMapper.selectByExample     :143  [32m65381605744709632 [0;39m <==        Row: 6290961574199, test, 测试, e70e2222a9d67c4f2eae107533359aa4
2021-06-30 18:03:09.561 DEBUG com.cq.wiki.mapper.UserMapper.selectByExample     :137  [32m65381605744709632 [0;39m <==      Total: 1
2021-06-30 18:03:09.566 INFO  com.cq.wiki.util.TokenUtil                        :24   [32m65381605744709632 [0;39m 当前时间的时间戳1625047389566
2021-06-30 18:03:09.566 INFO  com.cq.wiki.util.TokenUtil                        :27   [32m65381605744709632 [0;39m 过期时间戳为：1625133789566
2021-06-30 18:03:09.594 DEBUG com.cq.wiki.mapper.TokenMapper.insert             :137  [32m65381605744709632 [0;39m ==>  Preparing: insert into token (id, token) values (?, ?)
2021-06-30 18:03:09.594 DEBUG com.cq.wiki.mapper.TokenMapper.insert             :137  [32m65381605744709632 [0;39m ==> Parameters: 65381605962813440(Long), eyJhbGciOiJIUzI1NiJ9.eyJsb2dpbk5hbWUiOiJ0ZXN0IiwibmFtZSI6Iua1i-ivlSIsImlkIjo2MjkwOTYxNTc0MTk5LCJleHAiOjE2MjUxMzM3ODksImlhdCI6MTYyNTA0NzM4OX0.ZhdYt_Ztr3qH1be8qR_ZdNwrsq6f6TxjwBhcQNk_iRA(String)
2021-06-30 18:03:09.599 DEBUG com.cq.wiki.mapper.TokenMapper.insert             :137  [32m65381605744709632 [0;39m <==    Updates: 1
2021-06-30 18:03:09.600 INFO  com.cq.wiki.service.UserService                   :66   [32m65381605744709632 [0;39m token为：eyJhbGciOiJIUzI1NiJ9.eyJsb2dpbk5hbWUiOiJ0ZXN0IiwibmFtZSI6Iua1i-ivlSIsImlkIjo2MjkwOTYxNTc0MTk5LCJleHAiOjE2MjUxMzM3ODksImlhdCI6MTYyNTA0NzM4OX0.ZhdYt_Ztr3qH1be8qR_ZdNwrsq6f6TxjwBhcQNk_iRA
2021-06-30 18:03:09.602 INFO  com.cq.wiki.aspect.LogAspect                      :89   [32m65381605744709632 [0;39m 返回结果: {"content":{"id":6290961574199,"loginName":"test","name":"测试","token":"eyJhbGciOiJIUzI1NiJ9.eyJsb2dpbk5hbWUiOiJ0ZXN0IiwibmFtZSI6Iua1i-ivlSIsImlkIjo2MjkwOTYxNTc0MTk5LCJleHAiOjE2MjUxMzM3ODksImlhdCI6MTYyNTA0NzM4OX0.ZhdYt_Ztr3qH1be8qR_ZdNwrsq6f6TxjwBhcQNk_iRA"},"success":true}
2021-06-30 18:03:09.602 INFO  com.cq.wiki.aspect.LogAspect                      :90   [32m65381605744709632 [0;39m ------------- 结束 耗时：61 ms -------------
2021-06-30 18:03:17.467 INFO  com.cq.wiki.interceptor.LoginInterceptor          :33   [32m65381344787697664 [0;39m ------------- LoginInterceptor 开始 -------------
2021-06-30 18:03:17.467 INFO  com.cq.wiki.interceptor.LoginInterceptor          :38   [32m65381344787697664 [0;39m 从请求头里获取token：null
2021-06-30 18:03:17.467 INFO  com.cq.wiki.interceptor.LoginInterceptor          :41   [32m65381344787697664 [0;39m 未映射到方法，跳过token验证
2021-06-30 18:03:17.468 INFO  com.cq.wiki.interceptor.LoginInterceptor          :73   [32m65381344787697664 [0;39m ------------- LoginInterceptor 结束 耗时：1 ms -------------
2021-06-30 18:03:17.482 INFO  com.cq.wiki.interceptor.LoginInterceptor          :33   [32m                  [0;39m ------------- LoginInterceptor 开始 -------------
2021-06-30 18:03:17.482 INFO  com.cq.wiki.interceptor.LoginInterceptor          :38   [32m                  [0;39m 从请求头里获取token：eyJhbGciOiJIUzI1NiJ9.eyJsb2dpbk5hbWUiOiJ0ZXN0IiwibmFtZSI6Iua1i-ivlSIsImlkIjo2MjkwOTYxNTc0MTk5LCJleHAiOjE2MjUxMzM3ODksImlhdCI6MTYyNTA0NzM4OX0.ZhdYt_Ztr3qH1be8qR_ZdNwrsq6f6TxjwBhcQNk_iRA
2021-06-30 18:03:17.499 INFO  com.cq.wiki.interceptor.LoginInterceptor          :60   [32m                  [0;39m token：eyJhbGciOiJIUzI1NiJ9.eyJsb2dpbk5hbWUiOiJ0ZXN0IiwibmFtZSI6Iua1i-ivlSIsImlkIjo2MjkwOTYxNTc0MTk5LCJleHAiOjE2MjUxMzM3ODksImlhdCI6MTYyNTA0NzM4OX0.ZhdYt_Ztr3qH1be8qR_ZdNwrsq6f6TxjwBhcQNk_iRA验证通过
2021-06-30 18:03:17.514 INFO  com.cq.wiki.aspect.LogAspect                      :52   [32m65381639185895424 [0;39m ------------- 开始 -------------
2021-06-30 18:03:17.515 INFO  com.cq.wiki.aspect.LogAspect                      :53   [32m65381639185895424 [0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2021-06-30 18:03:17.515 INFO  com.cq.wiki.aspect.LogAspect                      :54   [32m65381639185895424 [0;39m 类名方法: com.cq.wiki.controller.EbookController.list
2021-06-30 18:03:17.515 INFO  com.cq.wiki.aspect.LogAspect                      :55   [32m65381639185895424 [0;39m 远程地址: 127.0.0.1
2021-06-30 18:03:17.516 INFO  com.cq.wiki.aspect.LogAspect                      :77   [32m65381639185895424 [0;39m 请求参数: [{"categoryId2":101,"page":1,"size":1000}]
2021-06-30 18:03:17.541 DEBUG c.cq.wiki.mapper.EbookMapper.selectByExample_COUNT:137  [32m65381639185895424 [0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-06-30 18:03:17.541 DEBUG c.cq.wiki.mapper.EbookMapper.selectByExample_COUNT:137  [32m65381639185895424 [0;39m ==> Parameters: 101(Long)
2021-06-30 18:03:17.542 TRACE c.cq.wiki.mapper.EbookMapper.selectByExample_COUNT:143  [32m65381639185895424 [0;39m <==    Columns: count(0)
2021-06-30 18:03:17.543 TRACE c.cq.wiki.mapper.EbookMapper.selectByExample_COUNT:143  [32m65381639185895424 [0;39m <==        Row: 1
2021-06-30 18:03:17.543 DEBUG c.cq.wiki.mapper.EbookMapper.selectByExample_COUNT:137  [32m65381639185895424 [0;39m <==      Total: 1
2021-06-30 18:03:17.545 DEBUG com.cq.wiki.mapper.EbookMapper.selectByExample    :137  [32m65381639185895424 [0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2021-06-30 18:03:17.546 DEBUG com.cq.wiki.mapper.EbookMapper.selectByExample    :137  [32m65381639185895424 [0;39m ==> Parameters: 101(Long), 1000(Integer)
2021-06-30 18:03:17.547 TRACE com.cq.wiki.mapper.EbookMapper.selectByExample    :143  [32m65381639185895424 [0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2021-06-30 18:03:17.547 TRACE com.cq.wiki.mapper.EbookMapper.selectByExample    :143  [32m65381639185895424 [0;39m <==        Row: 2, Vue 入门教程, 100, 101, 零基础入门Vue开发，企业级应用开发最佳首选框架, /image/cover2.png, 1, 0, 0
2021-06-30 18:03:17.548 DEBUG com.cq.wiki.mapper.EbookMapper.selectByExample    :137  [32m65381639185895424 [0;39m <==      Total: 1
2021-06-30 18:03:17.549 INFO  com.cq.wiki.service.EbookService                  :46   [32m65381639185895424 [0;39m 总行数：1
2021-06-30 18:03:17.549 INFO  com.cq.wiki.service.EbookService                  :47   [32m65381639185895424 [0;39m 总页数：1
2021-06-30 18:03:17.556 INFO  com.cq.wiki.aspect.LogAspect                      :89   [32m65381639185895424 [0;39m 返回结果: {"content":{"list":[{"category1Id":100,"category2Id":101,"cover":"/image/cover2.png","description":"零基础入门Vue开发，企业级应用开发最佳首选框架","docCount":1,"id":2,"name":"Vue 入门教程","viewCount":0,"voteCount":0}],"total":1},"success":true}
2021-06-30 18:03:17.556 INFO  com.cq.wiki.aspect.LogAspect                      :90   [32m65381639185895424 [0;39m ------------- 结束 耗时：42 ms -------------
2021-06-30 18:03:17.559 INFO  com.cq.wiki.interceptor.LoginInterceptor          :73   [32m65381639185895424 [0;39m ------------- LoginInterceptor 结束 耗时：77 ms -------------
2021-06-30 18:03:17.962 INFO  com.cq.wiki.interceptor.LoginInterceptor          :33   [32m                  [0;39m ------------- LoginInterceptor 开始 -------------
2021-06-30 18:03:17.962 INFO  com.cq.wiki.interceptor.LoginInterceptor          :38   [32m                  [0;39m 从请求头里获取token：null
2021-06-30 18:03:17.962 INFO  com.cq.wiki.interceptor.LoginInterceptor          :41   [32m                  [0;39m 未映射到方法，跳过token验证
2021-06-30 18:03:17.963 INFO  com.cq.wiki.interceptor.LoginInterceptor          :73   [32m                  [0;39m ------------- LoginInterceptor 结束 耗时：1 ms -------------
2021-06-30 18:03:17.979 INFO  com.cq.wiki.interceptor.LoginInterceptor          :33   [32m                  [0;39m ------------- LoginInterceptor 开始 -------------
2021-06-30 18:03:17.979 INFO  com.cq.wiki.interceptor.LoginInterceptor          :38   [32m                  [0;39m 从请求头里获取token：eyJhbGciOiJIUzI1NiJ9.eyJsb2dpbk5hbWUiOiJ0ZXN0IiwibmFtZSI6Iua1i-ivlSIsImlkIjo2MjkwOTYxNTc0MTk5LCJleHAiOjE2MjUxMzM3ODksImlhdCI6MTYyNTA0NzM4OX0.ZhdYt_Ztr3qH1be8qR_ZdNwrsq6f6TxjwBhcQNk_iRA
2021-06-30 18:03:17.980 INFO  com.cq.wiki.interceptor.LoginInterceptor          :60   [32m                  [0;39m token：eyJhbGciOiJIUzI1NiJ9.eyJsb2dpbk5hbWUiOiJ0ZXN0IiwibmFtZSI6Iua1i-ivlSIsImlkIjo2MjkwOTYxNTc0MTk5LCJleHAiOjE2MjUxMzM3ODksImlhdCI6MTYyNTA0NzM4OX0.ZhdYt_Ztr3qH1be8qR_ZdNwrsq6f6TxjwBhcQNk_iRA验证通过
2021-06-30 18:03:17.980 INFO  com.cq.wiki.aspect.LogAspect                      :52   [32m65381641140441088 [0;39m ------------- 开始 -------------
2021-06-30 18:03:17.981 INFO  com.cq.wiki.aspect.LogAspect                      :53   [32m65381641140441088 [0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2021-06-30 18:03:17.981 INFO  com.cq.wiki.aspect.LogAspect                      :54   [32m65381641140441088 [0;39m 类名方法: com.cq.wiki.controller.EbookController.list
2021-06-30 18:03:17.981 INFO  com.cq.wiki.aspect.LogAspect                      :55   [32m65381641140441088 [0;39m 远程地址: 127.0.0.1
2021-06-30 18:03:17.981 INFO  com.cq.wiki.aspect.LogAspect                      :77   [32m65381641140441088 [0;39m 请求参数: [{"categoryId2":102,"page":1,"size":1000}]
2021-06-30 18:03:17.982 DEBUG c.cq.wiki.mapper.EbookMapper.selectByExample_COUNT:137  [32m65381641140441088 [0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-06-30 18:03:17.983 DEBUG c.cq.wiki.mapper.EbookMapper.selectByExample_COUNT:137  [32m65381641140441088 [0;39m ==> Parameters: 102(Long)
2021-06-30 18:03:17.984 TRACE c.cq.wiki.mapper.EbookMapper.selectByExample_COUNT:143  [32m65381641140441088 [0;39m <==    Columns: count(0)
2021-06-30 18:03:17.984 TRACE c.cq.wiki.mapper.EbookMapper.selectByExample_COUNT:143  [32m65381641140441088 [0;39m <==        Row: 1
2021-06-30 18:03:17.984 DEBUG c.cq.wiki.mapper.EbookMapper.selectByExample_COUNT:137  [32m65381641140441088 [0;39m <==      Total: 1
2021-06-30 18:03:17.985 DEBUG com.cq.wiki.mapper.EbookMapper.selectByExample    :137  [32m65381641140441088 [0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2021-06-30 18:03:17.985 DEBUG com.cq.wiki.mapper.EbookMapper.selectByExample    :137  [32m65381641140441088 [0;39m ==> Parameters: 102(Long), 1000(Integer)
2021-06-30 18:03:17.986 TRACE com.cq.wiki.mapper.EbookMapper.selectByExample    :143  [32m65381641140441088 [0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2021-06-30 18:03:17.986 TRACE com.cq.wiki.mapper.EbookMapper.selectByExample    :143  [32m65381641140441088 [0;39m <==        Row: 6065395476948, CSS入门教程, 100, 102, CSS从开发到入土, /image/cover2.png, 1, 1, 4
2021-06-30 18:03:17.987 DEBUG com.cq.wiki.mapper.EbookMapper.selectByExample    :137  [32m65381641140441088 [0;39m <==      Total: 1
2021-06-30 18:03:17.987 INFO  com.cq.wiki.service.EbookService                  :46   [32m65381641140441088 [0;39m 总行数：1
2021-06-30 18:03:17.987 INFO  com.cq.wiki.service.EbookService                  :47   [32m65381641140441088 [0;39m 总页数：1
2021-06-30 18:03:17.987 INFO  com.cq.wiki.aspect.LogAspect                      :89   [32m65381641140441088 [0;39m 返回结果: {"content":{"list":[{"category1Id":100,"category2Id":102,"cover":"/image/cover2.png","description":"CSS从开发到入土","docCount":1,"id":6065395476948,"name":"CSS入门教程","viewCount":1,"voteCount":4}],"total":1},"success":true}
2021-06-30 18:03:17.988 INFO  com.cq.wiki.aspect.LogAspect                      :90   [32m65381641140441088 [0;39m ------------- 结束 耗时：8 ms -------------
2021-06-30 18:03:17.988 INFO  com.cq.wiki.interceptor.LoginInterceptor          :73   [32m65381641140441088 [0;39m ------------- LoginInterceptor 结束 耗时：9 ms -------------
2021-06-30 18:03:35.004 INFO  com.cq.wiki.job.DocJob                            :31   [32m65381712544272384 [0;39m 更新电子书下的文档数据开始
2021-06-30 18:03:35.005 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65381712544272384 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-06-30 18:03:35.005 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65381712544272384 [0;39m ==> Parameters: 
2021-06-30 18:03:35.006 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65381712544272384 [0;39m <==    Updates: 7
2021-06-30 18:03:35.006 INFO  com.cq.wiki.job.DocJob                            :34   [32m65381712544272384 [0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2021-06-30 18:04:00.015 INFO  com.cq.wiki.job.EbookSnapshotJob                  :32   [32m65381817448009728 [0;39m 生成今日电子书快照开始
2021-06-30 18:04:00.015 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65381817448009728 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-06-30 18:04:00.015 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65381817448009728 [0;39m ==> Parameters: 
2021-06-30 18:04:00.015 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65381817448009728 [0;39m <==    Updates: 0
2021-06-30 18:04:00.015 INFO  com.cq.wiki.job.EbookSnapshotJob                  :35   [32m65381817448009728 [0;39m 生成今日电子书快照结束，耗时：0毫秒
2021-06-30 18:04:05.006 INFO  com.cq.wiki.job.DocJob                            :31   [32m65381838381780992 [0;39m 更新电子书下的文档数据开始
2021-06-30 18:04:05.006 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65381838381780992 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-06-30 18:04:05.006 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65381838381780992 [0;39m ==> Parameters: 
2021-06-30 18:04:05.006 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65381838381780992 [0;39m <==    Updates: 7
2021-06-30 18:04:05.006 INFO  com.cq.wiki.job.DocJob                            :34   [32m65381838381780992 [0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2021-06-30 18:04:35.014 INFO  com.cq.wiki.job.DocJob                            :31   [32m65381964244455424 [0;39m 更新电子书下的文档数据开始
2021-06-30 18:04:35.014 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65381964244455424 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-06-30 18:04:35.014 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65381964244455424 [0;39m ==> Parameters: 
2021-06-30 18:04:35.014 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65381964244455424 [0;39m <==    Updates: 7
2021-06-30 18:04:35.014 INFO  com.cq.wiki.job.DocJob                            :34   [32m65381964244455424 [0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2021-06-30 18:05:00.009 INFO  com.cq.wiki.job.EbookSnapshotJob                  :32   [32m65382069081083904 [0;39m 生成今日电子书快照开始
2021-06-30 18:05:00.009 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65382069081083904 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-06-30 18:05:00.009 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65382069081083904 [0;39m ==> Parameters: 
2021-06-30 18:05:00.009 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65382069081083904 [0;39m <==    Updates: 0
2021-06-30 18:05:00.009 INFO  com.cq.wiki.job.EbookSnapshotJob                  :35   [32m65382069081083904 [0;39m 生成今日电子书快照结束，耗时：0毫秒
2021-06-30 18:05:05.016 INFO  com.cq.wiki.job.DocJob                            :31   [32m65382090081964032 [0;39m 更新电子书下的文档数据开始
2021-06-30 18:05:05.016 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65382090081964032 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-06-30 18:05:05.016 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65382090081964032 [0;39m ==> Parameters: 
2021-06-30 18:05:05.016 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65382090081964032 [0;39m <==    Updates: 7
2021-06-30 18:05:05.016 INFO  com.cq.wiki.job.DocJob                            :34   [32m65382090081964032 [0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2021-06-30 18:05:35.015 INFO  com.cq.wiki.job.DocJob                            :31   [32m65382215906889728 [0;39m 更新电子书下的文档数据开始
2021-06-30 18:05:35.015 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65382215906889728 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-06-30 18:05:35.015 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65382215906889728 [0;39m ==> Parameters: 
2021-06-30 18:05:35.015 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65382215906889728 [0;39m <==    Updates: 7
2021-06-30 18:05:35.015 INFO  com.cq.wiki.job.DocJob                            :34   [32m65382215906889728 [0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2021-06-30 18:06:00.375 INFO  org.hibernate.validator.internal.util.Version     :21   [32m                  [0;39m HV000001: Hibernate Validator 6.1.5.Final
2021-06-30 18:06:00.406 INFO  com.cq.wiki.config.WikiApplication                :55   [32m                  [0;39m Starting WikiApplication on LAPTOP-T0P8U4U3 with PID 14784 (D:\IdeaProjects\wiki\target\classes started by 程崎 in D:\IdeaProjects\wiki)
2021-06-30 18:06:00.406 INFO  com.cq.wiki.config.WikiApplication                :651  [32m                  [0;39m No active profile set, falling back to default profiles: default
2021-06-30 18:06:00.453 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :225  [32m                  [0;39m Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2021-06-30 18:06:00.453 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :225  [32m                  [0;39m For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2021-06-30 18:06:01.755 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :108  [32m                  [0;39m Tomcat initialized with port(s): 8880 (http)
2021-06-30 18:06:01.755 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Initializing ProtocolHandler ["http-nio-8880"]
2021-06-30 18:06:01.755 INFO  org.apache.catalina.core.StandardService          :173  [32m                  [0;39m Starting service [Tomcat]
2021-06-30 18:06:01.755 INFO  org.apache.catalina.core.StandardEngine           :173  [32m                  [0;39m Starting Servlet engine: [Apache Tomcat/9.0.37]
2021-06-30 18:06:01.755 INFO  org.apache.catalina.core.AprLifecycleListener     :173  [32m                  [0;39m An older version [1.2.14] of the Apache Tomcat Native library is installed, while Tomcat recommends a minimum version of [1.2.23]
2021-06-30 18:06:01.755 INFO  org.apache.catalina.core.AprLifecycleListener     :173  [32m                  [0;39m Loaded Apache Tomcat Native library [1.2.14] using APR version [1.6.2].
2021-06-30 18:06:01.755 INFO  org.apache.catalina.core.AprLifecycleListener     :173  [32m                  [0;39m APR capabilities: IPv6 [true], sendfile [true], accept filters [false], random [true].
2021-06-30 18:06:01.755 INFO  org.apache.catalina.core.AprLifecycleListener     :173  [32m                  [0;39m APR/OpenSSL configuration: useAprConnector [false], useOpenSSL [true]
2021-06-30 18:06:02.797 INFO  org.apache.catalina.core.AprLifecycleListener     :173  [32m                  [0;39m OpenSSL successfully initialized [OpenSSL 1.0.2l  25 May 2017]
2021-06-30 18:06:02.892 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring embedded WebApplicationContext
2021-06-30 18:06:02.892 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext    :285  [32m                  [0;39m Root WebApplicationContext: initialization completed in 2439 ms
2021-06-30 18:06:03.814 INFO  o.s.scheduling.concurrent.ThreadPoolTaskExecutor  :181  [32m                  [0;39m Initializing ExecutorService 'applicationTaskExecutor'
2021-06-30 18:06:03.861 INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer    :58   [32m                  [0;39m LiveReload server is running on port 35729
2021-06-30 18:06:04.011 INFO  o.s.scheduling.concurrent.ThreadPoolTaskScheduler :181  [32m                  [0;39m Initializing ExecutorService 'taskScheduler'
2021-06-30 18:06:04.105 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Starting ProtocolHandler ["http-nio-8880"]
2021-06-30 18:06:04.120 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :220  [32m                  [0;39m Tomcat started on port(s): 8880 (http) with context path ''
2021-06-30 18:06:04.365 INFO  com.cq.wiki.config.WikiApplication                :61   [32m                  [0;39m Started WikiApplication in 4.287 seconds (JVM running for 4.86)
2021-06-30 18:06:04.365 INFO  com.cq.wiki.config.WikiApplication                :26   [32m                  [0;39m 启动成功！！
2021-06-30 18:06:04.365 INFO  com.cq.wiki.config.WikiApplication                :27   [32m                  [0;39m 地址: 	http://127.0.0.1:8880
2021-06-30 18:06:05.007 INFO  com.cq.wiki.job.DocJob                            :31   [32m65382341702455296 [0;39m 更新电子书下的文档数据开始
2021-06-30 18:06:05.022 INFO  com.zaxxer.hikari.HikariDataSource                :110  [32m65382341702455296 [0;39m HikariPool-1 - Starting...
2021-06-30 18:06:05.423 INFO  com.zaxxer.hikari.HikariDataSource                :123  [32m65382341702455296 [0;39m HikariPool-1 - Start completed.
2021-06-30 18:06:05.423 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65382341702455296 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-06-30 18:06:05.439 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65382341702455296 [0;39m ==> Parameters: 
2021-06-30 18:06:05.439 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65382341702455296 [0;39m <==    Updates: 7
2021-06-30 18:06:05.439 INFO  com.cq.wiki.job.DocJob                            :34   [32m65382341702455296 [0;39m 更新电子书下的文档数据结束，耗时：432毫秒
2021-06-30 18:06:10.717 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring DispatcherServlet 'dispatcherServlet'
2021-06-30 18:06:10.717 INFO  org.springframework.web.servlet.DispatcherServlet :525  [32m                  [0;39m Initializing Servlet 'dispatcherServlet'
2021-06-30 18:06:10.726 INFO  org.springframework.web.servlet.DispatcherServlet :547  [32m                  [0;39m Completed initialization in 8 ms
2021-06-30 18:06:10.768 INFO  com.cq.wiki.websocket.WebSocketServer             :32   [32m                  [0;39m 有新连接：token：nC8vWSfAYL，session id：0，当前连接数：1
2021-06-30 18:06:10.870 INFO  com.cq.wiki.aspect.LogAspect                      :52   [32m65382366289465346 [0;39m ------------- 开始 -------------
2021-06-30 18:06:10.870 INFO  com.cq.wiki.aspect.LogAspect                      :52   [32m65382366289465344 [0;39m ------------- 开始 -------------
2021-06-30 18:06:10.870 INFO  com.cq.wiki.aspect.LogAspect                      :52   [32m65382366289465345 [0;39m ------------- 开始 -------------
2021-06-30 18:06:10.870 INFO  com.cq.wiki.aspect.LogAspect                      :53   [32m65382366289465346 [0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2021-06-30 18:06:10.870 INFO  com.cq.wiki.aspect.LogAspect                      :53   [32m65382366289465345 [0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2021-06-30 18:06:10.870 INFO  com.cq.wiki.aspect.LogAspect                      :53   [32m65382366289465344 [0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2021-06-30 18:06:10.871 INFO  com.cq.wiki.aspect.LogAspect                      :54   [32m65382366289465346 [0;39m 类名方法: com.cq.wiki.controller.EbookSnapshotController.get30Statistic
2021-06-30 18:06:10.871 INFO  com.cq.wiki.aspect.LogAspect                      :54   [32m65382366289465345 [0;39m 类名方法: com.cq.wiki.controller.EbookSnapshotController.getStatistic
2021-06-30 18:06:10.871 INFO  com.cq.wiki.aspect.LogAspect                      :54   [32m65382366289465344 [0;39m 类名方法: com.cq.wiki.controller.CategoryController.allBook
2021-06-30 18:06:10.871 INFO  com.cq.wiki.aspect.LogAspect                      :55   [32m65382366289465346 [0;39m 远程地址: 127.0.0.1
2021-06-30 18:06:10.871 INFO  com.cq.wiki.aspect.LogAspect                      :55   [32m65382366289465345 [0;39m 远程地址: 127.0.0.1
2021-06-30 18:06:10.871 INFO  com.cq.wiki.aspect.LogAspect                      :55   [32m65382366289465344 [0;39m 远程地址: 127.0.0.1
2021-06-30 18:06:10.901 INFO  com.cq.wiki.aspect.LogAspect                      :77   [32m65382366289465346 [0;39m 请求参数: []
2021-06-30 18:06:10.901 INFO  com.cq.wiki.aspect.LogAspect                      :77   [32m65382366289465345 [0;39m 请求参数: []
2021-06-30 18:06:10.901 INFO  com.cq.wiki.aspect.LogAspect                      :77   [32m65382366289465344 [0;39m 请求参数: []
2021-06-30 18:06:10.907 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m65382366289465345 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-06-30 18:06:10.907 DEBUG c.c.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m65382366289465346 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-06-30 18:06:10.908 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m65382366289465345 [0;39m ==> Parameters: 
2021-06-30 18:06:10.908 DEBUG c.c.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m65382366289465346 [0;39m ==> Parameters: 
2021-06-30 18:06:10.920 DEBUG com.cq.wiki.mapper.CategoryMapper.selectByExample :137  [32m65382366289465344 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-06-30 18:06:10.920 DEBUG com.cq.wiki.mapper.CategoryMapper.selectByExample :137  [32m65382366289465344 [0;39m ==> Parameters: 
2021-06-30 18:06:10.923 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65382366289465344 [0;39m <==    Columns: id, parent, name, sort
2021-06-30 18:06:10.923 TRACE c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m65382366289465345 [0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-06-30 18:06:10.923 DEBUG c.c.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m65382366289465346 [0;39m <==      Total: 0
2021-06-30 18:06:10.923 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65382366289465344 [0;39m <==        Row: 100, 0, 前端开发, 100
2021-06-30 18:06:10.924 TRACE c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m65382366289465345 [0;39m <==        Row: 2021-06-30, 115, 43, 115, 43
2021-06-30 18:06:10.924 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65382366289465344 [0;39m <==        Row: 101, 100, Vue, 101
2021-06-30 18:06:10.925 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65382366289465344 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-06-30 18:06:10.925 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65382366289465344 [0;39m <==        Row: 200, 0, Java, 200
2021-06-30 18:06:10.925 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65382366289465344 [0;39m <==        Row: 201, 200, 基础应用, 201
2021-06-30 18:06:10.926 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m65382366289465345 [0;39m <==      Total: 1
2021-06-30 18:06:10.926 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65382366289465344 [0;39m <==        Row: 202, 200, 框架开发, 202
2021-06-30 18:06:10.926 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65382366289465344 [0;39m <==        Row: 300, 0, Python, 300
2021-06-30 18:06:10.927 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65382366289465344 [0;39m <==        Row: 301, 300, 基础应用, 301
2021-06-30 18:06:10.927 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65382366289465344 [0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-06-30 18:06:10.928 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65382366289465344 [0;39m <==        Row: 400, 0, 数据库, 400
2021-06-30 18:06:10.928 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65382366289465344 [0;39m <==        Row: 401, 400, MySQL, 401
2021-06-30 18:06:10.928 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65382366289465344 [0;39m <==        Row: 402, 400, Oracle, 402
2021-06-30 18:06:10.929 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65382366289465344 [0;39m <==        Row: 500, 0, 其他, 500
2021-06-30 18:06:10.930 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65382366289465344 [0;39m <==        Row: 501, 500, 服务器, 501
2021-06-30 18:06:10.930 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65382366289465344 [0;39m <==        Row: 502, 500, 开发工具, 502
2021-06-30 18:06:10.931 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65382366289465344 [0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-06-30 18:06:10.933 DEBUG com.cq.wiki.mapper.CategoryMapper.selectByExample :137  [32m65382366289465344 [0;39m <==      Total: 16
2021-06-30 18:06:10.946 INFO  com.cq.wiki.aspect.LogAspect                      :89   [32m65382366289465346 [0;39m 返回结果: {"content":[],"success":true}
2021-06-30 18:06:10.946 INFO  com.cq.wiki.aspect.LogAspect                      :90   [32m65382366289465346 [0;39m ------------- 结束 耗时：77 ms -------------
2021-06-30 18:06:10.949 INFO  com.cq.wiki.aspect.LogAspect                      :89   [32m65382366289465344 [0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架开发","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":402,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-06-30 18:06:10.949 INFO  com.cq.wiki.aspect.LogAspect                      :90   [32m65382366289465344 [0;39m ------------- 结束 耗时：80 ms -------------
2021-06-30 18:06:10.950 INFO  com.cq.wiki.aspect.LogAspect                      :89   [32m65382366289465345 [0;39m 返回结果: {"content":[{"date":1624982400000,"viewCount":115,"viewIncrease":115,"voteCount":43,"voteIncrease":43}],"success":true}
2021-06-30 18:06:10.950 INFO  com.cq.wiki.aspect.LogAspect                      :90   [32m65382366289465345 [0;39m ------------- 结束 耗时：81 ms -------------
2021-06-30 18:06:13.461 INFO  com.cq.wiki.interceptor.LoginInterceptor          :33   [32m                  [0;39m ------------- LoginInterceptor 开始 -------------
2021-06-30 18:06:13.462 INFO  com.cq.wiki.interceptor.LoginInterceptor          :38   [32m                  [0;39m 从请求头里获取token：null
2021-06-30 18:06:13.462 INFO  com.cq.wiki.interceptor.LoginInterceptor          :41   [32m                  [0;39m 未映射到方法，跳过token验证
2021-06-30 18:06:13.462 INFO  com.cq.wiki.interceptor.LoginInterceptor          :73   [32m                  [0;39m ------------- LoginInterceptor 结束 耗时：0 ms -------------
2021-06-30 18:06:13.468 INFO  com.cq.wiki.interceptor.LoginInterceptor          :33   [32m                  [0;39m ------------- LoginInterceptor 开始 -------------
2021-06-30 18:06:13.468 INFO  com.cq.wiki.interceptor.LoginInterceptor          :38   [32m                  [0;39m 从请求头里获取token：eyJhbGciOiJIUzI1NiJ9.eyJsb2dpbk5hbWUiOiJ0ZXN0IiwibmFtZSI6Iua1i-ivlSIsImlkIjo2MjkwOTYxNTc0MTk5LCJleHAiOjE2MjUxMzM3ODksImlhdCI6MTYyNTA0NzM4OX0.ZhdYt_Ztr3qH1be8qR_ZdNwrsq6f6TxjwBhcQNk_iRA
2021-06-30 18:06:13.499 INFO  com.cq.wiki.interceptor.LoginInterceptor          :60   [32m                  [0;39m token：eyJhbGciOiJIUzI1NiJ9.eyJsb2dpbk5hbWUiOiJ0ZXN0IiwibmFtZSI6Iua1i-ivlSIsImlkIjo2MjkwOTYxNTc0MTk5LCJleHAiOjE2MjUxMzM3ODksImlhdCI6MTYyNTA0NzM4OX0.ZhdYt_Ztr3qH1be8qR_ZdNwrsq6f6TxjwBhcQNk_iRA验证通过
2021-06-30 18:06:13.503 INFO  com.cq.wiki.aspect.LogAspect                      :52   [32m65382377337262080 [0;39m ------------- 开始 -------------
2021-06-30 18:06:13.504 INFO  com.cq.wiki.aspect.LogAspect                      :53   [32m65382377337262080 [0;39m 请求地址: http://127.0.0.1:8880/user/logout/eyJhbGciOiJIUzI1NiJ9.eyJsb2dpbk5hbWUiOiJ0ZXN0IiwibmFtZSI6Iua1i-ivlSIsImlkIjo2MjkwOTYxNTc0MTk5LCJleHAiOjE2MjUxMzM3ODksImlhdCI6MTYyNTA0NzM4OX0.ZhdYt_Ztr3qH1be8qR_ZdNwrsq6f6TxjwBhcQNk_iRA GET
2021-06-30 18:06:13.504 INFO  com.cq.wiki.aspect.LogAspect                      :54   [32m65382377337262080 [0;39m 类名方法: com.cq.wiki.controller.UserController.logout
2021-06-30 18:06:13.504 INFO  com.cq.wiki.aspect.LogAspect                      :55   [32m65382377337262080 [0;39m 远程地址: 127.0.0.1
2021-06-30 18:06:13.504 INFO  com.cq.wiki.aspect.LogAspect                      :77   [32m65382377337262080 [0;39m 请求参数: ["eyJhbGciOiJIUzI1NiJ9.eyJsb2dpbk5hbWUiOiJ0ZXN0IiwibmFtZSI6Iua1i-ivlSIsImlkIjo2MjkwOTYxNTc0MTk5LCJleHAiOjE2MjUxMzM3ODksImlhdCI6MTYyNTA0NzM4OX0.ZhdYt_Ztr3qH1be8qR_ZdNwrsq6f6TxjwBhcQNk_iRA"]
2021-06-30 18:06:13.514 DEBUG com.cq.wiki.mapper.TokenMapper.deleteByExample    :137  [32m65382377337262080 [0;39m ==>  Preparing: delete from token WHERE ( token = ? )
2021-06-30 18:06:13.515 DEBUG com.cq.wiki.mapper.TokenMapper.deleteByExample    :137  [32m65382377337262080 [0;39m ==> Parameters: eyJhbGciOiJIUzI1NiJ9.eyJsb2dpbk5hbWUiOiJ0ZXN0IiwibmFtZSI6Iua1i-ivlSIsImlkIjo2MjkwOTYxNTc0MTk5LCJleHAiOjE2MjUxMzM3ODksImlhdCI6MTYyNTA0NzM4OX0.ZhdYt_Ztr3qH1be8qR_ZdNwrsq6f6TxjwBhcQNk_iRA(String)
2021-06-30 18:06:13.529 DEBUG com.cq.wiki.mapper.TokenMapper.deleteByExample    :137  [32m65382377337262080 [0;39m <==    Updates: 1
2021-06-30 18:06:13.530 INFO  com.cq.wiki.controller.UserController             :88   [32m65382377337262080 [0;39m 从数据库里删除token: eyJhbGciOiJIUzI1NiJ9.eyJsb2dpbk5hbWUiOiJ0ZXN0IiwibmFtZSI6Iua1i-ivlSIsImlkIjo2MjkwOTYxNTc0MTk5LCJleHAiOjE2MjUxMzM3ODksImlhdCI6MTYyNTA0NzM4OX0.ZhdYt_Ztr3qH1be8qR_ZdNwrsq6f6TxjwBhcQNk_iRA
2021-06-30 18:06:13.530 INFO  com.cq.wiki.aspect.LogAspect                      :89   [32m65382377337262080 [0;39m 返回结果: {"success":true}
2021-06-30 18:06:13.530 INFO  com.cq.wiki.aspect.LogAspect                      :90   [32m65382377337262080 [0;39m ------------- 结束 耗时：27 ms -------------
2021-06-30 18:06:13.539 INFO  com.cq.wiki.interceptor.LoginInterceptor          :73   [32m65382377337262080 [0;39m ------------- LoginInterceptor 结束 耗时：71 ms -------------
2021-06-30 18:06:35.021 INFO  com.cq.wiki.job.DocJob                            :31   [32m65382467590295552 [0;39m 更新电子书下的文档数据开始
2021-06-30 18:06:35.021 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65382467590295552 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-06-30 18:06:35.021 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65382467590295552 [0;39m ==> Parameters: 
2021-06-30 18:06:35.021 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65382467590295552 [0;39m <==    Updates: 7
2021-06-30 18:06:35.021 INFO  com.cq.wiki.job.DocJob                            :34   [32m65382467590295552 [0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2021-06-30 18:07:00.010 INFO  com.cq.wiki.job.EbookSnapshotJob                  :32   [32m65382572401758208 [0;39m 生成今日电子书快照开始
2021-06-30 18:07:00.010 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65382572401758208 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-06-30 18:07:00.010 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65382572401758208 [0;39m ==> Parameters: 
2021-06-30 18:07:00.010 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65382572401758208 [0;39m <==    Updates: 0
2021-06-30 18:07:00.010 INFO  com.cq.wiki.job.EbookSnapshotJob                  :35   [32m65382572401758208 [0;39m 生成今日电子书快照结束，耗时：0毫秒
2021-06-30 18:07:05.019 INFO  com.cq.wiki.job.DocJob                            :31   [32m65382593411026944 [0;39m 更新电子书下的文档数据开始
2021-06-30 18:07:05.019 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65382593411026944 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-06-30 18:07:05.019 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65382593411026944 [0;39m ==> Parameters: 
2021-06-30 18:07:05.019 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65382593411026944 [0;39m <==    Updates: 7
2021-06-30 18:07:05.019 INFO  com.cq.wiki.job.DocJob                            :34   [32m65382593411026944 [0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2021-06-30 18:07:35.007 INFO  com.cq.wiki.job.DocJob                            :31   [32m65382719189815296 [0;39m 更新电子书下的文档数据开始
2021-06-30 18:07:35.007 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65382719189815296 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-06-30 18:07:35.007 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65382719189815296 [0;39m ==> Parameters: 
2021-06-30 18:07:35.007 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65382719189815296 [0;39m <==    Updates: 7
2021-06-30 18:07:35.007 INFO  com.cq.wiki.job.DocJob                            :34   [32m65382719189815296 [0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2021-06-30 18:08:00.008 INFO  com.cq.wiki.job.EbookSnapshotJob                  :32   [32m65382824051609600 [0;39m 生成今日电子书快照开始
2021-06-30 18:08:00.008 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65382824051609600 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-06-30 18:08:00.008 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65382824051609600 [0;39m ==> Parameters: 
2021-06-30 18:08:00.008 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65382824051609600 [0;39m <==    Updates: 0
2021-06-30 18:08:00.008 INFO  com.cq.wiki.job.EbookSnapshotJob                  :35   [32m65382824051609600 [0;39m 生成今日电子书快照结束，耗时：0毫秒
2021-06-30 18:08:05.007 INFO  com.cq.wiki.job.DocJob                            :31   [32m65382845018935296 [0;39m 更新电子书下的文档数据开始
2021-06-30 18:08:05.007 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65382845018935296 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-06-30 18:08:05.007 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65382845018935296 [0;39m ==> Parameters: 
2021-06-30 18:08:05.007 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65382845018935296 [0;39m <==    Updates: 7
2021-06-30 18:08:05.007 INFO  com.cq.wiki.job.DocJob                            :34   [32m65382845018935296 [0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2021-06-30 18:08:35.006 INFO  com.cq.wiki.job.DocJob                            :31   [32m65382970843860992 [0;39m 更新电子书下的文档数据开始
2021-06-30 18:08:35.006 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65382970843860992 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-06-30 18:08:35.006 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65382970843860992 [0;39m ==> Parameters: 
2021-06-30 18:08:35.006 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65382970843860992 [0;39m <==    Updates: 7
2021-06-30 18:08:35.006 INFO  com.cq.wiki.job.DocJob                            :34   [32m65382970843860992 [0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2021-06-30 18:08:59.244 INFO  org.hibernate.validator.internal.util.Version     :21   [32m                  [0;39m HV000001: Hibernate Validator 6.1.5.Final
2021-06-30 18:08:59.260 INFO  com.cq.wiki.config.WikiApplication                :55   [32m                  [0;39m Starting WikiApplication on LAPTOP-T0P8U4U3 with PID 8508 (D:\IdeaProjects\wiki\target\classes started by 程崎 in D:\IdeaProjects\wiki)
2021-06-30 18:08:59.260 INFO  com.cq.wiki.config.WikiApplication                :651  [32m                  [0;39m No active profile set, falling back to default profiles: default
2021-06-30 18:08:59.326 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :225  [32m                  [0;39m Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2021-06-30 18:08:59.326 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :225  [32m                  [0;39m For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2021-06-30 18:09:01.381 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :108  [32m                  [0;39m Tomcat initialized with port(s): 8880 (http)
2021-06-30 18:09:01.397 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Initializing ProtocolHandler ["http-nio-8880"]
2021-06-30 18:09:01.397 INFO  org.apache.catalina.core.StandardService          :173  [32m                  [0;39m Starting service [Tomcat]
2021-06-30 18:09:01.397 INFO  org.apache.catalina.core.StandardEngine           :173  [32m                  [0;39m Starting Servlet engine: [Apache Tomcat/9.0.37]
2021-06-30 18:09:01.397 INFO  org.apache.catalina.core.AprLifecycleListener     :173  [32m                  [0;39m An older version [1.2.14] of the Apache Tomcat Native library is installed, while Tomcat recommends a minimum version of [1.2.23]
2021-06-30 18:09:01.397 INFO  org.apache.catalina.core.AprLifecycleListener     :173  [32m                  [0;39m Loaded Apache Tomcat Native library [1.2.14] using APR version [1.6.2].
2021-06-30 18:09:01.397 INFO  org.apache.catalina.core.AprLifecycleListener     :173  [32m                  [0;39m APR capabilities: IPv6 [true], sendfile [true], accept filters [false], random [true].
2021-06-30 18:09:01.397 INFO  org.apache.catalina.core.AprLifecycleListener     :173  [32m                  [0;39m APR/OpenSSL configuration: useAprConnector [false], useOpenSSL [true]
2021-06-30 18:09:02.437 INFO  org.apache.catalina.core.AprLifecycleListener     :173  [32m                  [0;39m OpenSSL successfully initialized [OpenSSL 1.0.2l  25 May 2017]
2021-06-30 18:09:02.583 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring embedded WebApplicationContext
2021-06-30 18:09:02.584 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext    :285  [32m                  [0;39m Root WebApplicationContext: initialization completed in 3258 ms
2021-06-30 18:09:03.969 INFO  o.s.scheduling.concurrent.ThreadPoolTaskExecutor  :181  [32m                  [0;39m Initializing ExecutorService 'applicationTaskExecutor'
2021-06-30 18:09:04.025 INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer    :58   [32m                  [0;39m LiveReload server is running on port 35729
2021-06-30 18:09:04.224 INFO  o.s.scheduling.concurrent.ThreadPoolTaskScheduler :181  [32m                  [0;39m Initializing ExecutorService 'taskScheduler'
2021-06-30 18:09:04.336 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Starting ProtocolHandler ["http-nio-8880"]
2021-06-30 18:09:04.368 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :220  [32m                  [0;39m Tomcat started on port(s): 8880 (http) with context path ''
2021-06-30 18:09:04.689 INFO  com.cq.wiki.config.WikiApplication                :61   [32m                  [0;39m Started WikiApplication in 5.933 seconds (JVM running for 6.568)
2021-06-30 18:09:04.689 INFO  com.cq.wiki.config.WikiApplication                :26   [32m                  [0;39m 启动成功！！
2021-06-30 18:09:04.689 INFO  com.cq.wiki.config.WikiApplication                :27   [32m                  [0;39m 地址: 	http://127.0.0.1:8880
2021-06-30 18:09:05.021 INFO  com.cq.wiki.job.DocJob                            :31   [32m65383096735895552 [0;39m 更新电子书下的文档数据开始
2021-06-30 18:09:05.051 INFO  com.zaxxer.hikari.HikariDataSource                :110  [32m65383096735895552 [0;39m HikariPool-1 - Starting...
2021-06-30 18:09:05.531 INFO  com.zaxxer.hikari.HikariDataSource                :123  [32m65383096735895552 [0;39m HikariPool-1 - Start completed.
2021-06-30 18:09:05.546 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65383096735895552 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-06-30 18:09:05.577 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65383096735895552 [0;39m ==> Parameters: 
2021-06-30 18:09:05.577 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65383096735895552 [0;39m <==    Updates: 7
2021-06-30 18:09:05.593 INFO  com.cq.wiki.job.DocJob                            :34   [32m65383096735895552 [0;39m 更新电子书下的文档数据结束，耗时：572毫秒
2021-06-30 18:09:13.972 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring DispatcherServlet 'dispatcherServlet'
2021-06-30 18:09:13.972 INFO  org.springframework.web.servlet.DispatcherServlet :525  [32m                  [0;39m Initializing Servlet 'dispatcherServlet'
2021-06-30 18:09:13.981 INFO  org.springframework.web.servlet.DispatcherServlet :547  [32m                  [0;39m Completed initialization in 9 ms
2021-06-30 18:09:14.017 INFO  com.cq.wiki.websocket.WebSocketServer             :32   [32m                  [0;39m 有新连接：token：FFyDNOKbB9，session id：0，当前连接数：1
2021-06-30 18:09:14.120 INFO  com.cq.wiki.aspect.LogAspect                      :52   [32m65383134895673346 [0;39m ------------- 开始 -------------
2021-06-30 18:09:14.120 INFO  com.cq.wiki.aspect.LogAspect                      :52   [32m65383134895673345 [0;39m ------------- 开始 -------------
2021-06-30 18:09:14.120 INFO  com.cq.wiki.aspect.LogAspect                      :52   [32m65383134895673344 [0;39m ------------- 开始 -------------
2021-06-30 18:09:14.121 INFO  com.cq.wiki.aspect.LogAspect                      :53   [32m65383134895673345 [0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2021-06-30 18:09:14.121 INFO  com.cq.wiki.aspect.LogAspect                      :53   [32m65383134895673346 [0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2021-06-30 18:09:14.121 INFO  com.cq.wiki.aspect.LogAspect                      :53   [32m65383134895673344 [0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2021-06-30 18:09:14.121 INFO  com.cq.wiki.aspect.LogAspect                      :54   [32m65383134895673345 [0;39m 类名方法: com.cq.wiki.controller.EbookSnapshotController.getStatistic
2021-06-30 18:09:14.121 INFO  com.cq.wiki.aspect.LogAspect                      :54   [32m65383134895673344 [0;39m 类名方法: com.cq.wiki.controller.CategoryController.allBook
2021-06-30 18:09:14.121 INFO  com.cq.wiki.aspect.LogAspect                      :54   [32m65383134895673346 [0;39m 类名方法: com.cq.wiki.controller.EbookSnapshotController.get30Statistic
2021-06-30 18:09:14.121 INFO  com.cq.wiki.aspect.LogAspect                      :55   [32m65383134895673345 [0;39m 远程地址: 127.0.0.1
2021-06-30 18:09:14.121 INFO  com.cq.wiki.aspect.LogAspect                      :55   [32m65383134895673346 [0;39m 远程地址: 127.0.0.1
2021-06-30 18:09:14.121 INFO  com.cq.wiki.aspect.LogAspect                      :55   [32m65383134895673344 [0;39m 远程地址: 127.0.0.1
2021-06-30 18:09:14.153 INFO  com.cq.wiki.aspect.LogAspect                      :77   [32m65383134895673345 [0;39m 请求参数: []
2021-06-30 18:09:14.153 INFO  com.cq.wiki.aspect.LogAspect                      :77   [32m65383134895673344 [0;39m 请求参数: []
2021-06-30 18:09:14.153 INFO  com.cq.wiki.aspect.LogAspect                      :77   [32m65383134895673346 [0;39m 请求参数: []
2021-06-30 18:09:14.158 DEBUG c.c.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m65383134895673346 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-06-30 18:09:14.158 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m65383134895673345 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-06-30 18:09:14.159 DEBUG c.c.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m65383134895673346 [0;39m ==> Parameters: 
2021-06-30 18:09:14.159 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m65383134895673345 [0;39m ==> Parameters: 
2021-06-30 18:09:14.172 DEBUG com.cq.wiki.mapper.CategoryMapper.selectByExample :137  [32m65383134895673344 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-06-30 18:09:14.173 DEBUG com.cq.wiki.mapper.CategoryMapper.selectByExample :137  [32m65383134895673344 [0;39m ==> Parameters: 
2021-06-30 18:09:14.175 DEBUG c.c.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m65383134895673346 [0;39m <==      Total: 0
2021-06-30 18:09:14.175 TRACE c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m65383134895673345 [0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-06-30 18:09:14.175 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383134895673344 [0;39m <==    Columns: id, parent, name, sort
2021-06-30 18:09:14.176 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383134895673344 [0;39m <==        Row: 100, 0, 前端开发, 100
2021-06-30 18:09:14.176 TRACE c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m65383134895673345 [0;39m <==        Row: 2021-06-30, 115, 43, 115, 43
2021-06-30 18:09:14.177 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383134895673344 [0;39m <==        Row: 101, 100, Vue, 101
2021-06-30 18:09:14.178 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383134895673344 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-06-30 18:09:14.178 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m65383134895673345 [0;39m <==      Total: 1
2021-06-30 18:09:14.178 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383134895673344 [0;39m <==        Row: 200, 0, Java, 200
2021-06-30 18:09:14.179 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383134895673344 [0;39m <==        Row: 201, 200, 基础应用, 201
2021-06-30 18:09:14.180 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383134895673344 [0;39m <==        Row: 202, 200, 框架开发, 202
2021-06-30 18:09:14.180 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383134895673344 [0;39m <==        Row: 300, 0, Python, 300
2021-06-30 18:09:14.181 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383134895673344 [0;39m <==        Row: 301, 300, 基础应用, 301
2021-06-30 18:09:14.182 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383134895673344 [0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-06-30 18:09:14.183 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383134895673344 [0;39m <==        Row: 400, 0, 数据库, 400
2021-06-30 18:09:14.183 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383134895673344 [0;39m <==        Row: 401, 400, MySQL, 401
2021-06-30 18:09:14.183 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383134895673344 [0;39m <==        Row: 402, 400, Oracle, 402
2021-06-30 18:09:14.184 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383134895673344 [0;39m <==        Row: 500, 0, 其他, 500
2021-06-30 18:09:14.184 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383134895673344 [0;39m <==        Row: 501, 500, 服务器, 501
2021-06-30 18:09:14.185 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383134895673344 [0;39m <==        Row: 502, 500, 开发工具, 502
2021-06-30 18:09:14.185 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383134895673344 [0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-06-30 18:09:14.186 DEBUG com.cq.wiki.mapper.CategoryMapper.selectByExample :137  [32m65383134895673344 [0;39m <==      Total: 16
2021-06-30 18:09:14.197 INFO  com.cq.wiki.aspect.LogAspect                      :89   [32m65383134895673346 [0;39m 返回结果: {"content":[],"success":true}
2021-06-30 18:09:14.197 INFO  com.cq.wiki.aspect.LogAspect                      :90   [32m65383134895673346 [0;39m ------------- 结束 耗时：78 ms -------------
2021-06-30 18:09:14.200 INFO  com.cq.wiki.aspect.LogAspect                      :89   [32m65383134895673344 [0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架开发","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":402,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-06-30 18:09:14.200 INFO  com.cq.wiki.aspect.LogAspect                      :90   [32m65383134895673344 [0;39m ------------- 结束 耗时：81 ms -------------
2021-06-30 18:09:14.201 INFO  com.cq.wiki.aspect.LogAspect                      :89   [32m65383134895673345 [0;39m 返回结果: {"content":[{"date":1624982400000,"viewCount":115,"viewIncrease":115,"voteCount":43,"voteIncrease":43}],"success":true}
2021-06-30 18:09:14.201 INFO  com.cq.wiki.aspect.LogAspect                      :90   [32m65383134895673345 [0;39m ------------- 结束 耗时：82 ms -------------
2021-06-30 18:09:35.010 INFO  com.cq.wiki.job.DocJob                            :31   [32m65383222518878208 [0;39m 更新电子书下的文档数据开始
2021-06-30 18:09:35.010 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65383222518878208 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-06-30 18:09:35.010 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65383222518878208 [0;39m ==> Parameters: 
2021-06-30 18:09:35.010 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65383222518878208 [0;39m <==    Updates: 7
2021-06-30 18:09:35.010 INFO  com.cq.wiki.job.DocJob                            :34   [32m65383222518878208 [0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2021-06-30 18:09:52.476 INFO  com.cq.wiki.aspect.LogAspect                      :52   [32m65383295776591873 [0;39m ------------- 开始 -------------
2021-06-30 18:09:52.476 INFO  com.cq.wiki.aspect.LogAspect                      :52   [32m65383295776591872 [0;39m ------------- 开始 -------------
2021-06-30 18:09:52.476 INFO  com.cq.wiki.aspect.LogAspect                      :53   [32m65383295776591873 [0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2021-06-30 18:09:52.476 INFO  com.cq.wiki.aspect.LogAspect                      :53   [32m65383295776591872 [0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2021-06-30 18:09:52.476 INFO  com.cq.wiki.aspect.LogAspect                      :54   [32m65383295776591873 [0;39m 类名方法: com.cq.wiki.controller.EbookSnapshotController.get30Statistic
2021-06-30 18:09:52.476 INFO  com.cq.wiki.aspect.LogAspect                      :54   [32m65383295776591872 [0;39m 类名方法: com.cq.wiki.controller.EbookSnapshotController.getStatistic
2021-06-30 18:09:52.476 INFO  com.cq.wiki.aspect.LogAspect                      :55   [32m65383295776591873 [0;39m 远程地址: 127.0.0.1
2021-06-30 18:09:52.476 INFO  com.cq.wiki.aspect.LogAspect                      :55   [32m65383295776591872 [0;39m 远程地址: 127.0.0.1
2021-06-30 18:09:52.476 INFO  com.cq.wiki.aspect.LogAspect                      :77   [32m65383295776591872 [0;39m 请求参数: []
2021-06-30 18:09:52.476 INFO  com.cq.wiki.aspect.LogAspect                      :77   [32m65383295776591873 [0;39m 请求参数: []
2021-06-30 18:09:52.476 DEBUG c.c.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m65383295776591873 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-06-30 18:09:52.476 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m65383295776591872 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-06-30 18:09:52.476 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m65383295776591872 [0;39m ==> Parameters: 
2021-06-30 18:09:52.476 DEBUG c.c.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m65383295776591873 [0;39m ==> Parameters: 
2021-06-30 18:09:52.476 DEBUG c.c.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m65383295776591873 [0;39m <==      Total: 0
2021-06-30 18:09:52.476 TRACE c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m65383295776591872 [0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-06-30 18:09:52.476 TRACE c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m65383295776591872 [0;39m <==        Row: 2021-06-30, 115, 43, 115, 43
2021-06-30 18:09:52.476 INFO  com.cq.wiki.aspect.LogAspect                      :89   [32m65383295776591873 [0;39m 返回结果: {"content":[],"success":true}
2021-06-30 18:09:52.476 INFO  com.cq.wiki.aspect.LogAspect                      :90   [32m65383295776591873 [0;39m ------------- 结束 耗时：0 ms -------------
2021-06-30 18:09:52.476 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m65383295776591872 [0;39m <==      Total: 1
2021-06-30 18:09:52.476 INFO  com.cq.wiki.aspect.LogAspect                      :89   [32m65383295776591872 [0;39m 返回结果: {"content":[{"date":1624982400000,"viewCount":115,"viewIncrease":115,"voteCount":43,"voteIncrease":43}],"success":true}
2021-06-30 18:09:52.476 INFO  com.cq.wiki.aspect.LogAspect                      :90   [32m65383295776591872 [0;39m ------------- 结束 耗时：0 ms -------------
2021-06-30 18:09:55.755 INFO  com.cq.wiki.websocket.WebSocketServer             :41   [32m                  [0;39m 连接关闭，token：FFyDNOKbB9，session id：0！当前连接数：0
2021-06-30 18:09:56.498 INFO  com.cq.wiki.websocket.WebSocketServer             :32   [32m                  [0;39m 有新连接：token：RbylkKZLeA，session id：1，当前连接数：1
2021-06-30 18:09:56.620 INFO  com.cq.wiki.aspect.LogAspect                      :52   [32m65383313157787648 [0;39m ------------- 开始 -------------
2021-06-30 18:09:56.620 INFO  com.cq.wiki.aspect.LogAspect                      :53   [32m65383313157787648 [0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2021-06-30 18:09:56.620 INFO  com.cq.wiki.aspect.LogAspect                      :54   [32m65383313157787648 [0;39m 类名方法: com.cq.wiki.controller.EbookSnapshotController.getStatistic
2021-06-30 18:09:56.620 INFO  com.cq.wiki.aspect.LogAspect                      :52   [32m65383313157787649 [0;39m ------------- 开始 -------------
2021-06-30 18:09:56.620 INFO  com.cq.wiki.aspect.LogAspect                      :52   [32m65383313157787650 [0;39m ------------- 开始 -------------
2021-06-30 18:09:56.621 INFO  com.cq.wiki.aspect.LogAspect                      :53   [32m65383313157787649 [0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2021-06-30 18:09:56.621 INFO  com.cq.wiki.aspect.LogAspect                      :55   [32m65383313157787648 [0;39m 远程地址: 127.0.0.1
2021-06-30 18:09:56.621 INFO  com.cq.wiki.aspect.LogAspect                      :53   [32m65383313157787650 [0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2021-06-30 18:09:56.621 INFO  com.cq.wiki.aspect.LogAspect                      :54   [32m65383313157787650 [0;39m 类名方法: com.cq.wiki.controller.EbookSnapshotController.get30Statistic
2021-06-30 18:09:56.621 INFO  com.cq.wiki.aspect.LogAspect                      :54   [32m65383313157787649 [0;39m 类名方法: com.cq.wiki.controller.CategoryController.allBook
2021-06-30 18:09:56.621 INFO  com.cq.wiki.aspect.LogAspect                      :77   [32m65383313157787648 [0;39m 请求参数: []
2021-06-30 18:09:56.621 INFO  com.cq.wiki.aspect.LogAspect                      :55   [32m65383313157787650 [0;39m 远程地址: 127.0.0.1
2021-06-30 18:09:56.621 INFO  com.cq.wiki.aspect.LogAspect                      :55   [32m65383313157787649 [0;39m 远程地址: 127.0.0.1
2021-06-30 18:09:56.621 INFO  com.cq.wiki.aspect.LogAspect                      :77   [32m65383313157787650 [0;39m 请求参数: []
2021-06-30 18:09:56.621 INFO  com.cq.wiki.aspect.LogAspect                      :77   [32m65383313157787649 [0;39m 请求参数: []
2021-06-30 18:09:56.622 DEBUG c.c.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m65383313157787650 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-06-30 18:09:56.622 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m65383313157787648 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-06-30 18:09:56.622 DEBUG com.cq.wiki.mapper.CategoryMapper.selectByExample :137  [32m65383313157787649 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-06-30 18:09:56.623 DEBUG c.c.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m65383313157787650 [0;39m ==> Parameters: 
2021-06-30 18:09:56.623 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m65383313157787648 [0;39m ==> Parameters: 
2021-06-30 18:09:56.623 DEBUG com.cq.wiki.mapper.CategoryMapper.selectByExample :137  [32m65383313157787649 [0;39m ==> Parameters: 
2021-06-30 18:09:56.624 DEBUG c.c.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m65383313157787650 [0;39m <==      Total: 0
2021-06-30 18:09:56.624 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383313157787649 [0;39m <==    Columns: id, parent, name, sort
2021-06-30 18:09:56.624 TRACE c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m65383313157787648 [0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-06-30 18:09:56.625 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383313157787649 [0;39m <==        Row: 100, 0, 前端开发, 100
2021-06-30 18:09:56.625 TRACE c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m65383313157787648 [0;39m <==        Row: 2021-06-30, 115, 43, 115, 43
2021-06-30 18:09:56.625 INFO  com.cq.wiki.aspect.LogAspect                      :89   [32m65383313157787650 [0;39m 返回结果: {"content":[],"success":true}
2021-06-30 18:09:56.625 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m65383313157787648 [0;39m <==      Total: 1
2021-06-30 18:09:56.625 INFO  com.cq.wiki.aspect.LogAspect                      :90   [32m65383313157787650 [0;39m ------------- 结束 耗时：5 ms -------------
2021-06-30 18:09:56.625 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383313157787649 [0;39m <==        Row: 101, 100, Vue, 101
2021-06-30 18:09:56.626 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383313157787649 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-06-30 18:09:56.626 INFO  com.cq.wiki.aspect.LogAspect                      :89   [32m65383313157787648 [0;39m 返回结果: {"content":[{"date":1624982400000,"viewCount":115,"viewIncrease":115,"voteCount":43,"voteIncrease":43}],"success":true}
2021-06-30 18:09:56.626 INFO  com.cq.wiki.aspect.LogAspect                      :90   [32m65383313157787648 [0;39m ------------- 结束 耗时：6 ms -------------
2021-06-30 18:09:56.626 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383313157787649 [0;39m <==        Row: 200, 0, Java, 200
2021-06-30 18:09:56.626 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383313157787649 [0;39m <==        Row: 201, 200, 基础应用, 201
2021-06-30 18:09:56.627 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383313157787649 [0;39m <==        Row: 202, 200, 框架开发, 202
2021-06-30 18:09:56.628 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383313157787649 [0;39m <==        Row: 300, 0, Python, 300
2021-06-30 18:09:56.629 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383313157787649 [0;39m <==        Row: 301, 300, 基础应用, 301
2021-06-30 18:09:56.629 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383313157787649 [0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-06-30 18:09:56.630 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383313157787649 [0;39m <==        Row: 400, 0, 数据库, 400
2021-06-30 18:09:56.630 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383313157787649 [0;39m <==        Row: 401, 400, MySQL, 401
2021-06-30 18:09:56.630 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383313157787649 [0;39m <==        Row: 402, 400, Oracle, 402
2021-06-30 18:09:56.630 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383313157787649 [0;39m <==        Row: 500, 0, 其他, 500
2021-06-30 18:09:56.631 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383313157787649 [0;39m <==        Row: 501, 500, 服务器, 501
2021-06-30 18:09:56.631 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383313157787649 [0;39m <==        Row: 502, 500, 开发工具, 502
2021-06-30 18:09:56.631 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383313157787649 [0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-06-30 18:09:56.632 DEBUG com.cq.wiki.mapper.CategoryMapper.selectByExample :137  [32m65383313157787649 [0;39m <==      Total: 16
2021-06-30 18:09:56.633 INFO  com.cq.wiki.aspect.LogAspect                      :89   [32m65383313157787649 [0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架开发","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":402,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-06-30 18:09:56.634 INFO  com.cq.wiki.aspect.LogAspect                      :90   [32m65383313157787649 [0;39m ------------- 结束 耗时：14 ms -------------
2021-06-30 18:10:00.013 INFO  com.cq.wiki.job.EbookSnapshotJob                  :32   [32m65383327389061120 [0;39m 生成今日电子书快照开始
2021-06-30 18:10:00.014 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65383327389061120 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-06-30 18:10:00.016 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65383327389061120 [0;39m ==> Parameters: 
2021-06-30 18:10:00.018 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65383327389061120 [0;39m <==    Updates: 0
2021-06-30 18:10:00.018 INFO  com.cq.wiki.job.EbookSnapshotJob                  :35   [32m65383327389061120 [0;39m 生成今日电子书快照结束，耗时：5毫秒
2021-06-30 18:10:00.432 INFO  com.cq.wiki.aspect.LogAspect                      :52   [32m65383329146474496 [0;39m ------------- 开始 -------------
2021-06-30 18:10:00.433 INFO  com.cq.wiki.aspect.LogAspect                      :53   [32m65383329146474496 [0;39m 请求地址: http://127.0.0.1:8880/user/login POST
2021-06-30 18:10:00.434 INFO  com.cq.wiki.aspect.LogAspect                      :54   [32m65383329146474496 [0;39m 类名方法: com.cq.wiki.controller.UserController.login
2021-06-30 18:10:00.434 INFO  com.cq.wiki.aspect.LogAspect                      :55   [32m65383329146474496 [0;39m 远程地址: 127.0.0.1
2021-06-30 18:10:00.434 INFO  com.cq.wiki.aspect.LogAspect                      :77   [32m65383329146474496 [0;39m 请求参数: [{"loginName":"test"}]
2021-06-30 18:10:00.446 DEBUG com.cq.wiki.mapper.UserMapper.selectByExample     :137  [32m65383329146474496 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user WHERE ( login_name = ? )
2021-06-30 18:10:00.447 DEBUG com.cq.wiki.mapper.UserMapper.selectByExample     :137  [32m65383329146474496 [0;39m ==> Parameters: test(String)
2021-06-30 18:10:00.448 TRACE com.cq.wiki.mapper.UserMapper.selectByExample     :143  [32m65383329146474496 [0;39m <==    Columns: id, login_name, name, password
2021-06-30 18:10:00.449 TRACE com.cq.wiki.mapper.UserMapper.selectByExample     :143  [32m65383329146474496 [0;39m <==        Row: 6290961574199, test, 测试, e70e2222a9d67c4f2eae107533359aa4
2021-06-30 18:10:00.449 DEBUG com.cq.wiki.mapper.UserMapper.selectByExample     :137  [32m65383329146474496 [0;39m <==      Total: 1
2021-06-30 18:10:00.454 INFO  com.cq.wiki.util.TokenUtil                        :24   [32m65383329146474496 [0;39m 当前时间的时间戳1625047800454
2021-06-30 18:10:00.454 INFO  com.cq.wiki.util.TokenUtil                        :27   [32m65383329146474496 [0;39m 过期时间戳为：1625134200454
2021-06-30 18:10:00.477 DEBUG com.cq.wiki.mapper.TokenMapper.insert             :137  [32m65383329146474496 [0;39m ==>  Preparing: insert into token (id, token) values (?, ?)
2021-06-30 18:10:00.478 DEBUG com.cq.wiki.mapper.TokenMapper.insert             :137  [32m65383329146474496 [0;39m ==> Parameters: 65383329335218176(Long), eyJhbGciOiJIUzI1NiJ9.eyJsb2dpbk5hbWUiOiJ0ZXN0IiwibmFtZSI6Iua1i-ivlSIsImlkIjo2MjkwOTYxNTc0MTk5LCJleHAiOjE2MjUxMzQyMDAsImlhdCI6MTYyNTA0NzgwMH0.BRW08DlSCynH3C8e8_R2dJ4pXAC0thchFGsL_AUuII8(String)
2021-06-30 18:10:00.492 DEBUG com.cq.wiki.mapper.TokenMapper.insert             :137  [32m65383329146474496 [0;39m <==    Updates: 1
2021-06-30 18:10:00.493 INFO  com.cq.wiki.service.UserService                   :66   [32m65383329146474496 [0;39m token为：eyJhbGciOiJIUzI1NiJ9.eyJsb2dpbk5hbWUiOiJ0ZXN0IiwibmFtZSI6Iua1i-ivlSIsImlkIjo2MjkwOTYxNTc0MTk5LCJleHAiOjE2MjUxMzQyMDAsImlhdCI6MTYyNTA0NzgwMH0.BRW08DlSCynH3C8e8_R2dJ4pXAC0thchFGsL_AUuII8
2021-06-30 18:10:00.495 INFO  com.cq.wiki.aspect.LogAspect                      :89   [32m65383329146474496 [0;39m 返回结果: {"content":{"id":6290961574199,"loginName":"test","name":"测试","token":"eyJhbGciOiJIUzI1NiJ9.eyJsb2dpbk5hbWUiOiJ0ZXN0IiwibmFtZSI6Iua1i-ivlSIsImlkIjo2MjkwOTYxNTc0MTk5LCJleHAiOjE2MjUxMzQyMDAsImlhdCI6MTYyNTA0NzgwMH0.BRW08DlSCynH3C8e8_R2dJ4pXAC0thchFGsL_AUuII8"},"success":true}
2021-06-30 18:10:00.496 INFO  com.cq.wiki.aspect.LogAspect                      :90   [32m65383329146474496 [0;39m ------------- 结束 耗时：64 ms -------------
2021-06-30 18:10:02.842 INFO  com.cq.wiki.interceptor.LoginInterceptor          :33   [32m65383134895673344 [0;39m ------------- LoginInterceptor 开始 -------------
2021-06-30 18:10:02.843 INFO  com.cq.wiki.interceptor.LoginInterceptor          :38   [32m65383134895673344 [0;39m 从请求头里获取token：null
2021-06-30 18:10:02.843 INFO  com.cq.wiki.interceptor.LoginInterceptor          :41   [32m65383134895673344 [0;39m 未映射到方法，跳过token验证
2021-06-30 18:10:02.843 INFO  com.cq.wiki.interceptor.LoginInterceptor          :73   [32m65383134895673344 [0;39m ------------- LoginInterceptor 结束 耗时：0 ms -------------
2021-06-30 18:10:02.973 INFO  com.cq.wiki.interceptor.LoginInterceptor          :33   [32m65383134895673345 [0;39m ------------- LoginInterceptor 开始 -------------
2021-06-30 18:10:02.973 INFO  com.cq.wiki.interceptor.LoginInterceptor          :38   [32m65383134895673345 [0;39m 从请求头里获取token：eyJhbGciOiJIUzI1NiJ9.eyJsb2dpbk5hbWUiOiJ0ZXN0IiwibmFtZSI6Iua1i-ivlSIsImlkIjo2MjkwOTYxNTc0MTk5LCJleHAiOjE2MjUxMzQyMDAsImlhdCI6MTYyNTA0NzgwMH0.BRW08DlSCynH3C8e8_R2dJ4pXAC0thchFGsL_AUuII8
2021-06-30 18:10:02.986 INFO  com.cq.wiki.interceptor.LoginInterceptor          :60   [32m65383134895673345 [0;39m token：eyJhbGciOiJIUzI1NiJ9.eyJsb2dpbk5hbWUiOiJ0ZXN0IiwibmFtZSI6Iua1i-ivlSIsImlkIjo2MjkwOTYxNTc0MTk5LCJleHAiOjE2MjUxMzQyMDAsImlhdCI6MTYyNTA0NzgwMH0.BRW08DlSCynH3C8e8_R2dJ4pXAC0thchFGsL_AUuII8验证通过
2021-06-30 18:10:03.001 INFO  com.cq.wiki.aspect.LogAspect                      :52   [32m65383339921641472 [0;39m ------------- 开始 -------------
2021-06-30 18:10:03.001 INFO  com.cq.wiki.aspect.LogAspect                      :53   [32m65383339921641472 [0;39m 请求地址: http://127.0.0.1:8880/user/list GET
2021-06-30 18:10:03.001 INFO  com.cq.wiki.aspect.LogAspect                      :54   [32m65383339921641472 [0;39m 类名方法: com.cq.wiki.controller.UserController.list
2021-06-30 18:10:03.001 INFO  com.cq.wiki.aspect.LogAspect                      :55   [32m65383339921641472 [0;39m 远程地址: 127.0.0.1
2021-06-30 18:10:03.002 INFO  com.cq.wiki.aspect.LogAspect                      :77   [32m65383339921641472 [0;39m 请求参数: [{"page":1,"size":10}]
2021-06-30 18:10:03.022 DEBUG c.cq.wiki.mapper.UserMapper.selectByExample_COUNT :137  [32m65383339921641472 [0;39m ==>  Preparing: SELECT count(0) FROM user
2021-06-30 18:10:03.023 DEBUG c.cq.wiki.mapper.UserMapper.selectByExample_COUNT :137  [32m65383339921641472 [0;39m ==> Parameters: 
2021-06-30 18:10:03.025 TRACE c.cq.wiki.mapper.UserMapper.selectByExample_COUNT :143  [32m65383339921641472 [0;39m <==    Columns: count(0)
2021-06-30 18:10:03.026 TRACE c.cq.wiki.mapper.UserMapper.selectByExample_COUNT :143  [32m65383339921641472 [0;39m <==        Row: 3
2021-06-30 18:10:03.026 DEBUG c.cq.wiki.mapper.UserMapper.selectByExample_COUNT :137  [32m65383339921641472 [0;39m <==      Total: 1
2021-06-30 18:10:03.029 DEBUG com.cq.wiki.mapper.UserMapper.selectByExample     :137  [32m65383339921641472 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user LIMIT ?
2021-06-30 18:10:03.030 DEBUG com.cq.wiki.mapper.UserMapper.selectByExample     :137  [32m65383339921641472 [0;39m ==> Parameters: 10(Integer)
2021-06-30 18:10:03.031 TRACE com.cq.wiki.mapper.UserMapper.selectByExample     :143  [32m65383339921641472 [0;39m <==    Columns: id, login_name, name, password
2021-06-30 18:10:03.031 TRACE com.cq.wiki.mapper.UserMapper.selectByExample     :143  [32m65383339921641472 [0;39m <==        Row: 6214409874794, chengqi0418, 程崎, 2f32b1a48b8bca0794a27782ce5eca6c
2021-06-30 18:10:03.031 TRACE com.cq.wiki.mapper.UserMapper.selectByExample     :143  [32m65383339921641472 [0;39m <==        Row: 6214732732183, hwh0717, 霍文慧, 79e63af7f217d11b7469265980f20156
2021-06-30 18:10:03.031 TRACE com.cq.wiki.mapper.UserMapper.selectByExample     :143  [32m65383339921641472 [0;39m <==        Row: 6290961574199, test, 测试, e70e2222a9d67c4f2eae107533359aa4
2021-06-30 18:10:03.031 DEBUG com.cq.wiki.mapper.UserMapper.selectByExample     :137  [32m65383339921641472 [0;39m <==      Total: 3
2021-06-30 18:10:03.033 INFO  com.cq.wiki.service.UserService                   :88   [32m65383339921641472 [0;39m 总行数：3
2021-06-30 18:10:03.033 INFO  com.cq.wiki.service.UserService                   :89   [32m65383339921641472 [0;39m 总页数：1
2021-06-30 18:10:03.038 INFO  com.cq.wiki.aspect.LogAspect                      :89   [32m65383339921641472 [0;39m 返回结果: {"content":{"list":[{"id":6214409874794,"loginName":"chengqi0418","name":"程崎"},{"id":6214732732183,"loginName":"hwh0717","name":"霍文慧"},{"id":6290961574199,"loginName":"test","name":"测试"}],"total":3},"success":true}
2021-06-30 18:10:03.038 INFO  com.cq.wiki.aspect.LogAspect                      :90   [32m65383339921641472 [0;39m ------------- 结束 耗时：37 ms -------------
2021-06-30 18:10:03.041 INFO  com.cq.wiki.interceptor.LoginInterceptor          :73   [32m65383339921641472 [0;39m ------------- LoginInterceptor 结束 耗时：68 ms -------------
2021-06-30 18:10:03.396 INFO  com.cq.wiki.aspect.LogAspect                      :52   [32m65383341578391554 [0;39m ------------- 开始 -------------
2021-06-30 18:10:03.396 INFO  com.cq.wiki.aspect.LogAspect                      :52   [32m65383341578391552 [0;39m ------------- 开始 -------------
2021-06-30 18:10:03.396 INFO  com.cq.wiki.aspect.LogAspect                      :52   [32m65383341578391553 [0;39m ------------- 开始 -------------
2021-06-30 18:10:03.397 INFO  com.cq.wiki.aspect.LogAspect                      :53   [32m65383341578391554 [0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2021-06-30 18:10:03.397 INFO  com.cq.wiki.aspect.LogAspect                      :53   [32m65383341578391552 [0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2021-06-30 18:10:03.397 INFO  com.cq.wiki.aspect.LogAspect                      :53   [32m65383341578391553 [0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2021-06-30 18:10:03.397 INFO  com.cq.wiki.aspect.LogAspect                      :54   [32m65383341578391554 [0;39m 类名方法: com.cq.wiki.controller.EbookSnapshotController.getStatistic
2021-06-30 18:10:03.397 INFO  com.cq.wiki.aspect.LogAspect                      :54   [32m65383341578391552 [0;39m 类名方法: com.cq.wiki.controller.CategoryController.allBook
2021-06-30 18:10:03.397 INFO  com.cq.wiki.aspect.LogAspect                      :54   [32m65383341578391553 [0;39m 类名方法: com.cq.wiki.controller.EbookSnapshotController.get30Statistic
2021-06-30 18:10:03.397 INFO  com.cq.wiki.aspect.LogAspect                      :55   [32m65383341578391554 [0;39m 远程地址: 127.0.0.1
2021-06-30 18:10:03.397 INFO  com.cq.wiki.aspect.LogAspect                      :55   [32m65383341578391552 [0;39m 远程地址: 127.0.0.1
2021-06-30 18:10:03.397 INFO  com.cq.wiki.aspect.LogAspect                      :55   [32m65383341578391553 [0;39m 远程地址: 127.0.0.1
2021-06-30 18:10:03.397 INFO  com.cq.wiki.aspect.LogAspect                      :77   [32m65383341578391554 [0;39m 请求参数: []
2021-06-30 18:10:03.397 INFO  com.cq.wiki.aspect.LogAspect                      :77   [32m65383341578391552 [0;39m 请求参数: []
2021-06-30 18:10:03.397 INFO  com.cq.wiki.aspect.LogAspect                      :77   [32m65383341578391553 [0;39m 请求参数: []
2021-06-30 18:10:03.398 DEBUG com.cq.wiki.mapper.CategoryMapper.selectByExample :137  [32m65383341578391552 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-06-30 18:10:03.398 DEBUG c.c.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m65383341578391553 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-06-30 18:10:03.398 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m65383341578391554 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-06-30 18:10:03.399 DEBUG com.cq.wiki.mapper.CategoryMapper.selectByExample :137  [32m65383341578391552 [0;39m ==> Parameters: 
2021-06-30 18:10:03.399 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m65383341578391554 [0;39m ==> Parameters: 
2021-06-30 18:10:03.399 DEBUG c.c.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m65383341578391553 [0;39m ==> Parameters: 
2021-06-30 18:10:03.401 DEBUG c.c.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m65383341578391553 [0;39m <==      Total: 0
2021-06-30 18:10:03.401 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383341578391552 [0;39m <==    Columns: id, parent, name, sort
2021-06-30 18:10:03.401 TRACE c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m65383341578391554 [0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-06-30 18:10:03.401 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383341578391552 [0;39m <==        Row: 100, 0, 前端开发, 100
2021-06-30 18:10:03.401 TRACE c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m65383341578391554 [0;39m <==        Row: 2021-06-30, 115, 43, 115, 43
2021-06-30 18:10:03.401 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383341578391552 [0;39m <==        Row: 101, 100, Vue, 101
2021-06-30 18:10:03.402 INFO  com.cq.wiki.aspect.LogAspect                      :89   [32m65383341578391553 [0;39m 返回结果: {"content":[],"success":true}
2021-06-30 18:10:03.402 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m65383341578391554 [0;39m <==      Total: 1
2021-06-30 18:10:03.402 INFO  com.cq.wiki.aspect.LogAspect                      :90   [32m65383341578391553 [0;39m ------------- 结束 耗时：6 ms -------------
2021-06-30 18:10:03.402 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383341578391552 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-06-30 18:10:03.402 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383341578391552 [0;39m <==        Row: 200, 0, Java, 200
2021-06-30 18:10:03.402 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383341578391552 [0;39m <==        Row: 201, 200, 基础应用, 201
2021-06-30 18:10:03.403 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383341578391552 [0;39m <==        Row: 202, 200, 框架开发, 202
2021-06-30 18:10:03.403 INFO  com.cq.wiki.aspect.LogAspect                      :89   [32m65383341578391554 [0;39m 返回结果: {"content":[{"date":1624982400000,"viewCount":115,"viewIncrease":115,"voteCount":43,"voteIncrease":43}],"success":true}
2021-06-30 18:10:03.403 INFO  com.cq.wiki.aspect.LogAspect                      :90   [32m65383341578391554 [0;39m ------------- 结束 耗时：7 ms -------------
2021-06-30 18:10:03.403 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383341578391552 [0;39m <==        Row: 300, 0, Python, 300
2021-06-30 18:10:03.403 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383341578391552 [0;39m <==        Row: 301, 300, 基础应用, 301
2021-06-30 18:10:03.404 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383341578391552 [0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-06-30 18:10:03.404 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383341578391552 [0;39m <==        Row: 400, 0, 数据库, 400
2021-06-30 18:10:03.405 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383341578391552 [0;39m <==        Row: 401, 400, MySQL, 401
2021-06-30 18:10:03.405 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383341578391552 [0;39m <==        Row: 402, 400, Oracle, 402
2021-06-30 18:10:03.406 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383341578391552 [0;39m <==        Row: 500, 0, 其他, 500
2021-06-30 18:10:03.406 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383341578391552 [0;39m <==        Row: 501, 500, 服务器, 501
2021-06-30 18:10:03.407 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383341578391552 [0;39m <==        Row: 502, 500, 开发工具, 502
2021-06-30 18:10:03.407 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383341578391552 [0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-06-30 18:10:03.408 DEBUG com.cq.wiki.mapper.CategoryMapper.selectByExample :137  [32m65383341578391552 [0;39m <==      Total: 16
2021-06-30 18:10:03.409 INFO  com.cq.wiki.aspect.LogAspect                      :89   [32m65383341578391552 [0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架开发","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":402,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-06-30 18:10:03.409 INFO  com.cq.wiki.aspect.LogAspect                      :90   [32m65383341578391552 [0;39m ------------- 结束 耗时：13 ms -------------
2021-06-30 18:10:04.201 INFO  com.cq.wiki.aspect.LogAspect                      :52   [32m65383344954806272 [0;39m ------------- 开始 -------------
2021-06-30 18:10:04.202 INFO  com.cq.wiki.aspect.LogAspect                      :53   [32m65383344954806272 [0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2021-06-30 18:10:04.202 INFO  com.cq.wiki.aspect.LogAspect                      :54   [32m65383344954806272 [0;39m 类名方法: com.cq.wiki.controller.CategoryController.allBook
2021-06-30 18:10:04.202 INFO  com.cq.wiki.aspect.LogAspect                      :55   [32m65383344954806272 [0;39m 远程地址: 127.0.0.1
2021-06-30 18:10:04.202 INFO  com.cq.wiki.aspect.LogAspect                      :77   [32m65383344954806272 [0;39m 请求参数: []
2021-06-30 18:10:04.203 DEBUG com.cq.wiki.mapper.CategoryMapper.selectByExample :137  [32m65383344954806272 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-06-30 18:10:04.203 DEBUG com.cq.wiki.mapper.CategoryMapper.selectByExample :137  [32m65383344954806272 [0;39m ==> Parameters: 
2021-06-30 18:10:04.205 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383344954806272 [0;39m <==    Columns: id, parent, name, sort
2021-06-30 18:10:04.206 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383344954806272 [0;39m <==        Row: 100, 0, 前端开发, 100
2021-06-30 18:10:04.207 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383344954806272 [0;39m <==        Row: 101, 100, Vue, 101
2021-06-30 18:10:04.208 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383344954806272 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-06-30 18:10:04.208 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383344954806272 [0;39m <==        Row: 200, 0, Java, 200
2021-06-30 18:10:04.208 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383344954806272 [0;39m <==        Row: 201, 200, 基础应用, 201
2021-06-30 18:10:04.208 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383344954806272 [0;39m <==        Row: 202, 200, 框架开发, 202
2021-06-30 18:10:04.209 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383344954806272 [0;39m <==        Row: 300, 0, Python, 300
2021-06-30 18:10:04.209 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383344954806272 [0;39m <==        Row: 301, 300, 基础应用, 301
2021-06-30 18:10:04.209 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383344954806272 [0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-06-30 18:10:04.210 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383344954806272 [0;39m <==        Row: 400, 0, 数据库, 400
2021-06-30 18:10:04.210 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383344954806272 [0;39m <==        Row: 401, 400, MySQL, 401
2021-06-30 18:10:04.210 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383344954806272 [0;39m <==        Row: 402, 400, Oracle, 402
2021-06-30 18:10:04.210 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383344954806272 [0;39m <==        Row: 500, 0, 其他, 500
2021-06-30 18:10:04.211 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383344954806272 [0;39m <==        Row: 501, 500, 服务器, 501
2021-06-30 18:10:04.211 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383344954806272 [0;39m <==        Row: 502, 500, 开发工具, 502
2021-06-30 18:10:04.211 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383344954806272 [0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-06-30 18:10:04.211 DEBUG com.cq.wiki.mapper.CategoryMapper.selectByExample :137  [32m65383344954806272 [0;39m <==      Total: 16
2021-06-30 18:10:04.213 INFO  com.cq.wiki.aspect.LogAspect                      :89   [32m65383344954806272 [0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架开发","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":402,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-06-30 18:10:04.213 INFO  com.cq.wiki.aspect.LogAspect                      :90   [32m65383344954806272 [0;39m ------------- 结束 耗时：12 ms -------------
2021-06-30 18:10:04.226 INFO  com.cq.wiki.interceptor.LoginInterceptor          :33   [32m65383313157787650 [0;39m ------------- LoginInterceptor 开始 -------------
2021-06-30 18:10:04.227 INFO  com.cq.wiki.interceptor.LoginInterceptor          :38   [32m65383313157787650 [0;39m 从请求头里获取token：null
2021-06-30 18:10:04.227 INFO  com.cq.wiki.interceptor.LoginInterceptor          :41   [32m65383313157787650 [0;39m 未映射到方法，跳过token验证
2021-06-30 18:10:04.227 INFO  com.cq.wiki.interceptor.LoginInterceptor          :73   [32m65383313157787650 [0;39m ------------- LoginInterceptor 结束 耗时：1 ms -------------
2021-06-30 18:10:04.232 INFO  com.cq.wiki.interceptor.LoginInterceptor          :33   [32m65383313157787648 [0;39m ------------- LoginInterceptor 开始 -------------
2021-06-30 18:10:04.233 INFO  com.cq.wiki.interceptor.LoginInterceptor          :38   [32m65383313157787648 [0;39m 从请求头里获取token：eyJhbGciOiJIUzI1NiJ9.eyJsb2dpbk5hbWUiOiJ0ZXN0IiwibmFtZSI6Iua1i-ivlSIsImlkIjo2MjkwOTYxNTc0MTk5LCJleHAiOjE2MjUxMzQyMDAsImlhdCI6MTYyNTA0NzgwMH0.BRW08DlSCynH3C8e8_R2dJ4pXAC0thchFGsL_AUuII8
2021-06-30 18:10:04.234 INFO  com.cq.wiki.interceptor.LoginInterceptor          :60   [32m65383313157787648 [0;39m token：eyJhbGciOiJIUzI1NiJ9.eyJsb2dpbk5hbWUiOiJ0ZXN0IiwibmFtZSI6Iua1i-ivlSIsImlkIjo2MjkwOTYxNTc0MTk5LCJleHAiOjE2MjUxMzQyMDAsImlhdCI6MTYyNTA0NzgwMH0.BRW08DlSCynH3C8e8_R2dJ4pXAC0thchFGsL_AUuII8验证通过
2021-06-30 18:10:04.242 INFO  com.cq.wiki.aspect.LogAspect                      :52   [32m65383345126772736 [0;39m ------------- 开始 -------------
2021-06-30 18:10:04.242 INFO  com.cq.wiki.aspect.LogAspect                      :53   [32m65383345126772736 [0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2021-06-30 18:10:04.242 INFO  com.cq.wiki.aspect.LogAspect                      :54   [32m65383345126772736 [0;39m 类名方法: com.cq.wiki.controller.EbookController.list
2021-06-30 18:10:04.242 INFO  com.cq.wiki.aspect.LogAspect                      :55   [32m65383345126772736 [0;39m 远程地址: 127.0.0.1
2021-06-30 18:10:04.245 INFO  com.cq.wiki.aspect.LogAspect                      :77   [32m65383345126772736 [0;39m 请求参数: [{"page":1,"size":10}]
2021-06-30 18:10:04.250 DEBUG c.cq.wiki.mapper.EbookMapper.selectByExample_COUNT:137  [32m65383345126772736 [0;39m ==>  Preparing: SELECT count(0) FROM ebook
2021-06-30 18:10:04.251 DEBUG c.cq.wiki.mapper.EbookMapper.selectByExample_COUNT:137  [32m65383345126772736 [0;39m ==> Parameters: 
2021-06-30 18:10:04.253 TRACE c.cq.wiki.mapper.EbookMapper.selectByExample_COUNT:143  [32m65383345126772736 [0;39m <==    Columns: count(0)
2021-06-30 18:10:04.253 TRACE c.cq.wiki.mapper.EbookMapper.selectByExample_COUNT:143  [32m65383345126772736 [0;39m <==        Row: 7
2021-06-30 18:10:04.253 DEBUG c.cq.wiki.mapper.EbookMapper.selectByExample_COUNT:137  [32m65383345126772736 [0;39m <==      Total: 1
2021-06-30 18:10:04.255 DEBUG com.cq.wiki.mapper.EbookMapper.selectByExample    :137  [32m65383345126772736 [0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?
2021-06-30 18:10:04.255 DEBUG com.cq.wiki.mapper.EbookMapper.selectByExample    :137  [32m65383345126772736 [0;39m ==> Parameters: 10(Integer)
2021-06-30 18:10:04.257 TRACE com.cq.wiki.mapper.EbookMapper.selectByExample    :143  [32m65383345126772736 [0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2021-06-30 18:10:04.257 TRACE com.cq.wiki.mapper.EbookMapper.selectByExample    :143  [32m65383345126772736 [0;39m <==        Row: 1, Spring Boot 入门教程, 200, 202, 零基础入门Java开发，企业级应用开发最佳首选框架, /image/cover1.png, 8, 107, 38
2021-06-30 18:10:04.258 TRACE com.cq.wiki.mapper.EbookMapper.selectByExample    :143  [32m65383345126772736 [0;39m <==        Row: 2, Vue 入门教程, 100, 101, 零基础入门Vue开发，企业级应用开发最佳首选框架, /image/cover2.png, 1, 0, 0
2021-06-30 18:10:04.258 TRACE com.cq.wiki.mapper.EbookMapper.selectByExample    :143  [32m65383345126772736 [0;39m <==        Row: 3, Python 入门教程, 300, 301, 零基础入门Python开发，企业级应用开发最佳首选框架, /image/cover1.png, 1, 7, 1
2021-06-30 18:10:04.258 TRACE com.cq.wiki.mapper.EbookMapper.selectByExample    :143  [32m65383345126772736 [0;39m <==        Row: 4, MySQL 入门教程, 400, 401, 零基础入门MySQL开发，企业级应用开发最佳首选框架, /image/cover2.png, 1, 0, 0
2021-06-30 18:10:04.258 TRACE com.cq.wiki.mapper.EbookMapper.selectByExample    :143  [32m65383345126772736 [0;39m <==        Row: 5, Oracle 入门教程, 400, 402, 零基础入门Oracle开发，企业级应用开发最佳首选框架, /image/cover1.png, 1, 0, 0
2021-06-30 18:10:04.258 TRACE com.cq.wiki.mapper.EbookMapper.selectByExample    :143  [32m65383345126772736 [0;39m <==        Row: 6065395476948, CSS入门教程, 100, 102, CSS从开发到入土, /image/cover2.png, 1, 1, 4
2021-06-30 18:10:04.259 TRACE com.cq.wiki.mapper.EbookMapper.selectByExample    :143  [32m65383345126772736 [0;39m <==        Row: 6074678257713, 阿里云服务器, 500, 501, 阿里云, /image/cover1.png, 1, 0, 0
2021-06-30 18:10:04.260 DEBUG com.cq.wiki.mapper.EbookMapper.selectByExample    :137  [32m65383345126772736 [0;39m <==      Total: 7
2021-06-30 18:10:04.261 INFO  com.cq.wiki.service.EbookService                  :46   [32m65383345126772736 [0;39m 总行数：7
2021-06-30 18:10:04.261 INFO  com.cq.wiki.service.EbookService                  :47   [32m65383345126772736 [0;39m 总页数：1
2021-06-30 18:10:04.268 INFO  com.cq.wiki.aspect.LogAspect                      :89   [32m65383345126772736 [0;39m 返回结果: {"content":{"list":[{"category1Id":200,"category2Id":202,"cover":"/image/cover1.png","description":"零基础入门Java开发，企业级应用开发最佳首选框架","docCount":8,"id":1,"name":"Spring Boot 入门教程","viewCount":107,"voteCount":38},{"category1Id":100,"category2Id":101,"cover":"/image/cover2.png","description":"零基础入门Vue开发，企业级应用开发最佳首选框架","docCount":1,"id":2,"name":"Vue 入门教程","viewCount":0,"voteCount":0},{"category1Id":300,"category2Id":301,"cover":"/image/cover1.png","description":"零基础入门Python开发，企业级应用开发最佳首选框架","docCount":1,"id":3,"name":"Python 入门教程","viewCount":7,"voteCount":1},{"category1Id":400,"category2Id":401,"cover":"/image/cover2.png","description":"零基础入门MySQL开发，企业级应用开发最佳首选框架","docCount":1,"id":4,"name":"MySQL 入门教程","viewCount":0,"voteCount":0},{"category1Id":400,"category2Id":402,"cover":"/image/cover1.png","description":"零基础入门Oracle开发，企业级应用开发最佳首选框架","docCount":1,"id":5,"name":"Oracle 入门教程","viewCount":0,"voteCount":0},{"category1Id":100,"category2Id":102,"cover":"/image/cover2.png","description":"CSS从开发到入土","docCount":1,"id":6065395476948,"name":"CSS入门教程","viewCount":1,"voteCount":4},{"category1Id":500,"category2Id":501,"cover":"/image/cover1.png","description":"阿里云","docCount":1,"id":6074678257713,"name":"阿里云服务器","viewCount":0,"voteCount":0}],"total":7},"success":true}
2021-06-30 18:10:04.269 INFO  com.cq.wiki.aspect.LogAspect                      :90   [32m65383345126772736 [0;39m ------------- 结束 耗时：27 ms -------------
2021-06-30 18:10:04.272 INFO  com.cq.wiki.interceptor.LoginInterceptor          :73   [32m65383345126772736 [0;39m ------------- LoginInterceptor 结束 耗时：39 ms -------------
2021-06-30 18:10:04.595 INFO  com.cq.wiki.aspect.LogAspect                      :52   [32m65383346607362048 [0;39m ------------- 开始 -------------
2021-06-30 18:10:04.595 INFO  com.cq.wiki.aspect.LogAspect                      :53   [32m65383346607362048 [0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2021-06-30 18:10:04.595 INFO  com.cq.wiki.aspect.LogAspect                      :54   [32m65383346607362048 [0;39m 类名方法: com.cq.wiki.controller.CategoryController.allBook
2021-06-30 18:10:04.596 INFO  com.cq.wiki.aspect.LogAspect                      :55   [32m65383346607362048 [0;39m 远程地址: 127.0.0.1
2021-06-30 18:10:04.596 INFO  com.cq.wiki.aspect.LogAspect                      :77   [32m65383346607362048 [0;39m 请求参数: []
2021-06-30 18:10:04.597 DEBUG com.cq.wiki.mapper.CategoryMapper.selectByExample :137  [32m65383346607362048 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-06-30 18:10:04.597 DEBUG com.cq.wiki.mapper.CategoryMapper.selectByExample :137  [32m65383346607362048 [0;39m ==> Parameters: 
2021-06-30 18:10:04.598 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383346607362048 [0;39m <==    Columns: id, parent, name, sort
2021-06-30 18:10:04.598 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383346607362048 [0;39m <==        Row: 100, 0, 前端开发, 100
2021-06-30 18:10:04.599 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383346607362048 [0;39m <==        Row: 101, 100, Vue, 101
2021-06-30 18:10:04.599 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383346607362048 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-06-30 18:10:04.600 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383346607362048 [0;39m <==        Row: 200, 0, Java, 200
2021-06-30 18:10:04.600 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383346607362048 [0;39m <==        Row: 201, 200, 基础应用, 201
2021-06-30 18:10:04.600 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383346607362048 [0;39m <==        Row: 202, 200, 框架开发, 202
2021-06-30 18:10:04.600 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383346607362048 [0;39m <==        Row: 300, 0, Python, 300
2021-06-30 18:10:04.600 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383346607362048 [0;39m <==        Row: 301, 300, 基础应用, 301
2021-06-30 18:10:04.600 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383346607362048 [0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-06-30 18:10:04.601 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383346607362048 [0;39m <==        Row: 400, 0, 数据库, 400
2021-06-30 18:10:04.601 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383346607362048 [0;39m <==        Row: 401, 400, MySQL, 401
2021-06-30 18:10:04.601 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383346607362048 [0;39m <==        Row: 402, 400, Oracle, 402
2021-06-30 18:10:04.601 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383346607362048 [0;39m <==        Row: 500, 0, 其他, 500
2021-06-30 18:10:04.601 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383346607362048 [0;39m <==        Row: 501, 500, 服务器, 501
2021-06-30 18:10:04.602 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383346607362048 [0;39m <==        Row: 502, 500, 开发工具, 502
2021-06-30 18:10:04.602 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383346607362048 [0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-06-30 18:10:04.602 DEBUG com.cq.wiki.mapper.CategoryMapper.selectByExample :137  [32m65383346607362048 [0;39m <==      Total: 16
2021-06-30 18:10:04.603 INFO  com.cq.wiki.aspect.LogAspect                      :89   [32m65383346607362048 [0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架开发","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":402,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-06-30 18:10:04.603 INFO  com.cq.wiki.aspect.LogAspect                      :90   [32m65383346607362048 [0;39m ------------- 结束 耗时：9 ms -------------
2021-06-30 18:10:05.018 INFO  com.cq.wiki.job.DocJob                            :31   [32m65383348381552640 [0;39m 更新电子书下的文档数据开始
2021-06-30 18:10:05.019 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65383348381552640 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-06-30 18:10:05.019 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65383348381552640 [0;39m ==> Parameters: 
2021-06-30 18:10:05.021 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65383348381552640 [0;39m <==    Updates: 7
2021-06-30 18:10:05.021 INFO  com.cq.wiki.job.DocJob                            :34   [32m65383348381552640 [0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2021-06-30 18:10:10.672 INFO  com.cq.wiki.aspect.LogAspect                      :52   [32m65383372096147456 [0;39m ------------- 开始 -------------
2021-06-30 18:10:10.672 INFO  com.cq.wiki.aspect.LogAspect                      :52   [32m65383372096147457 [0;39m ------------- 开始 -------------
2021-06-30 18:10:10.673 INFO  com.cq.wiki.aspect.LogAspect                      :53   [32m65383372096147457 [0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2021-06-30 18:10:10.673 INFO  com.cq.wiki.aspect.LogAspect                      :53   [32m65383372096147456 [0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2021-06-30 18:10:10.673 INFO  com.cq.wiki.aspect.LogAspect                      :54   [32m65383372096147457 [0;39m 类名方法: com.cq.wiki.controller.EbookSnapshotController.get30Statistic
2021-06-30 18:10:10.673 INFO  com.cq.wiki.aspect.LogAspect                      :54   [32m65383372096147456 [0;39m 类名方法: com.cq.wiki.controller.EbookSnapshotController.getStatistic
2021-06-30 18:10:10.674 INFO  com.cq.wiki.aspect.LogAspect                      :55   [32m65383372096147456 [0;39m 远程地址: 127.0.0.1
2021-06-30 18:10:10.674 INFO  com.cq.wiki.aspect.LogAspect                      :55   [32m65383372096147457 [0;39m 远程地址: 127.0.0.1
2021-06-30 18:10:10.674 INFO  com.cq.wiki.aspect.LogAspect                      :77   [32m65383372096147456 [0;39m 请求参数: []
2021-06-30 18:10:10.674 INFO  com.cq.wiki.aspect.LogAspect                      :77   [32m65383372096147457 [0;39m 请求参数: []
2021-06-30 18:10:10.674 INFO  com.cq.wiki.aspect.LogAspect                      :52   [32m65383372104536064 [0;39m ------------- 开始 -------------
2021-06-30 18:10:10.675 INFO  com.cq.wiki.aspect.LogAspect                      :53   [32m65383372104536064 [0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2021-06-30 18:10:10.675 DEBUG c.c.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m65383372096147457 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-06-30 18:10:10.675 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m65383372096147456 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-06-30 18:10:10.675 INFO  com.cq.wiki.aspect.LogAspect                      :54   [32m65383372104536064 [0;39m 类名方法: com.cq.wiki.controller.CategoryController.allBook
2021-06-30 18:10:10.675 INFO  com.cq.wiki.aspect.LogAspect                      :55   [32m65383372104536064 [0;39m 远程地址: 127.0.0.1
2021-06-30 18:10:10.675 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m65383372096147456 [0;39m ==> Parameters: 
2021-06-30 18:10:10.675 DEBUG c.c.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m65383372096147457 [0;39m ==> Parameters: 
2021-06-30 18:10:10.676 INFO  com.cq.wiki.aspect.LogAspect                      :77   [32m65383372104536064 [0;39m 请求参数: []
2021-06-30 18:10:10.677 DEBUG c.c.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m65383372096147457 [0;39m <==      Total: 0
2021-06-30 18:10:10.677 TRACE c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m65383372096147456 [0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-06-30 18:10:10.677 DEBUG com.cq.wiki.mapper.CategoryMapper.selectByExample :137  [32m65383372104536064 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-06-30 18:10:10.679 TRACE c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m65383372096147456 [0;39m <==        Row: 2021-06-30, 115, 43, 115, 43
2021-06-30 18:10:10.679 DEBUG com.cq.wiki.mapper.CategoryMapper.selectByExample :137  [32m65383372104536064 [0;39m ==> Parameters: 
2021-06-30 18:10:10.679 INFO  com.cq.wiki.aspect.LogAspect                      :89   [32m65383372096147457 [0;39m 返回结果: {"content":[],"success":true}
2021-06-30 18:10:10.679 INFO  com.cq.wiki.aspect.LogAspect                      :90   [32m65383372096147457 [0;39m ------------- 结束 耗时：7 ms -------------
2021-06-30 18:10:10.680 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m65383372096147456 [0;39m <==      Total: 1
2021-06-30 18:10:10.681 INFO  com.cq.wiki.aspect.LogAspect                      :89   [32m65383372096147456 [0;39m 返回结果: {"content":[{"date":1624982400000,"viewCount":115,"viewIncrease":115,"voteCount":43,"voteIncrease":43}],"success":true}
2021-06-30 18:10:10.681 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383372104536064 [0;39m <==    Columns: id, parent, name, sort
2021-06-30 18:10:10.681 INFO  com.cq.wiki.aspect.LogAspect                      :90   [32m65383372096147456 [0;39m ------------- 结束 耗时：9 ms -------------
2021-06-30 18:10:10.681 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383372104536064 [0;39m <==        Row: 100, 0, 前端开发, 100
2021-06-30 18:10:10.682 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383372104536064 [0;39m <==        Row: 101, 100, Vue, 101
2021-06-30 18:10:10.682 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383372104536064 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-06-30 18:10:10.683 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383372104536064 [0;39m <==        Row: 200, 0, Java, 200
2021-06-30 18:10:10.683 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383372104536064 [0;39m <==        Row: 201, 200, 基础应用, 201
2021-06-30 18:10:10.684 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383372104536064 [0;39m <==        Row: 202, 200, 框架开发, 202
2021-06-30 18:10:10.684 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383372104536064 [0;39m <==        Row: 300, 0, Python, 300
2021-06-30 18:10:10.685 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383372104536064 [0;39m <==        Row: 301, 300, 基础应用, 301
2021-06-30 18:10:10.685 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383372104536064 [0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-06-30 18:10:10.686 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383372104536064 [0;39m <==        Row: 400, 0, 数据库, 400
2021-06-30 18:10:10.686 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383372104536064 [0;39m <==        Row: 401, 400, MySQL, 401
2021-06-30 18:10:10.686 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383372104536064 [0;39m <==        Row: 402, 400, Oracle, 402
2021-06-30 18:10:10.686 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383372104536064 [0;39m <==        Row: 500, 0, 其他, 500
2021-06-30 18:10:10.687 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383372104536064 [0;39m <==        Row: 501, 500, 服务器, 501
2021-06-30 18:10:10.687 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383372104536064 [0;39m <==        Row: 502, 500, 开发工具, 502
2021-06-30 18:10:10.687 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383372104536064 [0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-06-30 18:10:10.687 DEBUG com.cq.wiki.mapper.CategoryMapper.selectByExample :137  [32m65383372104536064 [0;39m <==      Total: 16
2021-06-30 18:10:10.688 INFO  com.cq.wiki.aspect.LogAspect                      :89   [32m65383372104536064 [0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架开发","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":402,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-06-30 18:10:10.688 INFO  com.cq.wiki.aspect.LogAspect                      :90   [32m65383372104536064 [0;39m ------------- 结束 耗时：14 ms -------------
2021-06-30 18:10:35.007 INFO  com.cq.wiki.job.DocJob                            :31   [32m65383474164535296 [0;39m 更新电子书下的文档数据开始
2021-06-30 18:10:35.007 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65383474164535296 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-06-30 18:10:35.007 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65383474164535296 [0;39m ==> Parameters: 
2021-06-30 18:10:35.007 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65383474164535296 [0;39m <==    Updates: 7
2021-06-30 18:10:35.007 INFO  com.cq.wiki.job.DocJob                            :34   [32m65383474164535296 [0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2021-06-30 18:11:00.006 INFO  com.cq.wiki.job.EbookSnapshotJob                  :32   [32m65383579017940992 [0;39m 生成今日电子书快照开始
2021-06-30 18:11:00.006 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65383579017940992 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-06-30 18:11:00.006 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65383579017940992 [0;39m ==> Parameters: 
2021-06-30 18:11:00.006 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65383579017940992 [0;39m <==    Updates: 0
2021-06-30 18:11:00.006 INFO  com.cq.wiki.job.EbookSnapshotJob                  :35   [32m65383579017940992 [0;39m 生成今日电子书快照结束，耗时：0毫秒
2021-06-30 18:11:05.013 INFO  com.cq.wiki.job.DocJob                            :31   [32m65383600018821120 [0;39m 更新电子书下的文档数据开始
2021-06-30 18:11:05.013 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65383600018821120 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-06-30 18:11:05.013 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65383600018821120 [0;39m ==> Parameters: 
2021-06-30 18:11:05.013 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65383600018821120 [0;39m <==    Updates: 7
2021-06-30 18:11:05.013 INFO  com.cq.wiki.job.DocJob                            :34   [32m65383600018821120 [0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2021-06-30 18:11:35.008 INFO  com.cq.wiki.job.DocJob                            :31   [32m65383725826969600 [0;39m 更新电子书下的文档数据开始
2021-06-30 18:11:35.008 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65383725826969600 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-06-30 18:11:35.008 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65383725826969600 [0;39m ==> Parameters: 
2021-06-30 18:11:35.008 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65383725826969600 [0;39m <==    Updates: 7
2021-06-30 18:11:35.008 INFO  com.cq.wiki.job.DocJob                            :34   [32m65383725826969600 [0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2021-06-30 18:11:42.625 INFO  com.cq.wiki.aspect.LogAspect                      :52   [32m65383757774983169 [0;39m ------------- 开始 -------------
2021-06-30 18:11:42.625 INFO  com.cq.wiki.aspect.LogAspect                      :52   [32m65383757774983168 [0;39m ------------- 开始 -------------
2021-06-30 18:11:42.625 INFO  com.cq.wiki.aspect.LogAspect                      :53   [32m65383757774983169 [0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2021-06-30 18:11:42.625 INFO  com.cq.wiki.aspect.LogAspect                      :54   [32m65383757774983169 [0;39m 类名方法: com.cq.wiki.controller.EbookSnapshotController.get30Statistic
2021-06-30 18:11:42.625 INFO  com.cq.wiki.aspect.LogAspect                      :53   [32m65383757774983168 [0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2021-06-30 18:11:42.625 INFO  com.cq.wiki.aspect.LogAspect                      :55   [32m65383757774983169 [0;39m 远程地址: 127.0.0.1
2021-06-30 18:11:42.625 INFO  com.cq.wiki.aspect.LogAspect                      :54   [32m65383757774983168 [0;39m 类名方法: com.cq.wiki.controller.EbookSnapshotController.getStatistic
2021-06-30 18:11:42.625 INFO  com.cq.wiki.aspect.LogAspect                      :77   [32m65383757774983169 [0;39m 请求参数: []
2021-06-30 18:11:42.625 INFO  com.cq.wiki.aspect.LogAspect                      :55   [32m65383757774983168 [0;39m 远程地址: 127.0.0.1
2021-06-30 18:11:42.625 INFO  com.cq.wiki.aspect.LogAspect                      :77   [32m65383757774983168 [0;39m 请求参数: []
2021-06-30 18:11:42.625 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m65383757774983168 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-06-30 18:11:42.625 DEBUG c.c.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m65383757774983169 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-06-30 18:11:42.625 DEBUG c.c.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m65383757774983169 [0;39m ==> Parameters: 
2021-06-30 18:11:42.625 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m65383757774983168 [0;39m ==> Parameters: 
2021-06-30 18:11:42.625 TRACE c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m65383757774983168 [0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-06-30 18:11:42.625 DEBUG c.c.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m65383757774983169 [0;39m <==      Total: 0
2021-06-30 18:11:42.625 TRACE c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m65383757774983168 [0;39m <==        Row: 2021-06-30, 115, 43, 115, 43
2021-06-30 18:11:42.625 INFO  com.cq.wiki.aspect.LogAspect                      :89   [32m65383757774983169 [0;39m 返回结果: {"content":[],"success":true}
2021-06-30 18:11:42.625 INFO  com.cq.wiki.aspect.LogAspect                      :90   [32m65383757774983169 [0;39m ------------- 结束 耗时：0 ms -------------
2021-06-30 18:11:42.625 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m65383757774983168 [0;39m <==      Total: 1
2021-06-30 18:11:42.625 INFO  com.cq.wiki.aspect.LogAspect                      :89   [32m65383757774983168 [0;39m 返回结果: {"content":[{"date":1624982400000,"viewCount":115,"viewIncrease":115,"voteCount":43,"voteIncrease":43}],"success":true}
2021-06-30 18:11:42.625 INFO  com.cq.wiki.aspect.LogAspect                      :90   [32m65383757774983168 [0;39m ------------- 结束 耗时：0 ms -------------
2021-06-30 18:12:00.009 INFO  com.cq.wiki.job.EbookSnapshotJob                  :32   [32m65383830688763904 [0;39m 生成今日电子书快照开始
2021-06-30 18:12:00.009 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65383830688763904 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-06-30 18:12:00.009 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65383830688763904 [0;39m ==> Parameters: 
2021-06-30 18:12:00.009 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65383830688763904 [0;39m <==    Updates: 0
2021-06-30 18:12:00.009 INFO  com.cq.wiki.job.EbookSnapshotJob                  :35   [32m65383830688763904 [0;39m 生成今日电子书快照结束，耗时：0毫秒
2021-06-30 18:12:05.009 INFO  com.cq.wiki.job.DocJob                            :31   [32m65383851660283904 [0;39m 更新电子书下的文档数据开始
2021-06-30 18:12:05.009 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65383851660283904 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-06-30 18:12:05.009 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65383851660283904 [0;39m ==> Parameters: 
2021-06-30 18:12:05.009 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65383851660283904 [0;39m <==    Updates: 7
2021-06-30 18:12:05.009 INFO  com.cq.wiki.job.DocJob                            :34   [32m65383851660283904 [0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2021-06-30 18:12:11.532 INFO  com.cq.wiki.websocket.WebSocketServer             :41   [32m65383345126772736 [0;39m 连接关闭，token：RbylkKZLeA，session id：1！当前连接数：0
2021-06-30 18:12:12.860 INFO  com.cq.wiki.websocket.WebSocketServer             :32   [32m65383346607362048 [0;39m 有新连接：token：3nykFi6Fzq，session id：2，当前连接数：1
2021-06-30 18:12:13.426 INFO  com.cq.wiki.aspect.LogAspect                      :52   [32m65383886963740672 [0;39m ------------- 开始 -------------
2021-06-30 18:12:13.427 INFO  com.cq.wiki.aspect.LogAspect                      :53   [32m65383886963740672 [0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2021-06-30 18:12:13.427 INFO  com.cq.wiki.aspect.LogAspect                      :54   [32m65383886963740672 [0;39m 类名方法: com.cq.wiki.controller.EbookSnapshotController.getStatistic
2021-06-30 18:12:13.428 INFO  com.cq.wiki.aspect.LogAspect                      :55   [32m65383886963740672 [0;39m 远程地址: 127.0.0.1
2021-06-30 18:12:13.428 INFO  com.cq.wiki.aspect.LogAspect                      :52   [32m65383886972129280 [0;39m ------------- 开始 -------------
2021-06-30 18:12:13.428 INFO  com.cq.wiki.aspect.LogAspect                      :77   [32m65383886963740672 [0;39m 请求参数: []
2021-06-30 18:12:13.428 INFO  com.cq.wiki.aspect.LogAspect                      :52   [32m65383886972129281 [0;39m ------------- 开始 -------------
2021-06-30 18:12:13.428 INFO  com.cq.wiki.aspect.LogAspect                      :53   [32m65383886972129280 [0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2021-06-30 18:12:13.428 INFO  com.cq.wiki.aspect.LogAspect                      :53   [32m65383886972129281 [0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2021-06-30 18:12:13.428 INFO  com.cq.wiki.aspect.LogAspect                      :54   [32m65383886972129280 [0;39m 类名方法: com.cq.wiki.controller.CategoryController.allBook
2021-06-30 18:12:13.428 INFO  com.cq.wiki.aspect.LogAspect                      :54   [32m65383886972129281 [0;39m 类名方法: com.cq.wiki.controller.EbookSnapshotController.get30Statistic
2021-06-30 18:12:13.429 INFO  com.cq.wiki.aspect.LogAspect                      :55   [32m65383886972129281 [0;39m 远程地址: 127.0.0.1
2021-06-30 18:12:13.429 INFO  com.cq.wiki.aspect.LogAspect                      :55   [32m65383886972129280 [0;39m 远程地址: 127.0.0.1
2021-06-30 18:12:13.429 INFO  com.cq.wiki.aspect.LogAspect                      :77   [32m65383886972129281 [0;39m 请求参数: []
2021-06-30 18:12:13.429 INFO  com.cq.wiki.aspect.LogAspect                      :77   [32m65383886972129280 [0;39m 请求参数: []
2021-06-30 18:12:13.429 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m65383886963740672 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-06-30 18:12:13.430 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m65383886963740672 [0;39m ==> Parameters: 
2021-06-30 18:12:13.430 DEBUG c.c.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m65383886972129281 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-06-30 18:12:13.430 DEBUG com.cq.wiki.mapper.CategoryMapper.selectByExample :137  [32m65383886972129280 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-06-30 18:12:13.430 DEBUG c.c.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m65383886972129281 [0;39m ==> Parameters: 
2021-06-30 18:12:13.430 DEBUG com.cq.wiki.mapper.CategoryMapper.selectByExample :137  [32m65383886972129280 [0;39m ==> Parameters: 
2021-06-30 18:12:13.432 TRACE c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m65383886963740672 [0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-06-30 18:12:13.432 DEBUG c.c.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m65383886972129281 [0;39m <==      Total: 0
2021-06-30 18:12:13.432 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383886972129280 [0;39m <==    Columns: id, parent, name, sort
2021-06-30 18:12:13.432 TRACE c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m65383886963740672 [0;39m <==        Row: 2021-06-30, 115, 43, 115, 43
2021-06-30 18:12:13.432 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383886972129280 [0;39m <==        Row: 100, 0, 前端开发, 100
2021-06-30 18:12:13.432 INFO  com.cq.wiki.aspect.LogAspect                      :89   [32m65383886972129281 [0;39m 返回结果: {"content":[],"success":true}
2021-06-30 18:12:13.432 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383886972129280 [0;39m <==        Row: 101, 100, Vue, 101
2021-06-30 18:12:13.433 INFO  com.cq.wiki.aspect.LogAspect                      :90   [32m65383886972129281 [0;39m ------------- 结束 耗时：5 ms -------------
2021-06-30 18:12:13.433 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m65383886963740672 [0;39m <==      Total: 1
2021-06-30 18:12:13.433 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383886972129280 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-06-30 18:12:13.433 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383886972129280 [0;39m <==        Row: 200, 0, Java, 200
2021-06-30 18:12:13.433 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383886972129280 [0;39m <==        Row: 201, 200, 基础应用, 201
2021-06-30 18:12:13.433 INFO  com.cq.wiki.aspect.LogAspect                      :89   [32m65383886963740672 [0;39m 返回结果: {"content":[{"date":1624982400000,"viewCount":115,"viewIncrease":115,"voteCount":43,"voteIncrease":43}],"success":true}
2021-06-30 18:12:13.433 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383886972129280 [0;39m <==        Row: 202, 200, 框架开发, 202
2021-06-30 18:12:13.434 INFO  com.cq.wiki.aspect.LogAspect                      :90   [32m65383886963740672 [0;39m ------------- 结束 耗时：8 ms -------------
2021-06-30 18:12:13.434 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383886972129280 [0;39m <==        Row: 300, 0, Python, 300
2021-06-30 18:12:13.434 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383886972129280 [0;39m <==        Row: 301, 300, 基础应用, 301
2021-06-30 18:12:13.434 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383886972129280 [0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-06-30 18:12:13.434 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383886972129280 [0;39m <==        Row: 400, 0, 数据库, 400
2021-06-30 18:12:13.435 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383886972129280 [0;39m <==        Row: 401, 400, MySQL, 401
2021-06-30 18:12:13.435 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383886972129280 [0;39m <==        Row: 402, 400, Oracle, 402
2021-06-30 18:12:13.435 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383886972129280 [0;39m <==        Row: 500, 0, 其他, 500
2021-06-30 18:12:13.435 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383886972129280 [0;39m <==        Row: 501, 500, 服务器, 501
2021-06-30 18:12:13.436 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383886972129280 [0;39m <==        Row: 502, 500, 开发工具, 502
2021-06-30 18:12:13.436 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65383886972129280 [0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-06-30 18:12:13.436 DEBUG com.cq.wiki.mapper.CategoryMapper.selectByExample :137  [32m65383886972129280 [0;39m <==      Total: 16
2021-06-30 18:12:13.437 INFO  com.cq.wiki.aspect.LogAspect                      :89   [32m65383886972129280 [0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架开发","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":402,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-06-30 18:12:13.437 INFO  com.cq.wiki.aspect.LogAspect                      :90   [32m65383886972129280 [0;39m ------------- 结束 耗时：9 ms -------------
2021-06-30 18:12:35.007 INFO  com.cq.wiki.job.DocJob                            :31   [32m65383977481015296 [0;39m 更新电子书下的文档数据开始
2021-06-30 18:12:35.007 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65383977481015296 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-06-30 18:12:35.007 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65383977481015296 [0;39m ==> Parameters: 
2021-06-30 18:12:35.007 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65383977481015296 [0;39m <==    Updates: 7
2021-06-30 18:12:35.007 INFO  com.cq.wiki.job.DocJob                            :34   [32m65383977481015296 [0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2021-06-30 18:13:00.020 INFO  com.cq.wiki.job.EbookSnapshotJob                  :32   [32m65384082393141248 [0;39m 生成今日电子书快照开始
2021-06-30 18:13:00.020 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65384082393141248 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-06-30 18:13:00.020 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65384082393141248 [0;39m ==> Parameters: 
2021-06-30 18:13:00.020 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65384082393141248 [0;39m <==    Updates: 0
2021-06-30 18:13:00.020 INFO  com.cq.wiki.job.EbookSnapshotJob                  :35   [32m65384082393141248 [0;39m 生成今日电子书快照结束，耗时：0毫秒
2021-06-30 18:13:05.013 INFO  com.cq.wiki.job.DocJob                            :31   [32m65384103335301120 [0;39m 更新电子书下的文档数据开始
2021-06-30 18:13:05.013 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65384103335301120 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-06-30 18:13:05.013 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65384103335301120 [0;39m ==> Parameters: 
2021-06-30 18:13:05.013 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65384103335301120 [0;39m <==    Updates: 7
2021-06-30 18:13:05.013 INFO  com.cq.wiki.job.DocJob                            :34   [32m65384103335301120 [0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2021-06-30 18:13:35.013 INFO  com.cq.wiki.job.DocJob                            :31   [32m65384229164421120 [0;39m 更新电子书下的文档数据开始
2021-06-30 18:13:35.013 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65384229164421120 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-06-30 18:13:35.013 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65384229164421120 [0;39m ==> Parameters: 
2021-06-30 18:13:35.013 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65384229164421120 [0;39m <==    Updates: 7
2021-06-30 18:13:35.013 INFO  com.cq.wiki.job.DocJob                            :34   [32m65384229164421120 [0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2021-06-30 18:14:00.009 INFO  com.cq.wiki.job.EbookSnapshotJob                  :32   [32m65384334005243904 [0;39m 生成今日电子书快照开始
2021-06-30 18:14:00.009 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65384334005243904 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-06-30 18:14:00.009 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65384334005243904 [0;39m ==> Parameters: 
2021-06-30 18:14:00.009 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65384334005243904 [0;39m <==    Updates: 0
2021-06-30 18:14:00.009 INFO  com.cq.wiki.job.EbookSnapshotJob                  :35   [32m65384334005243904 [0;39m 生成今日电子书快照结束，耗时：0毫秒
2021-06-30 18:14:05.013 INFO  com.cq.wiki.job.DocJob                            :31   [32m65384354993541120 [0;39m 更新电子书下的文档数据开始
2021-06-30 18:14:05.013 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65384354993541120 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-06-30 18:14:05.013 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65384354993541120 [0;39m ==> Parameters: 
2021-06-30 18:14:05.013 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65384354993541120 [0;39m <==    Updates: 7
2021-06-30 18:14:05.013 INFO  com.cq.wiki.job.DocJob                            :34   [32m65384354993541120 [0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2021-06-30 18:14:41.423 INFO  org.hibernate.validator.internal.util.Version     :21   [32m                  [0;39m HV000001: Hibernate Validator 6.1.5.Final
2021-06-30 18:14:41.438 INFO  com.cq.wiki.config.WikiApplication                :55   [32m                  [0;39m Starting WikiApplication on LAPTOP-T0P8U4U3 with PID 5456 (D:\IdeaProjects\wiki\target\classes started by 程崎 in D:\IdeaProjects\wiki)
2021-06-30 18:14:41.454 INFO  com.cq.wiki.config.WikiApplication                :651  [32m                  [0;39m No active profile set, falling back to default profiles: default
2021-06-30 18:14:41.485 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :225  [32m                  [0;39m Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2021-06-30 18:14:41.485 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :225  [32m                  [0;39m For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2021-06-30 18:14:42.807 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :108  [32m                  [0;39m Tomcat initialized with port(s): 8880 (http)
2021-06-30 18:14:42.807 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Initializing ProtocolHandler ["http-nio-8880"]
2021-06-30 18:14:42.807 INFO  org.apache.catalina.core.StandardService          :173  [32m                  [0;39m Starting service [Tomcat]
2021-06-30 18:14:42.807 INFO  org.apache.catalina.core.StandardEngine           :173  [32m                  [0;39m Starting Servlet engine: [Apache Tomcat/9.0.37]
2021-06-30 18:14:42.807 INFO  org.apache.catalina.core.AprLifecycleListener     :173  [32m                  [0;39m An older version [1.2.14] of the Apache Tomcat Native library is installed, while Tomcat recommends a minimum version of [1.2.23]
2021-06-30 18:14:42.807 INFO  org.apache.catalina.core.AprLifecycleListener     :173  [32m                  [0;39m Loaded Apache Tomcat Native library [1.2.14] using APR version [1.6.2].
2021-06-30 18:14:42.807 INFO  org.apache.catalina.core.AprLifecycleListener     :173  [32m                  [0;39m APR capabilities: IPv6 [true], sendfile [true], accept filters [false], random [true].
2021-06-30 18:14:42.807 INFO  org.apache.catalina.core.AprLifecycleListener     :173  [32m                  [0;39m APR/OpenSSL configuration: useAprConnector [false], useOpenSSL [true]
2021-06-30 18:14:43.829 INFO  org.apache.catalina.core.AprLifecycleListener     :173  [32m                  [0;39m OpenSSL successfully initialized [OpenSSL 1.0.2l  25 May 2017]
2021-06-30 18:14:43.922 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring embedded WebApplicationContext
2021-06-30 18:14:43.922 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext    :285  [32m                  [0;39m Root WebApplicationContext: initialization completed in 2437 ms
2021-06-30 18:14:44.951 INFO  o.s.scheduling.concurrent.ThreadPoolTaskExecutor  :181  [32m                  [0;39m Initializing ExecutorService 'applicationTaskExecutor'
2021-06-30 18:14:44.998 INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer    :58   [32m                  [0;39m LiveReload server is running on port 35729
2021-06-30 18:14:45.201 INFO  o.s.scheduling.concurrent.ThreadPoolTaskScheduler :181  [32m                  [0;39m Initializing ExecutorService 'taskScheduler'
2021-06-30 18:14:45.310 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Starting ProtocolHandler ["http-nio-8880"]
2021-06-30 18:14:45.326 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :220  [32m                  [0;39m Tomcat started on port(s): 8880 (http) with context path ''
2021-06-30 18:14:45.592 INFO  com.cq.wiki.config.WikiApplication                :61   [32m                  [0;39m Started WikiApplication in 4.477 seconds (JVM running for 5.034)
2021-06-30 18:14:45.592 INFO  com.cq.wiki.config.WikiApplication                :26   [32m                  [0;39m 启动成功！！
2021-06-30 18:14:45.592 INFO  com.cq.wiki.config.WikiApplication                :27   [32m                  [0;39m 地址: 	http://127.0.0.1:8880
2021-06-30 18:15:00.022 INFO  com.cq.wiki.job.EbookSnapshotJob                  :32   [32m65384585718009856 [0;39m 生成今日电子书快照开始
2021-06-30 18:15:00.022 INFO  com.zaxxer.hikari.HikariDataSource                :110  [32m65384585718009856 [0;39m HikariPool-1 - Starting...
2021-06-30 18:15:00.397 INFO  com.zaxxer.hikari.HikariDataSource                :123  [32m65384585718009856 [0;39m HikariPool-1 - Start completed.
2021-06-30 18:15:00.397 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65384585718009856 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-06-30 18:15:00.428 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65384585718009856 [0;39m ==> Parameters: 
2021-06-30 18:15:00.428 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65384585718009856 [0;39m <==    Updates: 7
2021-06-30 18:15:00.428 INFO  com.cq.wiki.job.EbookSnapshotJob                  :35   [32m65384585718009856 [0;39m 生成今日电子书快照结束，耗时：406毫秒
2021-06-30 18:15:05.011 INFO  com.cq.wiki.job.DocJob                            :31   [32m65384606643392512 [0;39m 更新电子书下的文档数据开始
2021-06-30 18:15:05.011 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65384606643392512 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-06-30 18:15:05.011 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65384606643392512 [0;39m ==> Parameters: 
2021-06-30 18:15:05.011 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65384606643392512 [0;39m <==    Updates: 7
2021-06-30 18:15:05.011 INFO  com.cq.wiki.job.DocJob                            :34   [32m65384606643392512 [0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2021-06-30 18:15:21.351 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring DispatcherServlet 'dispatcherServlet'
2021-06-30 18:15:21.351 INFO  org.springframework.web.servlet.DispatcherServlet :525  [32m                  [0;39m Initializing Servlet 'dispatcherServlet'
2021-06-30 18:15:21.361 INFO  org.springframework.web.servlet.DispatcherServlet :547  [32m                  [0;39m Completed initialization in 8 ms
2021-06-30 18:15:21.400 INFO  com.cq.wiki.websocket.WebSocketServer             :32   [32m                  [0;39m 有新连接：token：U4mI1JA2Po，session id：0，当前连接数：1
2021-06-30 18:15:21.915 INFO  com.cq.wiki.aspect.LogAspect                      :52   [32m65384677539713025 [0;39m ------------- 开始 -------------
2021-06-30 18:15:21.915 INFO  com.cq.wiki.aspect.LogAspect                      :52   [32m65384677539713024 [0;39m ------------- 开始 -------------
2021-06-30 18:15:21.915 INFO  com.cq.wiki.aspect.LogAspect                      :52   [32m65384677539713026 [0;39m ------------- 开始 -------------
2021-06-30 18:15:21.916 INFO  com.cq.wiki.aspect.LogAspect                      :53   [32m65384677539713026 [0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2021-06-30 18:15:21.916 INFO  com.cq.wiki.aspect.LogAspect                      :53   [32m65384677539713025 [0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2021-06-30 18:15:21.916 INFO  com.cq.wiki.aspect.LogAspect                      :53   [32m65384677539713024 [0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2021-06-30 18:15:21.917 INFO  com.cq.wiki.aspect.LogAspect                      :54   [32m65384677539713026 [0;39m 类名方法: com.cq.wiki.controller.CategoryController.allBook
2021-06-30 18:15:21.917 INFO  com.cq.wiki.aspect.LogAspect                      :54   [32m65384677539713025 [0;39m 类名方法: com.cq.wiki.controller.EbookSnapshotController.getStatistic
2021-06-30 18:15:21.917 INFO  com.cq.wiki.aspect.LogAspect                      :54   [32m65384677539713024 [0;39m 类名方法: com.cq.wiki.controller.EbookSnapshotController.get30Statistic
2021-06-30 18:15:21.917 INFO  com.cq.wiki.aspect.LogAspect                      :55   [32m65384677539713024 [0;39m 远程地址: 127.0.0.1
2021-06-30 18:15:21.917 INFO  com.cq.wiki.aspect.LogAspect                      :55   [32m65384677539713025 [0;39m 远程地址: 127.0.0.1
2021-06-30 18:15:21.917 INFO  com.cq.wiki.aspect.LogAspect                      :55   [32m65384677539713026 [0;39m 远程地址: 127.0.0.1
2021-06-30 18:15:21.953 INFO  com.cq.wiki.aspect.LogAspect                      :77   [32m65384677539713025 [0;39m 请求参数: []
2021-06-30 18:15:21.953 INFO  com.cq.wiki.aspect.LogAspect                      :77   [32m65384677539713026 [0;39m 请求参数: []
2021-06-30 18:15:21.953 INFO  com.cq.wiki.aspect.LogAspect                      :77   [32m65384677539713024 [0;39m 请求参数: []
2021-06-30 18:15:21.959 DEBUG c.c.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m65384677539713024 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-06-30 18:15:21.959 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m65384677539713025 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-06-30 18:15:21.959 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m65384677539713025 [0;39m ==> Parameters: 
2021-06-30 18:15:21.959 DEBUG c.c.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m65384677539713024 [0;39m ==> Parameters: 
2021-06-30 18:15:21.976 DEBUG com.cq.wiki.mapper.CategoryMapper.selectByExample :137  [32m65384677539713026 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-06-30 18:15:21.977 DEBUG com.cq.wiki.mapper.CategoryMapper.selectByExample :137  [32m65384677539713026 [0;39m ==> Parameters: 
2021-06-30 18:15:21.978 TRACE c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m65384677539713025 [0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-06-30 18:15:21.978 TRACE c.c.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m65384677539713024 [0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-06-30 18:15:21.979 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65384677539713026 [0;39m <==    Columns: id, parent, name, sort
2021-06-30 18:15:21.979 TRACE c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m65384677539713025 [0;39m <==        Row: 2021-06-29, 0, 0, 0, 0
2021-06-30 18:15:21.979 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65384677539713026 [0;39m <==        Row: 100, 0, 前端开发, 100
2021-06-30 18:15:21.979 TRACE c.c.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m65384677539713024 [0;39m <==        Row: 2021-06-29, 0, 0
2021-06-30 18:15:21.981 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65384677539713026 [0;39m <==        Row: 101, 100, Vue, 101
2021-06-30 18:15:21.981 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65384677539713026 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-06-30 18:15:21.982 TRACE c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m65384677539713025 [0;39m <==        Row: 2021-06-30, 115, 43, 115, 43
2021-06-30 18:15:21.982 DEBUG c.c.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m65384677539713024 [0;39m <==      Total: 1
2021-06-30 18:15:21.982 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65384677539713026 [0;39m <==        Row: 200, 0, Java, 200
2021-06-30 18:15:21.983 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m65384677539713025 [0;39m <==      Total: 2
2021-06-30 18:15:21.982 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65384677539713026 [0;39m <==        Row: 201, 200, 基础应用, 201
2021-06-30 18:15:21.983 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65384677539713026 [0;39m <==        Row: 202, 200, 框架开发, 202
2021-06-30 18:15:21.984 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65384677539713026 [0;39m <==        Row: 300, 0, Python, 300
2021-06-30 18:15:21.985 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65384677539713026 [0;39m <==        Row: 301, 300, 基础应用, 301
2021-06-30 18:15:21.986 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65384677539713026 [0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-06-30 18:15:21.986 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65384677539713026 [0;39m <==        Row: 400, 0, 数据库, 400
2021-06-30 18:15:21.987 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65384677539713026 [0;39m <==        Row: 401, 400, MySQL, 401
2021-06-30 18:15:21.989 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65384677539713026 [0;39m <==        Row: 402, 400, Oracle, 402
2021-06-30 18:15:21.990 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65384677539713026 [0;39m <==        Row: 500, 0, 其他, 500
2021-06-30 18:15:21.991 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65384677539713026 [0;39m <==        Row: 501, 500, 服务器, 501
2021-06-30 18:15:21.991 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65384677539713026 [0;39m <==        Row: 502, 500, 开发工具, 502
2021-06-30 18:15:21.992 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65384677539713026 [0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-06-30 18:15:21.995 DEBUG com.cq.wiki.mapper.CategoryMapper.selectByExample :137  [32m65384677539713026 [0;39m <==      Total: 16
2021-06-30 18:15:22.011 INFO  com.cq.wiki.aspect.LogAspect                      :89   [32m65384677539713026 [0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架开发","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":402,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-06-30 18:15:22.012 INFO  com.cq.wiki.aspect.LogAspect                      :90   [32m65384677539713026 [0;39m ------------- 结束 耗时：98 ms -------------
2021-06-30 18:15:22.014 INFO  com.cq.wiki.aspect.LogAspect                      :89   [32m65384677539713024 [0;39m 返回结果: {"content":[{"date":1624896000000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0}],"success":true}
2021-06-30 18:15:22.014 INFO  com.cq.wiki.aspect.LogAspect                      :89   [32m65384677539713025 [0;39m 返回结果: {"content":[{"date":1624896000000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1624982400000,"viewCount":115,"viewIncrease":115,"voteCount":43,"voteIncrease":43}],"success":true}
2021-06-30 18:15:22.014 INFO  com.cq.wiki.aspect.LogAspect                      :90   [32m65384677539713024 [0;39m ------------- 结束 耗时：100 ms -------------
2021-06-30 18:15:22.014 INFO  com.cq.wiki.aspect.LogAspect                      :90   [32m65384677539713025 [0;39m ------------- 结束 耗时：100 ms -------------
2021-06-30 18:15:35.019 INFO  com.cq.wiki.job.DocJob                            :31   [32m65384732506066944 [0;39m 更新电子书下的文档数据开始
2021-06-30 18:15:35.019 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65384732506066944 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-06-30 18:15:35.019 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65384732506066944 [0;39m ==> Parameters: 
2021-06-30 18:15:35.019 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65384732506066944 [0;39m <==    Updates: 7
2021-06-30 18:15:35.023 INFO  com.cq.wiki.job.DocJob                            :34   [32m65384732506066944 [0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2021-06-30 18:16:00.022 INFO  com.cq.wiki.job.EbookSnapshotJob                  :32   [32m65384837376249856 [0;39m 生成今日电子书快照开始
2021-06-30 18:16:00.022 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65384837376249856 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-06-30 18:16:00.022 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65384837376249856 [0;39m ==> Parameters: 
2021-06-30 18:16:00.022 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65384837376249856 [0;39m <==    Updates: 0
2021-06-30 18:16:00.022 INFO  com.cq.wiki.job.EbookSnapshotJob                  :35   [32m65384837376249856 [0;39m 生成今日电子书快照结束，耗时：0毫秒
2021-06-30 18:16:05.012 INFO  com.cq.wiki.job.DocJob                            :31   [32m65384858305826816 [0;39m 更新电子书下的文档数据开始
2021-06-30 18:16:05.012 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65384858305826816 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-06-30 18:16:05.012 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65384858305826816 [0;39m ==> Parameters: 
2021-06-30 18:16:05.012 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65384858305826816 [0;39m <==    Updates: 7
2021-06-30 18:16:05.012 INFO  com.cq.wiki.job.DocJob                            :34   [32m65384858305826816 [0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2021-06-30 18:16:35.006 INFO  com.cq.wiki.job.DocJob                            :31   [32m65384984109780992 [0;39m 更新电子书下的文档数据开始
2021-06-30 18:16:35.006 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65384984109780992 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-06-30 18:16:35.006 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65384984109780992 [0;39m ==> Parameters: 
2021-06-30 18:16:35.006 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65384984109780992 [0;39m <==    Updates: 7
2021-06-30 18:16:35.006 INFO  com.cq.wiki.job.DocJob                            :34   [32m65384984109780992 [0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2021-06-30 18:17:00.020 INFO  com.cq.wiki.job.EbookSnapshotJob                  :32   [32m65385089026101248 [0;39m 生成今日电子书快照开始
2021-06-30 18:17:00.020 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65385089026101248 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-06-30 18:17:00.020 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65385089026101248 [0;39m ==> Parameters: 
2021-06-30 18:17:00.020 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65385089026101248 [0;39m <==    Updates: 0
2021-06-30 18:17:00.020 INFO  com.cq.wiki.job.EbookSnapshotJob                  :35   [32m65385089026101248 [0;39m 生成今日电子书快照结束，耗时：0毫秒
2021-06-30 18:17:05.011 INFO  com.cq.wiki.job.DocJob                            :31   [32m65385109959872512 [0;39m 更新电子书下的文档数据开始
2021-06-30 18:17:05.011 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65385109959872512 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-06-30 18:17:05.011 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65385109959872512 [0;39m ==> Parameters: 
2021-06-30 18:17:05.011 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65385109959872512 [0;39m <==    Updates: 7
2021-06-30 18:17:05.011 INFO  com.cq.wiki.job.DocJob                            :34   [32m65385109959872512 [0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2021-06-30 18:17:35.009 INFO  com.cq.wiki.job.DocJob                            :31   [32m65385235780603904 [0;39m 更新电子书下的文档数据开始
2021-06-30 18:17:35.009 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65385235780603904 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-06-30 18:17:35.009 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65385235780603904 [0;39m ==> Parameters: 
2021-06-30 18:17:35.009 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65385235780603904 [0;39m <==    Updates: 7
2021-06-30 18:17:35.009 INFO  com.cq.wiki.job.DocJob                            :34   [32m65385235780603904 [0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2021-06-30 18:18:00.011 INFO  com.cq.wiki.job.EbookSnapshotJob                  :32   [32m65385340646592512 [0;39m 生成今日电子书快照开始
2021-06-30 18:18:00.011 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65385340646592512 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-06-30 18:18:00.011 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65385340646592512 [0;39m ==> Parameters: 
2021-06-30 18:18:00.011 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65385340646592512 [0;39m <==    Updates: 0
2021-06-30 18:18:00.011 INFO  com.cq.wiki.job.EbookSnapshotJob                  :35   [32m65385340646592512 [0;39m 生成今日电子书快照结束，耗时：0毫秒
2021-06-30 18:18:05.007 INFO  com.cq.wiki.job.DocJob                            :31   [32m65385361601335296 [0;39m 更新电子书下的文档数据开始
2021-06-30 18:18:05.007 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65385361601335296 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-06-30 18:18:05.007 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65385361601335296 [0;39m ==> Parameters: 
2021-06-30 18:18:05.007 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65385361601335296 [0;39m <==    Updates: 7
2021-06-30 18:18:05.007 INFO  com.cq.wiki.job.DocJob                            :34   [32m65385361601335296 [0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2021-06-30 18:18:35.022 INFO  com.cq.wiki.job.DocJob                            :31   [32m65385487493369856 [0;39m 更新电子书下的文档数据开始
2021-06-30 18:18:35.022 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65385487493369856 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-06-30 18:18:35.022 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65385487493369856 [0;39m ==> Parameters: 
2021-06-30 18:18:35.022 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65385487493369856 [0;39m <==    Updates: 7
2021-06-30 18:18:35.022 INFO  com.cq.wiki.job.DocJob                            :34   [32m65385487493369856 [0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2021-06-30 18:19:00.011 INFO  com.cq.wiki.job.EbookSnapshotJob                  :32   [32m65385592304832512 [0;39m 生成今日电子书快照开始
2021-06-30 18:19:00.011 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65385592304832512 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-06-30 18:19:00.011 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65385592304832512 [0;39m ==> Parameters: 
2021-06-30 18:19:00.011 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65385592304832512 [0;39m <==    Updates: 0
2021-06-30 18:19:00.011 INFO  com.cq.wiki.job.EbookSnapshotJob                  :35   [32m65385592304832512 [0;39m 生成今日电子书快照结束，耗时：0毫秒
2021-06-30 18:19:05.004 INFO  com.cq.wiki.job.DocJob                            :31   [32m65385613246992384 [0;39m 更新电子书下的文档数据开始
2021-06-30 18:19:05.004 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65385613246992384 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-06-30 18:19:05.004 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65385613246992384 [0;39m ==> Parameters: 
2021-06-30 18:19:05.004 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65385613246992384 [0;39m <==    Updates: 7
2021-06-30 18:19:05.004 INFO  com.cq.wiki.job.DocJob                            :34   [32m65385613246992384 [0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2021-06-30 18:19:35.020 INFO  com.cq.wiki.job.DocJob                            :31   [32m65385739143221248 [0;39m 更新电子书下的文档数据开始
2021-06-30 18:19:35.020 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65385739143221248 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-06-30 18:19:35.020 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65385739143221248 [0;39m ==> Parameters: 
2021-06-30 18:19:35.020 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65385739143221248 [0;39m <==    Updates: 7
2021-06-30 18:19:35.020 INFO  com.cq.wiki.job.DocJob                            :34   [32m65385739143221248 [0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2021-06-30 18:20:00.018 INFO  com.cq.wiki.job.EbookSnapshotJob                  :32   [32m65385843992432640 [0;39m 生成今日电子书快照开始
2021-06-30 18:20:00.018 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65385843992432640 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-06-30 18:20:00.018 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65385843992432640 [0;39m ==> Parameters: 
2021-06-30 18:20:00.018 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65385843992432640 [0;39m <==    Updates: 0
2021-06-30 18:20:00.018 INFO  com.cq.wiki.job.EbookSnapshotJob                  :35   [32m65385843992432640 [0;39m 生成今日电子书快照结束，耗时：0毫秒
2021-06-30 18:20:05.011 INFO  com.cq.wiki.job.DocJob                            :31   [32m65385864934592512 [0;39m 更新电子书下的文档数据开始
2021-06-30 18:20:05.011 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65385864934592512 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-06-30 18:20:05.011 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65385864934592512 [0;39m ==> Parameters: 
2021-06-30 18:20:05.011 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65385864934592512 [0;39m <==    Updates: 7
2021-06-30 18:20:05.011 INFO  com.cq.wiki.job.DocJob                            :34   [32m65385864934592512 [0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2021-06-30 18:20:35.011 INFO  com.cq.wiki.job.DocJob                            :31   [32m65385990763712512 [0;39m 更新电子书下的文档数据开始
2021-06-30 18:20:35.011 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65385990763712512 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-06-30 18:20:35.011 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65385990763712512 [0;39m ==> Parameters: 
2021-06-30 18:20:35.011 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65385990763712512 [0;39m <==    Updates: 7
2021-06-30 18:20:35.011 INFO  com.cq.wiki.job.DocJob                            :34   [32m65385990763712512 [0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2021-06-30 18:20:43.846 INFO  com.cq.wiki.interceptor.LoginInterceptor          :33   [32m                  [0;39m ------------- LoginInterceptor 开始 -------------
2021-06-30 18:20:43.847 INFO  com.cq.wiki.interceptor.LoginInterceptor          :38   [32m                  [0;39m 从请求头里获取token：eyJhbGciOiJIUzI1NiJ9.eyJsb2dpbk5hbWUiOiJ0ZXN0IiwibmFtZSI6Iua1i-ivlSIsImlkIjo2MjkwOTYxNTc0MTk5LCJleHAiOjE2MjUxMzQyMDAsImlhdCI6MTYyNTA0NzgwMH0.BRW08DlSCynH3C8e8_R2dJ4pXAC0thchFGsL_AUuII8
2021-06-30 18:20:43.880 INFO  com.cq.wiki.interceptor.LoginInterceptor          :60   [32m                  [0;39m token：eyJhbGciOiJIUzI1NiJ9.eyJsb2dpbk5hbWUiOiJ0ZXN0IiwibmFtZSI6Iua1i-ivlSIsImlkIjo2MjkwOTYxNTc0MTk5LCJleHAiOjE2MjUxMzQyMDAsImlhdCI6MTYyNTA0NzgwMH0.BRW08DlSCynH3C8e8_R2dJ4pXAC0thchFGsL_AUuII8验证通过
2021-06-30 18:20:43.938 INFO  com.cq.wiki.aspect.LogAspect                      :52   [32m65386028206264320 [0;39m ------------- 开始 -------------
2021-06-30 18:20:43.939 INFO  com.cq.wiki.aspect.LogAspect                      :53   [32m65386028206264320 [0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2021-06-30 18:20:43.939 INFO  com.cq.wiki.aspect.LogAspect                      :54   [32m65386028206264320 [0;39m 类名方法: com.cq.wiki.controller.EbookController.list
2021-06-30 18:20:43.939 INFO  com.cq.wiki.aspect.LogAspect                      :55   [32m65386028206264320 [0;39m 远程地址: 127.0.0.1
2021-06-30 18:20:43.941 INFO  com.cq.wiki.aspect.LogAspect                      :77   [32m65386028206264320 [0;39m 请求参数: [{"categoryId2":101,"page":1,"size":1000}]
2021-06-30 18:20:44.091 DEBUG c.cq.wiki.mapper.EbookMapper.selectByExample_COUNT:137  [32m65386028206264320 [0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-06-30 18:20:44.092 DEBUG c.cq.wiki.mapper.EbookMapper.selectByExample_COUNT:137  [32m65386028206264320 [0;39m ==> Parameters: 101(Long)
2021-06-30 18:20:44.093 TRACE c.cq.wiki.mapper.EbookMapper.selectByExample_COUNT:143  [32m65386028206264320 [0;39m <==    Columns: count(0)
2021-06-30 18:20:44.093 TRACE c.cq.wiki.mapper.EbookMapper.selectByExample_COUNT:143  [32m65386028206264320 [0;39m <==        Row: 1
2021-06-30 18:20:44.094 DEBUG c.cq.wiki.mapper.EbookMapper.selectByExample_COUNT:137  [32m65386028206264320 [0;39m <==      Total: 1
2021-06-30 18:20:44.096 DEBUG com.cq.wiki.mapper.EbookMapper.selectByExample    :137  [32m65386028206264320 [0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2021-06-30 18:20:44.096 DEBUG com.cq.wiki.mapper.EbookMapper.selectByExample    :137  [32m65386028206264320 [0;39m ==> Parameters: 101(Long), 1000(Integer)
2021-06-30 18:20:44.097 TRACE com.cq.wiki.mapper.EbookMapper.selectByExample    :143  [32m65386028206264320 [0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2021-06-30 18:20:44.098 TRACE com.cq.wiki.mapper.EbookMapper.selectByExample    :143  [32m65386028206264320 [0;39m <==        Row: 2, Vue 入门教程, 100, 101, 零基础入门Vue开发，企业级应用开发最佳首选框架, /image/cover2.png, 1, 0, 0
2021-06-30 18:20:44.098 DEBUG com.cq.wiki.mapper.EbookMapper.selectByExample    :137  [32m65386028206264320 [0;39m <==      Total: 1
2021-06-30 18:20:44.100 INFO  com.cq.wiki.service.EbookService                  :46   [32m65386028206264320 [0;39m 总行数：1
2021-06-30 18:20:44.100 INFO  com.cq.wiki.service.EbookService                  :47   [32m65386028206264320 [0;39m 总页数：1
2021-06-30 18:20:44.108 INFO  com.cq.wiki.aspect.LogAspect                      :89   [32m65386028206264320 [0;39m 返回结果: {"content":{"list":[{"category1Id":100,"category2Id":101,"cover":"/image/cover2.png","description":"零基础入门Vue开发，企业级应用开发最佳首选框架","docCount":1,"id":2,"name":"Vue 入门教程","viewCount":0,"voteCount":0}],"total":1},"success":true}
2021-06-30 18:20:44.109 INFO  com.cq.wiki.aspect.LogAspect                      :90   [32m65386028206264320 [0;39m ------------- 结束 耗时：171 ms -------------
2021-06-30 18:20:44.111 INFO  com.cq.wiki.interceptor.LoginInterceptor          :73   [32m65386028206264320 [0;39m ------------- LoginInterceptor 结束 耗时：264 ms -------------
2021-06-30 18:20:44.658 INFO  com.cq.wiki.interceptor.LoginInterceptor          :33   [32m                  [0;39m ------------- LoginInterceptor 开始 -------------
2021-06-30 18:20:44.659 INFO  com.cq.wiki.interceptor.LoginInterceptor          :38   [32m                  [0;39m 从请求头里获取token：eyJhbGciOiJIUzI1NiJ9.eyJsb2dpbk5hbWUiOiJ0ZXN0IiwibmFtZSI6Iua1i-ivlSIsImlkIjo2MjkwOTYxNTc0MTk5LCJleHAiOjE2MjUxMzQyMDAsImlhdCI6MTYyNTA0NzgwMH0.BRW08DlSCynH3C8e8_R2dJ4pXAC0thchFGsL_AUuII8
2021-06-30 18:20:44.659 INFO  com.cq.wiki.interceptor.LoginInterceptor          :60   [32m                  [0;39m token：eyJhbGciOiJIUzI1NiJ9.eyJsb2dpbk5hbWUiOiJ0ZXN0IiwibmFtZSI6Iua1i-ivlSIsImlkIjo2MjkwOTYxNTc0MTk5LCJleHAiOjE2MjUxMzQyMDAsImlhdCI6MTYyNTA0NzgwMH0.BRW08DlSCynH3C8e8_R2dJ4pXAC0thchFGsL_AUuII8验证通过
2021-06-30 18:20:44.660 INFO  com.cq.wiki.aspect.LogAspect                      :52   [32m65386031234551808 [0;39m ------------- 开始 -------------
2021-06-30 18:20:44.660 INFO  com.cq.wiki.aspect.LogAspect                      :53   [32m65386031234551808 [0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2021-06-30 18:20:44.661 INFO  com.cq.wiki.aspect.LogAspect                      :54   [32m65386031234551808 [0;39m 类名方法: com.cq.wiki.controller.EbookController.list
2021-06-30 18:20:44.661 INFO  com.cq.wiki.aspect.LogAspect                      :55   [32m65386031234551808 [0;39m 远程地址: 127.0.0.1
2021-06-30 18:20:44.661 INFO  com.cq.wiki.aspect.LogAspect                      :77   [32m65386031234551808 [0;39m 请求参数: [{"categoryId2":102,"page":1,"size":1000}]
2021-06-30 18:20:44.663 DEBUG c.cq.wiki.mapper.EbookMapper.selectByExample_COUNT:137  [32m65386031234551808 [0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-06-30 18:20:44.664 DEBUG c.cq.wiki.mapper.EbookMapper.selectByExample_COUNT:137  [32m65386031234551808 [0;39m ==> Parameters: 102(Long)
2021-06-30 18:20:44.665 TRACE c.cq.wiki.mapper.EbookMapper.selectByExample_COUNT:143  [32m65386031234551808 [0;39m <==    Columns: count(0)
2021-06-30 18:20:44.665 TRACE c.cq.wiki.mapper.EbookMapper.selectByExample_COUNT:143  [32m65386031234551808 [0;39m <==        Row: 1
2021-06-30 18:20:44.666 DEBUG c.cq.wiki.mapper.EbookMapper.selectByExample_COUNT:137  [32m65386031234551808 [0;39m <==      Total: 1
2021-06-30 18:20:44.666 DEBUG com.cq.wiki.mapper.EbookMapper.selectByExample    :137  [32m65386031234551808 [0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2021-06-30 18:20:44.667 DEBUG com.cq.wiki.mapper.EbookMapper.selectByExample    :137  [32m65386031234551808 [0;39m ==> Parameters: 102(Long), 1000(Integer)
2021-06-30 18:20:44.668 TRACE com.cq.wiki.mapper.EbookMapper.selectByExample    :143  [32m65386031234551808 [0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2021-06-30 18:20:44.668 TRACE com.cq.wiki.mapper.EbookMapper.selectByExample    :143  [32m65386031234551808 [0;39m <==        Row: 6065395476948, CSS入门教程, 100, 102, CSS从开发到入土, /image/cover2.png, 1, 1, 4
2021-06-30 18:20:44.668 DEBUG com.cq.wiki.mapper.EbookMapper.selectByExample    :137  [32m65386031234551808 [0;39m <==      Total: 1
2021-06-30 18:20:44.669 INFO  com.cq.wiki.service.EbookService                  :46   [32m65386031234551808 [0;39m 总行数：1
2021-06-30 18:20:44.669 INFO  com.cq.wiki.service.EbookService                  :47   [32m65386031234551808 [0;39m 总页数：1
2021-06-30 18:20:44.669 INFO  com.cq.wiki.aspect.LogAspect                      :89   [32m65386031234551808 [0;39m 返回结果: {"content":{"list":[{"category1Id":100,"category2Id":102,"cover":"/image/cover2.png","description":"CSS从开发到入土","docCount":1,"id":6065395476948,"name":"CSS入门教程","viewCount":1,"voteCount":4}],"total":1},"success":true}
2021-06-30 18:20:44.669 INFO  com.cq.wiki.aspect.LogAspect                      :90   [32m65386031234551808 [0;39m ------------- 结束 耗时：9 ms -------------
2021-06-30 18:20:44.670 INFO  com.cq.wiki.interceptor.LoginInterceptor          :73   [32m65386031234551808 [0;39m ------------- LoginInterceptor 结束 耗时：11 ms -------------
2021-06-30 18:20:45.431 INFO  com.cq.wiki.interceptor.LoginInterceptor          :33   [32m                  [0;39m ------------- LoginInterceptor 开始 -------------
2021-06-30 18:20:45.431 INFO  com.cq.wiki.interceptor.LoginInterceptor          :38   [32m                  [0;39m 从请求头里获取token：eyJhbGciOiJIUzI1NiJ9.eyJsb2dpbk5hbWUiOiJ0ZXN0IiwibmFtZSI6Iua1i-ivlSIsImlkIjo2MjkwOTYxNTc0MTk5LCJleHAiOjE2MjUxMzQyMDAsImlhdCI6MTYyNTA0NzgwMH0.BRW08DlSCynH3C8e8_R2dJ4pXAC0thchFGsL_AUuII8
2021-06-30 18:20:45.432 INFO  com.cq.wiki.interceptor.LoginInterceptor          :60   [32m                  [0;39m token：eyJhbGciOiJIUzI1NiJ9.eyJsb2dpbk5hbWUiOiJ0ZXN0IiwibmFtZSI6Iua1i-ivlSIsImlkIjo2MjkwOTYxNTc0MTk5LCJleHAiOjE2MjUxMzQyMDAsImlhdCI6MTYyNTA0NzgwMH0.BRW08DlSCynH3C8e8_R2dJ4pXAC0thchFGsL_AUuII8验证通过
2021-06-30 18:20:45.433 INFO  com.cq.wiki.aspect.LogAspect                      :52   [32m65386034476748800 [0;39m ------------- 开始 -------------
2021-06-30 18:20:45.433 INFO  com.cq.wiki.aspect.LogAspect                      :53   [32m65386034476748800 [0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2021-06-30 18:20:45.433 INFO  com.cq.wiki.aspect.LogAspect                      :54   [32m65386034476748800 [0;39m 类名方法: com.cq.wiki.controller.EbookController.list
2021-06-30 18:20:45.433 INFO  com.cq.wiki.aspect.LogAspect                      :55   [32m65386034476748800 [0;39m 远程地址: 127.0.0.1
2021-06-30 18:20:45.433 INFO  com.cq.wiki.aspect.LogAspect                      :77   [32m65386034476748800 [0;39m 请求参数: [{"categoryId2":101,"page":1,"size":1000}]
2021-06-30 18:20:45.435 DEBUG c.cq.wiki.mapper.EbookMapper.selectByExample_COUNT:137  [32m65386034476748800 [0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2021-06-30 18:20:45.436 DEBUG c.cq.wiki.mapper.EbookMapper.selectByExample_COUNT:137  [32m65386034476748800 [0;39m ==> Parameters: 101(Long)
2021-06-30 18:20:45.437 TRACE c.cq.wiki.mapper.EbookMapper.selectByExample_COUNT:143  [32m65386034476748800 [0;39m <==    Columns: count(0)
2021-06-30 18:20:45.437 TRACE c.cq.wiki.mapper.EbookMapper.selectByExample_COUNT:143  [32m65386034476748800 [0;39m <==        Row: 1
2021-06-30 18:20:45.437 DEBUG c.cq.wiki.mapper.EbookMapper.selectByExample_COUNT:137  [32m65386034476748800 [0;39m <==      Total: 1
2021-06-30 18:20:45.438 DEBUG com.cq.wiki.mapper.EbookMapper.selectByExample    :137  [32m65386034476748800 [0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2021-06-30 18:20:45.438 DEBUG com.cq.wiki.mapper.EbookMapper.selectByExample    :137  [32m65386034476748800 [0;39m ==> Parameters: 101(Long), 1000(Integer)
2021-06-30 18:20:45.439 TRACE com.cq.wiki.mapper.EbookMapper.selectByExample    :143  [32m65386034476748800 [0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2021-06-30 18:20:45.439 TRACE com.cq.wiki.mapper.EbookMapper.selectByExample    :143  [32m65386034476748800 [0;39m <==        Row: 2, Vue 入门教程, 100, 101, 零基础入门Vue开发，企业级应用开发最佳首选框架, /image/cover2.png, 1, 0, 0
2021-06-30 18:20:45.439 DEBUG com.cq.wiki.mapper.EbookMapper.selectByExample    :137  [32m65386034476748800 [0;39m <==      Total: 1
2021-06-30 18:20:45.440 INFO  com.cq.wiki.service.EbookService                  :46   [32m65386034476748800 [0;39m 总行数：1
2021-06-30 18:20:45.440 INFO  com.cq.wiki.service.EbookService                  :47   [32m65386034476748800 [0;39m 总页数：1
2021-06-30 18:20:45.440 INFO  com.cq.wiki.aspect.LogAspect                      :89   [32m65386034476748800 [0;39m 返回结果: {"content":{"list":[{"category1Id":100,"category2Id":101,"cover":"/image/cover2.png","description":"零基础入门Vue开发，企业级应用开发最佳首选框架","docCount":1,"id":2,"name":"Vue 入门教程","viewCount":0,"voteCount":0}],"total":1},"success":true}
2021-06-30 18:20:45.440 INFO  com.cq.wiki.aspect.LogAspect                      :90   [32m65386034476748800 [0;39m ------------- 结束 耗时：7 ms -------------
2021-06-30 18:20:45.441 INFO  com.cq.wiki.interceptor.LoginInterceptor          :73   [32m65386034476748800 [0;39m ------------- LoginInterceptor 结束 耗时：10 ms -------------
2021-06-30 18:20:46.388 INFO  com.cq.wiki.interceptor.LoginInterceptor          :33   [32m                  [0;39m ------------- LoginInterceptor 开始 -------------
2021-06-30 18:20:46.388 INFO  com.cq.wiki.interceptor.LoginInterceptor          :38   [32m                  [0;39m 从请求头里获取token：null
2021-06-30 18:20:46.388 INFO  com.cq.wiki.interceptor.LoginInterceptor          :41   [32m                  [0;39m 未映射到方法，跳过token验证
2021-06-30 18:20:46.389 INFO  com.cq.wiki.interceptor.LoginInterceptor          :73   [32m                  [0;39m ------------- LoginInterceptor 结束 耗时：1 ms -------------
2021-06-30 18:20:46.395 INFO  com.cq.wiki.interceptor.LoginInterceptor          :33   [32m65384677539713024 [0;39m ------------- LoginInterceptor 开始 -------------
2021-06-30 18:20:46.395 INFO  com.cq.wiki.interceptor.LoginInterceptor          :38   [32m65384677539713024 [0;39m 从请求头里获取token：eyJhbGciOiJIUzI1NiJ9.eyJsb2dpbk5hbWUiOiJ0ZXN0IiwibmFtZSI6Iua1i-ivlSIsImlkIjo2MjkwOTYxNTc0MTk5LCJleHAiOjE2MjUxMzQyMDAsImlhdCI6MTYyNTA0NzgwMH0.BRW08DlSCynH3C8e8_R2dJ4pXAC0thchFGsL_AUuII8
2021-06-30 18:20:46.395 INFO  com.cq.wiki.interceptor.LoginInterceptor          :60   [32m65384677539713024 [0;39m token：eyJhbGciOiJIUzI1NiJ9.eyJsb2dpbk5hbWUiOiJ0ZXN0IiwibmFtZSI6Iua1i-ivlSIsImlkIjo2MjkwOTYxNTc0MTk5LCJleHAiOjE2MjUxMzQyMDAsImlhdCI6MTYyNTA0NzgwMH0.BRW08DlSCynH3C8e8_R2dJ4pXAC0thchFGsL_AUuII8验证通过
2021-06-30 18:20:46.397 INFO  com.cq.wiki.aspect.LogAspect                      :52   [32m65386038520057856 [0;39m ------------- 开始 -------------
2021-06-30 18:20:46.397 INFO  com.cq.wiki.aspect.LogAspect                      :53   [32m65386038520057856 [0;39m 请求地址: http://127.0.0.1:8880/doc/all/2 GET
2021-06-30 18:20:46.397 INFO  com.cq.wiki.aspect.LogAspect                      :54   [32m65386038520057856 [0;39m 类名方法: com.cq.wiki.controller.DocController.allBook
2021-06-30 18:20:46.397 INFO  com.cq.wiki.aspect.LogAspect                      :55   [32m65386038520057856 [0;39m 远程地址: 127.0.0.1
2021-06-30 18:20:46.397 INFO  com.cq.wiki.aspect.LogAspect                      :77   [32m65386038520057856 [0;39m 请求参数: [2]
2021-06-30 18:20:46.402 DEBUG com.cq.wiki.mapper.DocMapper.selectByExample      :137  [32m65386038520057856 [0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2021-06-30 18:20:46.403 DEBUG com.cq.wiki.mapper.DocMapper.selectByExample      :137  [32m65386038520057856 [0;39m ==> Parameters: 2(Long)
2021-06-30 18:20:46.404 TRACE com.cq.wiki.mapper.DocMapper.selectByExample      :143  [32m65386038520057856 [0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2021-06-30 18:20:46.404 TRACE com.cq.wiki.mapper.DocMapper.selectByExample      :143  [32m65386038520057856 [0;39m <==        Row: 6393316415386, 2, 0, test, 1, 0, 0
2021-06-30 18:20:46.405 DEBUG com.cq.wiki.mapper.DocMapper.selectByExample      :137  [32m65386038520057856 [0;39m <==      Total: 1
2021-06-30 18:20:46.410 INFO  com.cq.wiki.aspect.LogAspect                      :89   [32m65386038520057856 [0;39m 返回结果: {"content":[{"ebookId":2,"id":6393316415386,"name":"test","parent":0,"sort":1,"viewCount":0,"voteCount":0}],"success":true}
2021-06-30 18:20:46.410 INFO  com.cq.wiki.aspect.LogAspect                      :90   [32m65386038520057856 [0;39m ------------- 结束 耗时：13 ms -------------
2021-06-30 18:20:46.412 INFO  com.cq.wiki.interceptor.LoginInterceptor          :73   [32m65386038520057856 [0;39m ------------- LoginInterceptor 结束 耗时：17 ms -------------
2021-06-30 18:20:46.426 INFO  com.cq.wiki.interceptor.LoginInterceptor          :33   [32m65384677539713026 [0;39m ------------- LoginInterceptor 开始 -------------
2021-06-30 18:20:46.426 INFO  com.cq.wiki.interceptor.LoginInterceptor          :38   [32m65384677539713026 [0;39m 从请求头里获取token：null
2021-06-30 18:20:46.426 INFO  com.cq.wiki.interceptor.LoginInterceptor          :41   [32m65384677539713026 [0;39m 未映射到方法，跳过token验证
2021-06-30 18:20:46.427 INFO  com.cq.wiki.interceptor.LoginInterceptor          :73   [32m65384677539713026 [0;39m ------------- LoginInterceptor 结束 耗时：1 ms -------------
2021-06-30 18:20:46.431 INFO  com.cq.wiki.interceptor.LoginInterceptor          :33   [32m65384677539713025 [0;39m ------------- LoginInterceptor 开始 -------------
2021-06-30 18:20:46.431 INFO  com.cq.wiki.interceptor.LoginInterceptor          :38   [32m65384677539713025 [0;39m 从请求头里获取token：eyJhbGciOiJIUzI1NiJ9.eyJsb2dpbk5hbWUiOiJ0ZXN0IiwibmFtZSI6Iua1i-ivlSIsImlkIjo2MjkwOTYxNTc0MTk5LCJleHAiOjE2MjUxMzQyMDAsImlhdCI6MTYyNTA0NzgwMH0.BRW08DlSCynH3C8e8_R2dJ4pXAC0thchFGsL_AUuII8
2021-06-30 18:20:46.432 INFO  com.cq.wiki.interceptor.LoginInterceptor          :60   [32m65384677539713025 [0;39m token：eyJhbGciOiJIUzI1NiJ9.eyJsb2dpbk5hbWUiOiJ0ZXN0IiwibmFtZSI6Iua1i-ivlSIsImlkIjo2MjkwOTYxNTc0MTk5LCJleHAiOjE2MjUxMzQyMDAsImlhdCI6MTYyNTA0NzgwMH0.BRW08DlSCynH3C8e8_R2dJ4pXAC0thchFGsL_AUuII8验证通过
2021-06-30 18:20:46.432 INFO  com.cq.wiki.aspect.LogAspect                      :52   [32m65386038666858496 [0;39m ------------- 开始 -------------
2021-06-30 18:20:46.432 INFO  com.cq.wiki.aspect.LogAspect                      :53   [32m65386038666858496 [0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/6393316415386 GET
2021-06-30 18:20:46.433 INFO  com.cq.wiki.aspect.LogAspect                      :54   [32m65386038666858496 [0;39m 类名方法: com.cq.wiki.controller.DocController.findContent
2021-06-30 18:20:46.433 INFO  com.cq.wiki.aspect.LogAspect                      :55   [32m65386038666858496 [0;39m 远程地址: 127.0.0.1
2021-06-30 18:20:46.433 INFO  com.cq.wiki.aspect.LogAspect                      :77   [32m65386038666858496 [0;39m 请求参数: [6393316415386]
2021-06-30 18:20:46.434 DEBUG c.cq.wiki.mapper.ContentMapper.selectByPrimaryKey :137  [32m65386038666858496 [0;39m ==>  Preparing: select id , content from content where id = ?
2021-06-30 18:20:46.434 DEBUG c.cq.wiki.mapper.ContentMapper.selectByPrimaryKey :137  [32m65386038666858496 [0;39m ==> Parameters: 6393316415386(Long)
2021-06-30 18:20:46.450 TRACE c.cq.wiki.mapper.ContentMapper.selectByPrimaryKey :143  [32m65386038666858496 [0;39m <==    Columns: id, content
2021-06-30 18:20:46.450 TRACE c.cq.wiki.mapper.ContentMapper.selectByPrimaryKey :143  [32m65386038666858496 [0;39m <==        Row: 6393316415386, <<BLOB>>
2021-06-30 18:20:46.450 DEBUG c.cq.wiki.mapper.ContentMapper.selectByPrimaryKey :137  [32m65386038666858496 [0;39m <==      Total: 1
2021-06-30 18:20:46.452 DEBUG com.cq.wiki.mapper.DocMapperCust.increaseViewCount:137  [32m65386038666858496 [0;39m ==>  Preparing: update doc set view_count = view_count + 1 where id = ?;
2021-06-30 18:20:46.452 DEBUG com.cq.wiki.mapper.DocMapperCust.increaseViewCount:137  [32m65386038666858496 [0;39m ==> Parameters: 6393316415386(Long)
2021-06-30 18:20:46.455 DEBUG com.cq.wiki.mapper.DocMapperCust.increaseViewCount:137  [32m65386038666858496 [0;39m <==    Updates: 1
2021-06-30 18:20:46.455 INFO  com.cq.wiki.aspect.LogAspect                      :89   [32m65386038666858496 [0;39m 返回结果: {"content":"<h2 id=\"t1t67\">test</h2>","success":true}
2021-06-30 18:20:46.455 INFO  com.cq.wiki.aspect.LogAspect                      :90   [32m65386038666858496 [0;39m ------------- 结束 耗时：23 ms -------------
2021-06-30 18:20:46.457 INFO  com.cq.wiki.interceptor.LoginInterceptor          :73   [32m65386038666858496 [0;39m ------------- LoginInterceptor 结束 耗时：26 ms -------------
2021-06-30 18:20:47.756 INFO  com.cq.wiki.interceptor.LoginInterceptor          :33   [32m                  [0;39m ------------- LoginInterceptor 开始 -------------
2021-06-30 18:20:47.756 INFO  com.cq.wiki.interceptor.LoginInterceptor          :38   [32m                  [0;39m 从请求头里获取token：eyJhbGciOiJIUzI1NiJ9.eyJsb2dpbk5hbWUiOiJ0ZXN0IiwibmFtZSI6Iua1i-ivlSIsImlkIjo2MjkwOTYxNTc0MTk5LCJleHAiOjE2MjUxMzQyMDAsImlhdCI6MTYyNTA0NzgwMH0.BRW08DlSCynH3C8e8_R2dJ4pXAC0thchFGsL_AUuII8
2021-06-30 18:20:47.757 INFO  com.cq.wiki.interceptor.LoginInterceptor          :60   [32m                  [0;39m token：eyJhbGciOiJIUzI1NiJ9.eyJsb2dpbk5hbWUiOiJ0ZXN0IiwibmFtZSI6Iua1i-ivlSIsImlkIjo2MjkwOTYxNTc0MTk5LCJleHAiOjE2MjUxMzQyMDAsImlhdCI6MTYyNTA0NzgwMH0.BRW08DlSCynH3C8e8_R2dJ4pXAC0thchFGsL_AUuII8验证通过
2021-06-30 18:20:47.757 INFO  com.cq.wiki.aspect.LogAspect                      :52   [32m65386044224311296 [0;39m ------------- 开始 -------------
2021-06-30 18:20:47.757 INFO  com.cq.wiki.aspect.LogAspect                      :53   [32m65386044224311296 [0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/6393316415386 GET
2021-06-30 18:20:47.757 INFO  com.cq.wiki.aspect.LogAspect                      :54   [32m65386044224311296 [0;39m 类名方法: com.cq.wiki.controller.DocController.findContent
2021-06-30 18:20:47.757 INFO  com.cq.wiki.aspect.LogAspect                      :55   [32m65386044224311296 [0;39m 远程地址: 127.0.0.1
2021-06-30 18:20:47.757 INFO  com.cq.wiki.aspect.LogAspect                      :77   [32m65386044224311296 [0;39m 请求参数: [6393316415386]
2021-06-30 18:20:47.758 DEBUG c.cq.wiki.mapper.ContentMapper.selectByPrimaryKey :137  [32m65386044224311296 [0;39m ==>  Preparing: select id , content from content where id = ?
2021-06-30 18:20:47.759 DEBUG c.cq.wiki.mapper.ContentMapper.selectByPrimaryKey :137  [32m65386044224311296 [0;39m ==> Parameters: 6393316415386(Long)
2021-06-30 18:20:47.760 TRACE c.cq.wiki.mapper.ContentMapper.selectByPrimaryKey :143  [32m65386044224311296 [0;39m <==    Columns: id, content
2021-06-30 18:20:47.760 TRACE c.cq.wiki.mapper.ContentMapper.selectByPrimaryKey :143  [32m65386044224311296 [0;39m <==        Row: 6393316415386, <<BLOB>>
2021-06-30 18:20:47.760 DEBUG c.cq.wiki.mapper.ContentMapper.selectByPrimaryKey :137  [32m65386044224311296 [0;39m <==      Total: 1
2021-06-30 18:20:47.761 DEBUG com.cq.wiki.mapper.DocMapperCust.increaseViewCount:137  [32m65386044224311296 [0;39m ==>  Preparing: update doc set view_count = view_count + 1 where id = ?;
2021-06-30 18:20:47.761 DEBUG com.cq.wiki.mapper.DocMapperCust.increaseViewCount:137  [32m65386044224311296 [0;39m ==> Parameters: 6393316415386(Long)
2021-06-30 18:20:47.773 DEBUG com.cq.wiki.mapper.DocMapperCust.increaseViewCount:137  [32m65386044224311296 [0;39m <==    Updates: 1
2021-06-30 18:20:47.773 INFO  com.cq.wiki.aspect.LogAspect                      :89   [32m65386044224311296 [0;39m 返回结果: {"content":"<h2 id=\"t1t67\">test</h2>","success":true}
2021-06-30 18:20:47.773 INFO  com.cq.wiki.aspect.LogAspect                      :90   [32m65386044224311296 [0;39m ------------- 结束 耗时：16 ms -------------
2021-06-30 18:20:47.774 INFO  com.cq.wiki.interceptor.LoginInterceptor          :73   [32m65386044224311296 [0;39m ------------- LoginInterceptor 结束 耗时：18 ms -------------
2021-06-30 18:20:48.058 INFO  com.cq.wiki.interceptor.LoginInterceptor          :33   [32m                  [0;39m ------------- LoginInterceptor 开始 -------------
2021-06-30 18:20:48.058 INFO  com.cq.wiki.interceptor.LoginInterceptor          :38   [32m                  [0;39m 从请求头里获取token：eyJhbGciOiJIUzI1NiJ9.eyJsb2dpbk5hbWUiOiJ0ZXN0IiwibmFtZSI6Iua1i-ivlSIsImlkIjo2MjkwOTYxNTc0MTk5LCJleHAiOjE2MjUxMzQyMDAsImlhdCI6MTYyNTA0NzgwMH0.BRW08DlSCynH3C8e8_R2dJ4pXAC0thchFGsL_AUuII8
2021-06-30 18:20:48.059 INFO  com.cq.wiki.interceptor.LoginInterceptor          :60   [32m                  [0;39m token：eyJhbGciOiJIUzI1NiJ9.eyJsb2dpbk5hbWUiOiJ0ZXN0IiwibmFtZSI6Iua1i-ivlSIsImlkIjo2MjkwOTYxNTc0MTk5LCJleHAiOjE2MjUxMzQyMDAsImlhdCI6MTYyNTA0NzgwMH0.BRW08DlSCynH3C8e8_R2dJ4pXAC0thchFGsL_AUuII8验证通过
2021-06-30 18:20:48.059 INFO  com.cq.wiki.aspect.LogAspect                      :52   [32m65386045490991104 [0;39m ------------- 开始 -------------
2021-06-30 18:20:48.059 INFO  com.cq.wiki.aspect.LogAspect                      :53   [32m65386045490991104 [0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/6393316415386 GET
2021-06-30 18:20:48.059 INFO  com.cq.wiki.aspect.LogAspect                      :54   [32m65386045490991104 [0;39m 类名方法: com.cq.wiki.controller.DocController.findContent
2021-06-30 18:20:48.060 INFO  com.cq.wiki.aspect.LogAspect                      :55   [32m65386045490991104 [0;39m 远程地址: 127.0.0.1
2021-06-30 18:20:48.060 INFO  com.cq.wiki.aspect.LogAspect                      :77   [32m65386045490991104 [0;39m 请求参数: [6393316415386]
2021-06-30 18:20:48.060 DEBUG c.cq.wiki.mapper.ContentMapper.selectByPrimaryKey :137  [32m65386045490991104 [0;39m ==>  Preparing: select id , content from content where id = ?
2021-06-30 18:20:48.060 DEBUG c.cq.wiki.mapper.ContentMapper.selectByPrimaryKey :137  [32m65386045490991104 [0;39m ==> Parameters: 6393316415386(Long)
2021-06-30 18:20:48.061 TRACE c.cq.wiki.mapper.ContentMapper.selectByPrimaryKey :143  [32m65386045490991104 [0;39m <==    Columns: id, content
2021-06-30 18:20:48.062 TRACE c.cq.wiki.mapper.ContentMapper.selectByPrimaryKey :143  [32m65386045490991104 [0;39m <==        Row: 6393316415386, <<BLOB>>
2021-06-30 18:20:48.062 DEBUG c.cq.wiki.mapper.ContentMapper.selectByPrimaryKey :137  [32m65386045490991104 [0;39m <==      Total: 1
2021-06-30 18:20:48.063 DEBUG com.cq.wiki.mapper.DocMapperCust.increaseViewCount:137  [32m65386045490991104 [0;39m ==>  Preparing: update doc set view_count = view_count + 1 where id = ?;
2021-06-30 18:20:48.063 DEBUG com.cq.wiki.mapper.DocMapperCust.increaseViewCount:137  [32m65386045490991104 [0;39m ==> Parameters: 6393316415386(Long)
2021-06-30 18:20:48.077 DEBUG com.cq.wiki.mapper.DocMapperCust.increaseViewCount:137  [32m65386045490991104 [0;39m <==    Updates: 1
2021-06-30 18:20:48.077 INFO  com.cq.wiki.aspect.LogAspect                      :89   [32m65386045490991104 [0;39m 返回结果: {"content":"<h2 id=\"t1t67\">test</h2>","success":true}
2021-06-30 18:20:48.078 INFO  com.cq.wiki.aspect.LogAspect                      :90   [32m65386045490991104 [0;39m ------------- 结束 耗时：19 ms -------------
2021-06-30 18:20:48.079 INFO  com.cq.wiki.interceptor.LoginInterceptor          :73   [32m65386045490991104 [0;39m ------------- LoginInterceptor 结束 耗时：21 ms -------------
2021-06-30 18:20:48.774 INFO  com.cq.wiki.aspect.LogAspect                      :52   [32m65386048489918464 [0;39m ------------- 开始 -------------
2021-06-30 18:20:48.774 INFO  com.cq.wiki.aspect.LogAspect                      :52   [32m65386048489918465 [0;39m ------------- 开始 -------------
2021-06-30 18:20:48.774 INFO  com.cq.wiki.aspect.LogAspect                      :53   [32m65386048489918464 [0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2021-06-30 18:20:48.774 INFO  com.cq.wiki.aspect.LogAspect                      :53   [32m65386048489918465 [0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2021-06-30 18:20:48.774 INFO  com.cq.wiki.aspect.LogAspect                      :54   [32m65386048489918464 [0;39m 类名方法: com.cq.wiki.controller.EbookSnapshotController.get30Statistic
2021-06-30 18:20:48.774 INFO  com.cq.wiki.aspect.LogAspect                      :54   [32m65386048489918465 [0;39m 类名方法: com.cq.wiki.controller.EbookSnapshotController.getStatistic
2021-06-30 18:20:48.774 INFO  com.cq.wiki.aspect.LogAspect                      :55   [32m65386048489918464 [0;39m 远程地址: 127.0.0.1
2021-06-30 18:20:48.774 INFO  com.cq.wiki.aspect.LogAspect                      :55   [32m65386048489918465 [0;39m 远程地址: 127.0.0.1
2021-06-30 18:20:48.774 INFO  com.cq.wiki.aspect.LogAspect                      :77   [32m65386048489918465 [0;39m 请求参数: []
2021-06-30 18:20:48.774 INFO  com.cq.wiki.aspect.LogAspect                      :77   [32m65386048489918464 [0;39m 请求参数: []
2021-06-30 18:20:48.775 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m65386048489918465 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-06-30 18:20:48.775 DEBUG c.c.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m65386048489918464 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-06-30 18:20:48.775 INFO  com.cq.wiki.aspect.LogAspect                      :52   [32m65386048494112768 [0;39m ------------- 开始 -------------
2021-06-30 18:20:48.775 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m65386048489918465 [0;39m ==> Parameters: 
2021-06-30 18:20:48.775 DEBUG c.c.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m65386048489918464 [0;39m ==> Parameters: 
2021-06-30 18:20:48.776 INFO  com.cq.wiki.aspect.LogAspect                      :53   [32m65386048494112768 [0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2021-06-30 18:20:48.776 INFO  com.cq.wiki.aspect.LogAspect                      :54   [32m65386048494112768 [0;39m 类名方法: com.cq.wiki.controller.CategoryController.allBook
2021-06-30 18:20:48.776 INFO  com.cq.wiki.aspect.LogAspect                      :55   [32m65386048494112768 [0;39m 远程地址: 127.0.0.1
2021-06-30 18:20:48.776 INFO  com.cq.wiki.aspect.LogAspect                      :77   [32m65386048494112768 [0;39m 请求参数: []
2021-06-30 18:20:48.777 TRACE c.c.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m65386048489918464 [0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-06-30 18:20:48.777 DEBUG com.cq.wiki.mapper.CategoryMapper.selectByExample :137  [32m65386048494112768 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-06-30 18:20:48.777 TRACE c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m65386048489918465 [0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-06-30 18:20:48.777 TRACE c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m65386048489918465 [0;39m <==        Row: 2021-06-29, 0, 0, 0, 0
2021-06-30 18:20:48.777 TRACE c.c.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m65386048489918464 [0;39m <==        Row: 2021-06-29, 0, 0
2021-06-30 18:20:48.777 DEBUG com.cq.wiki.mapper.CategoryMapper.selectByExample :137  [32m65386048494112768 [0;39m ==> Parameters: 
2021-06-30 18:20:48.777 TRACE c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m65386048489918465 [0;39m <==        Row: 2021-06-30, 115, 43, 115, 43
2021-06-30 18:20:48.777 DEBUG c.c.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m65386048489918464 [0;39m <==      Total: 1
2021-06-30 18:20:48.778 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m65386048489918465 [0;39m <==      Total: 2
2021-06-30 18:20:48.778 INFO  com.cq.wiki.aspect.LogAspect                      :89   [32m65386048489918464 [0;39m 返回结果: {"content":[{"date":1624896000000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0}],"success":true}
2021-06-30 18:20:48.778 INFO  com.cq.wiki.aspect.LogAspect                      :90   [32m65386048489918464 [0;39m ------------- 结束 耗时：4 ms -------------
2021-06-30 18:20:48.779 INFO  com.cq.wiki.aspect.LogAspect                      :89   [32m65386048489918465 [0;39m 返回结果: {"content":[{"date":1624896000000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1624982400000,"viewCount":115,"viewIncrease":115,"voteCount":43,"voteIncrease":43}],"success":true}
2021-06-30 18:20:48.779 INFO  com.cq.wiki.aspect.LogAspect                      :90   [32m65386048489918465 [0;39m ------------- 结束 耗时：5 ms -------------
2021-06-30 18:20:48.779 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65386048494112768 [0;39m <==    Columns: id, parent, name, sort
2021-06-30 18:20:48.779 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65386048494112768 [0;39m <==        Row: 100, 0, 前端开发, 100
2021-06-30 18:20:48.779 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65386048494112768 [0;39m <==        Row: 101, 100, Vue, 101
2021-06-30 18:20:48.780 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65386048494112768 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-06-30 18:20:48.781 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65386048494112768 [0;39m <==        Row: 200, 0, Java, 200
2021-06-30 18:20:48.781 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65386048494112768 [0;39m <==        Row: 201, 200, 基础应用, 201
2021-06-30 18:20:48.781 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65386048494112768 [0;39m <==        Row: 202, 200, 框架开发, 202
2021-06-30 18:20:48.781 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65386048494112768 [0;39m <==        Row: 300, 0, Python, 300
2021-06-30 18:20:48.782 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65386048494112768 [0;39m <==        Row: 301, 300, 基础应用, 301
2021-06-30 18:20:48.782 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65386048494112768 [0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-06-30 18:20:48.782 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65386048494112768 [0;39m <==        Row: 400, 0, 数据库, 400
2021-06-30 18:20:48.782 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65386048494112768 [0;39m <==        Row: 401, 400, MySQL, 401
2021-06-30 18:20:48.783 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65386048494112768 [0;39m <==        Row: 402, 400, Oracle, 402
2021-06-30 18:20:48.783 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65386048494112768 [0;39m <==        Row: 500, 0, 其他, 500
2021-06-30 18:20:48.783 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65386048494112768 [0;39m <==        Row: 501, 500, 服务器, 501
2021-06-30 18:20:48.783 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65386048494112768 [0;39m <==        Row: 502, 500, 开发工具, 502
2021-06-30 18:20:48.784 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65386048494112768 [0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-06-30 18:20:48.784 DEBUG com.cq.wiki.mapper.CategoryMapper.selectByExample :137  [32m65386048494112768 [0;39m <==      Total: 16
2021-06-30 18:20:48.785 INFO  com.cq.wiki.aspect.LogAspect                      :89   [32m65386048494112768 [0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架开发","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":402,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-06-30 18:20:48.785 INFO  com.cq.wiki.aspect.LogAspect                      :90   [32m65386048494112768 [0;39m ------------- 结束 耗时：10 ms -------------
2021-06-30 18:20:51.374 INFO  com.cq.wiki.websocket.WebSocketServer             :41   [32m65386034476748800 [0;39m 连接关闭，token：U4mI1JA2Po，session id：0！当前连接数：0
2021-06-30 18:20:51.892 INFO  com.cq.wiki.websocket.WebSocketServer             :32   [32m                  [0;39m 有新连接：token：KTVJlAjDlS，session id：1，当前连接数：1
2021-06-30 18:20:52.014 INFO  com.cq.wiki.aspect.LogAspect                      :52   [32m65386062079463425 [0;39m ------------- 开始 -------------
2021-06-30 18:20:52.014 INFO  com.cq.wiki.aspect.LogAspect                      :52   [32m65386062079463424 [0;39m ------------- 开始 -------------
2021-06-30 18:20:52.014 INFO  com.cq.wiki.aspect.LogAspect                      :53   [32m65386062079463424 [0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2021-06-30 18:20:52.014 INFO  com.cq.wiki.aspect.LogAspect                      :53   [32m65386062079463425 [0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2021-06-30 18:20:52.015 INFO  com.cq.wiki.aspect.LogAspect                      :54   [32m65386062079463424 [0;39m 类名方法: com.cq.wiki.controller.EbookSnapshotController.getStatistic
2021-06-30 18:20:52.015 INFO  com.cq.wiki.aspect.LogAspect                      :54   [32m65386062079463425 [0;39m 类名方法: com.cq.wiki.controller.EbookSnapshotController.get30Statistic
2021-06-30 18:20:52.015 INFO  com.cq.wiki.aspect.LogAspect                      :55   [32m65386062079463425 [0;39m 远程地址: 127.0.0.1
2021-06-30 18:20:52.015 INFO  com.cq.wiki.aspect.LogAspect                      :55   [32m65386062079463424 [0;39m 远程地址: 127.0.0.1
2021-06-30 18:20:52.015 INFO  com.cq.wiki.aspect.LogAspect                      :77   [32m65386062079463425 [0;39m 请求参数: []
2021-06-30 18:20:52.015 INFO  com.cq.wiki.aspect.LogAspect                      :77   [32m65386062079463424 [0;39m 请求参数: []
2021-06-30 18:20:52.016 DEBUG c.c.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m65386062079463425 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-06-30 18:20:52.016 INFO  com.cq.wiki.aspect.LogAspect                      :52   [32m65386062087852032 [0;39m ------------- 开始 -------------
2021-06-30 18:20:52.016 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m65386062079463424 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-06-30 18:20:52.017 INFO  com.cq.wiki.aspect.LogAspect                      :53   [32m65386062087852032 [0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2021-06-30 18:20:52.017 INFO  com.cq.wiki.aspect.LogAspect                      :54   [32m65386062087852032 [0;39m 类名方法: com.cq.wiki.controller.CategoryController.allBook
2021-06-30 18:20:52.017 DEBUG c.c.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m65386062079463425 [0;39m ==> Parameters: 
2021-06-30 18:20:52.017 INFO  com.cq.wiki.aspect.LogAspect                      :55   [32m65386062087852032 [0;39m 远程地址: 127.0.0.1
2021-06-30 18:20:52.017 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m65386062079463424 [0;39m ==> Parameters: 
2021-06-30 18:20:52.017 INFO  com.cq.wiki.aspect.LogAspect                      :77   [32m65386062087852032 [0;39m 请求参数: []
2021-06-30 18:20:52.018 DEBUG com.cq.wiki.mapper.CategoryMapper.selectByExample :137  [32m65386062087852032 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-06-30 18:20:52.019 DEBUG com.cq.wiki.mapper.CategoryMapper.selectByExample :137  [32m65386062087852032 [0;39m ==> Parameters: 
2021-06-30 18:20:52.019 TRACE c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m65386062079463424 [0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-06-30 18:20:52.019 TRACE c.c.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m65386062079463425 [0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-06-30 18:20:52.019 TRACE c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m65386062079463424 [0;39m <==        Row: 2021-06-29, 0, 0, 0, 0
2021-06-30 18:20:52.019 TRACE c.c.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m65386062079463425 [0;39m <==        Row: 2021-06-29, 0, 0
2021-06-30 18:20:52.020 DEBUG c.c.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m65386062079463425 [0;39m <==      Total: 1
2021-06-30 18:20:52.020 TRACE c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m65386062079463424 [0;39m <==        Row: 2021-06-30, 115, 43, 115, 43
2021-06-30 18:20:52.020 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65386062087852032 [0;39m <==    Columns: id, parent, name, sort
2021-06-30 18:20:52.020 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m65386062079463424 [0;39m <==      Total: 2
2021-06-30 18:20:52.020 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65386062087852032 [0;39m <==        Row: 100, 0, 前端开发, 100
2021-06-30 18:20:52.021 INFO  com.cq.wiki.aspect.LogAspect                      :89   [32m65386062079463425 [0;39m 返回结果: {"content":[{"date":1624896000000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0}],"success":true}
2021-06-30 18:20:52.021 INFO  com.cq.wiki.aspect.LogAspect                      :89   [32m65386062079463424 [0;39m 返回结果: {"content":[{"date":1624896000000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1624982400000,"viewCount":115,"viewIncrease":115,"voteCount":43,"voteIncrease":43}],"success":true}
2021-06-30 18:20:52.021 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65386062087852032 [0;39m <==        Row: 101, 100, Vue, 101
2021-06-30 18:20:52.021 INFO  com.cq.wiki.aspect.LogAspect                      :90   [32m65386062079463425 [0;39m ------------- 结束 耗时：7 ms -------------
2021-06-30 18:20:52.021 INFO  com.cq.wiki.aspect.LogAspect                      :90   [32m65386062079463424 [0;39m ------------- 结束 耗时：7 ms -------------
2021-06-30 18:20:52.021 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65386062087852032 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-06-30 18:20:52.021 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65386062087852032 [0;39m <==        Row: 200, 0, Java, 200
2021-06-30 18:20:52.021 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65386062087852032 [0;39m <==        Row: 201, 200, 基础应用, 201
2021-06-30 18:20:52.022 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65386062087852032 [0;39m <==        Row: 202, 200, 框架开发, 202
2021-06-30 18:20:52.022 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65386062087852032 [0;39m <==        Row: 300, 0, Python, 300
2021-06-30 18:20:52.022 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65386062087852032 [0;39m <==        Row: 301, 300, 基础应用, 301
2021-06-30 18:20:52.022 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65386062087852032 [0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-06-30 18:20:52.023 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65386062087852032 [0;39m <==        Row: 400, 0, 数据库, 400
2021-06-30 18:20:52.023 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65386062087852032 [0;39m <==        Row: 401, 400, MySQL, 401
2021-06-30 18:20:52.023 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65386062087852032 [0;39m <==        Row: 402, 400, Oracle, 402
2021-06-30 18:20:52.023 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65386062087852032 [0;39m <==        Row: 500, 0, 其他, 500
2021-06-30 18:20:52.023 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65386062087852032 [0;39m <==        Row: 501, 500, 服务器, 501
2021-06-30 18:20:52.024 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65386062087852032 [0;39m <==        Row: 502, 500, 开发工具, 502
2021-06-30 18:20:52.024 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65386062087852032 [0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-06-30 18:20:52.024 DEBUG com.cq.wiki.mapper.CategoryMapper.selectByExample :137  [32m65386062087852032 [0;39m <==      Total: 16
2021-06-30 18:20:52.025 INFO  com.cq.wiki.aspect.LogAspect                      :89   [32m65386062087852032 [0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架开发","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":402,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-06-30 18:20:52.025 INFO  com.cq.wiki.aspect.LogAspect                      :90   [32m65386062087852032 [0;39m ------------- 结束 耗时：9 ms -------------
2021-06-30 18:20:54.150 INFO  com.cq.wiki.interceptor.LoginInterceptor          :33   [32m65386044224311296 [0;39m ------------- LoginInterceptor 开始 -------------
2021-06-30 18:20:54.150 INFO  com.cq.wiki.interceptor.LoginInterceptor          :38   [32m65386044224311296 [0;39m 从请求头里获取token：null
2021-06-30 18:20:54.151 INFO  com.cq.wiki.interceptor.LoginInterceptor          :41   [32m65386044224311296 [0;39m 未映射到方法，跳过token验证
2021-06-30 18:20:54.151 INFO  com.cq.wiki.interceptor.LoginInterceptor          :73   [32m65386044224311296 [0;39m ------------- LoginInterceptor 结束 耗时：1 ms -------------
2021-06-30 18:20:54.155 INFO  com.cq.wiki.interceptor.LoginInterceptor          :33   [32m65386045490991104 [0;39m ------------- LoginInterceptor 开始 -------------
2021-06-30 18:20:54.155 INFO  com.cq.wiki.interceptor.LoginInterceptor          :38   [32m65386045490991104 [0;39m 从请求头里获取token：eyJhbGciOiJIUzI1NiJ9.eyJsb2dpbk5hbWUiOiJ0ZXN0IiwibmFtZSI6Iua1i-ivlSIsImlkIjo2MjkwOTYxNTc0MTk5LCJleHAiOjE2MjUxMzQyMDAsImlhdCI6MTYyNTA0NzgwMH0.BRW08DlSCynH3C8e8_R2dJ4pXAC0thchFGsL_AUuII8
2021-06-30 18:20:54.156 INFO  com.cq.wiki.interceptor.LoginInterceptor          :60   [32m65386045490991104 [0;39m token：eyJhbGciOiJIUzI1NiJ9.eyJsb2dpbk5hbWUiOiJ0ZXN0IiwibmFtZSI6Iua1i-ivlSIsImlkIjo2MjkwOTYxNTc0MTk5LCJleHAiOjE2MjUxMzQyMDAsImlhdCI6MTYyNTA0NzgwMH0.BRW08DlSCynH3C8e8_R2dJ4pXAC0thchFGsL_AUuII8验证通过
2021-06-30 18:20:54.157 INFO  com.cq.wiki.aspect.LogAspect                      :52   [32m65386071067856896 [0;39m ------------- 开始 -------------
2021-06-30 18:20:54.157 INFO  com.cq.wiki.aspect.LogAspect                      :53   [32m65386071067856896 [0;39m 请求地址: http://127.0.0.1:8880/user/logout/eyJhbGciOiJIUzI1NiJ9.eyJsb2dpbk5hbWUiOiJ0ZXN0IiwibmFtZSI6Iua1i-ivlSIsImlkIjo2MjkwOTYxNTc0MTk5LCJleHAiOjE2MjUxMzQyMDAsImlhdCI6MTYyNTA0NzgwMH0.BRW08DlSCynH3C8e8_R2dJ4pXAC0thchFGsL_AUuII8 GET
2021-06-30 18:20:54.157 INFO  com.cq.wiki.aspect.LogAspect                      :54   [32m65386071067856896 [0;39m 类名方法: com.cq.wiki.controller.UserController.logout
2021-06-30 18:20:54.157 INFO  com.cq.wiki.aspect.LogAspect                      :55   [32m65386071067856896 [0;39m 远程地址: 127.0.0.1
2021-06-30 18:20:54.157 INFO  com.cq.wiki.aspect.LogAspect                      :77   [32m65386071067856896 [0;39m 请求参数: ["eyJhbGciOiJIUzI1NiJ9.eyJsb2dpbk5hbWUiOiJ0ZXN0IiwibmFtZSI6Iua1i-ivlSIsImlkIjo2MjkwOTYxNTc0MTk5LCJleHAiOjE2MjUxMzQyMDAsImlhdCI6MTYyNTA0NzgwMH0.BRW08DlSCynH3C8e8_R2dJ4pXAC0thchFGsL_AUuII8"]
2021-06-30 18:20:54.161 DEBUG com.cq.wiki.mapper.TokenMapper.deleteByExample    :137  [32m65386071067856896 [0;39m ==>  Preparing: delete from token WHERE ( token = ? )
2021-06-30 18:20:54.162 DEBUG com.cq.wiki.mapper.TokenMapper.deleteByExample    :137  [32m65386071067856896 [0;39m ==> Parameters: eyJhbGciOiJIUzI1NiJ9.eyJsb2dpbk5hbWUiOiJ0ZXN0IiwibmFtZSI6Iua1i-ivlSIsImlkIjo2MjkwOTYxNTc0MTk5LCJleHAiOjE2MjUxMzQyMDAsImlhdCI6MTYyNTA0NzgwMH0.BRW08DlSCynH3C8e8_R2dJ4pXAC0thchFGsL_AUuII8(String)
2021-06-30 18:20:54.175 DEBUG com.cq.wiki.mapper.TokenMapper.deleteByExample    :137  [32m65386071067856896 [0;39m <==    Updates: 1
2021-06-30 18:20:54.176 INFO  com.cq.wiki.controller.UserController             :88   [32m65386071067856896 [0;39m 从数据库里删除token: eyJhbGciOiJIUzI1NiJ9.eyJsb2dpbk5hbWUiOiJ0ZXN0IiwibmFtZSI6Iua1i-ivlSIsImlkIjo2MjkwOTYxNTc0MTk5LCJleHAiOjE2MjUxMzQyMDAsImlhdCI6MTYyNTA0NzgwMH0.BRW08DlSCynH3C8e8_R2dJ4pXAC0thchFGsL_AUuII8
2021-06-30 18:20:54.176 INFO  com.cq.wiki.aspect.LogAspect                      :89   [32m65386071067856896 [0;39m 返回结果: {"success":true}
2021-06-30 18:20:54.176 INFO  com.cq.wiki.aspect.LogAspect                      :90   [32m65386071067856896 [0;39m ------------- 结束 耗时：20 ms -------------
2021-06-30 18:20:54.184 INFO  com.cq.wiki.interceptor.LoginInterceptor          :73   [32m65386071067856896 [0;39m ------------- LoginInterceptor 结束 耗时：29 ms -------------
2021-06-30 18:20:55.750 INFO  com.cq.wiki.websocket.WebSocketServer             :41   [32m65386048489918465 [0;39m 连接关闭，token：KTVJlAjDlS，session id：1！当前连接数：0
2021-06-30 18:20:56.161 INFO  com.cq.wiki.websocket.WebSocketServer             :32   [32m65386048489918464 [0;39m 有新连接：token：Z1zzAL9hMe，session id：2，当前连接数：1
2021-06-30 18:20:56.291 INFO  com.cq.wiki.aspect.LogAspect                      :52   [32m65386080018501632 [0;39m ------------- 开始 -------------
2021-06-30 18:20:56.292 INFO  com.cq.wiki.aspect.LogAspect                      :53   [32m65386080018501632 [0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2021-06-30 18:20:56.292 INFO  com.cq.wiki.aspect.LogAspect                      :54   [32m65386080018501632 [0;39m 类名方法: com.cq.wiki.controller.EbookSnapshotController.getStatistic
2021-06-30 18:20:56.292 INFO  com.cq.wiki.aspect.LogAspect                      :52   [32m65386080022695936 [0;39m ------------- 开始 -------------
2021-06-30 18:20:56.292 INFO  com.cq.wiki.aspect.LogAspect                      :55   [32m65386080018501632 [0;39m 远程地址: 127.0.0.1
2021-06-30 18:20:56.292 INFO  com.cq.wiki.aspect.LogAspect                      :53   [32m65386080022695936 [0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2021-06-30 18:20:56.292 INFO  com.cq.wiki.aspect.LogAspect                      :54   [32m65386080022695936 [0;39m 类名方法: com.cq.wiki.controller.EbookSnapshotController.get30Statistic
2021-06-30 18:20:56.292 INFO  com.cq.wiki.aspect.LogAspect                      :77   [32m65386080018501632 [0;39m 请求参数: []
2021-06-30 18:20:56.292 INFO  com.cq.wiki.aspect.LogAspect                      :55   [32m65386080022695936 [0;39m 远程地址: 127.0.0.1
2021-06-30 18:20:56.292 INFO  com.cq.wiki.aspect.LogAspect                      :52   [32m65386080022695937 [0;39m ------------- 开始 -------------
2021-06-30 18:20:56.292 INFO  com.cq.wiki.aspect.LogAspect                      :77   [32m65386080022695936 [0;39m 请求参数: []
2021-06-30 18:20:56.293 INFO  com.cq.wiki.aspect.LogAspect                      :53   [32m65386080022695937 [0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2021-06-30 18:20:56.293 INFO  com.cq.wiki.aspect.LogAspect                      :54   [32m65386080022695937 [0;39m 类名方法: com.cq.wiki.controller.CategoryController.allBook
2021-06-30 18:20:56.293 INFO  com.cq.wiki.aspect.LogAspect                      :55   [32m65386080022695937 [0;39m 远程地址: 127.0.0.1
2021-06-30 18:20:56.293 INFO  com.cq.wiki.aspect.LogAspect                      :77   [32m65386080022695937 [0;39m 请求参数: []
2021-06-30 18:20:56.293 DEBUG c.c.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m65386080022695936 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-06-30 18:20:56.293 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m65386080018501632 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-06-30 18:20:56.293 DEBUG c.c.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m65386080022695936 [0;39m ==> Parameters: 
2021-06-30 18:20:56.293 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m65386080018501632 [0;39m ==> Parameters: 
2021-06-30 18:20:56.294 DEBUG com.cq.wiki.mapper.CategoryMapper.selectByExample :137  [32m65386080022695937 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-06-30 18:20:56.294 DEBUG com.cq.wiki.mapper.CategoryMapper.selectByExample :137  [32m65386080022695937 [0;39m ==> Parameters: 
2021-06-30 18:20:56.294 TRACE c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m65386080018501632 [0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-06-30 18:20:56.294 TRACE c.c.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m65386080022695936 [0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-06-30 18:20:56.295 TRACE c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m65386080018501632 [0;39m <==        Row: 2021-06-29, 0, 0, 0, 0
2021-06-30 18:20:56.295 TRACE c.c.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m65386080022695936 [0;39m <==        Row: 2021-06-29, 0, 0
2021-06-30 18:20:56.295 DEBUG c.c.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m65386080022695936 [0;39m <==      Total: 1
2021-06-30 18:20:56.295 TRACE c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m65386080018501632 [0;39m <==        Row: 2021-06-30, 115, 43, 115, 43
2021-06-30 18:20:56.295 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65386080022695937 [0;39m <==    Columns: id, parent, name, sort
2021-06-30 18:20:56.296 INFO  com.cq.wiki.aspect.LogAspect                      :89   [32m65386080022695936 [0;39m 返回结果: {"content":[{"date":1624896000000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0}],"success":true}
2021-06-30 18:20:56.296 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m65386080018501632 [0;39m <==      Total: 2
2021-06-30 18:20:56.296 INFO  com.cq.wiki.aspect.LogAspect                      :90   [32m65386080022695936 [0;39m ------------- 结束 耗时：4 ms -------------
2021-06-30 18:20:56.296 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65386080022695937 [0;39m <==        Row: 100, 0, 前端开发, 100
2021-06-30 18:20:56.296 INFO  com.cq.wiki.aspect.LogAspect                      :89   [32m65386080018501632 [0;39m 返回结果: {"content":[{"date":1624896000000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1624982400000,"viewCount":115,"viewIncrease":115,"voteCount":43,"voteIncrease":43}],"success":true}
2021-06-30 18:20:56.296 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65386080022695937 [0;39m <==        Row: 101, 100, Vue, 101
2021-06-30 18:20:56.296 INFO  com.cq.wiki.aspect.LogAspect                      :90   [32m65386080018501632 [0;39m ------------- 结束 耗时：5 ms -------------
2021-06-30 18:20:56.296 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65386080022695937 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-06-30 18:20:56.296 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65386080022695937 [0;39m <==        Row: 200, 0, Java, 200
2021-06-30 18:20:56.297 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65386080022695937 [0;39m <==        Row: 201, 200, 基础应用, 201
2021-06-30 18:20:56.297 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65386080022695937 [0;39m <==        Row: 202, 200, 框架开发, 202
2021-06-30 18:20:56.297 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65386080022695937 [0;39m <==        Row: 300, 0, Python, 300
2021-06-30 18:20:56.297 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65386080022695937 [0;39m <==        Row: 301, 300, 基础应用, 301
2021-06-30 18:20:56.298 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65386080022695937 [0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-06-30 18:20:56.298 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65386080022695937 [0;39m <==        Row: 400, 0, 数据库, 400
2021-06-30 18:20:56.298 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65386080022695937 [0;39m <==        Row: 401, 400, MySQL, 401
2021-06-30 18:20:56.298 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65386080022695937 [0;39m <==        Row: 402, 400, Oracle, 402
2021-06-30 18:20:56.298 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65386080022695937 [0;39m <==        Row: 500, 0, 其他, 500
2021-06-30 18:20:56.299 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65386080022695937 [0;39m <==        Row: 501, 500, 服务器, 501
2021-06-30 18:20:56.299 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65386080022695937 [0;39m <==        Row: 502, 500, 开发工具, 502
2021-06-30 18:20:56.299 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65386080022695937 [0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-06-30 18:20:56.299 DEBUG com.cq.wiki.mapper.CategoryMapper.selectByExample :137  [32m65386080022695937 [0;39m <==      Total: 16
2021-06-30 18:20:56.301 INFO  com.cq.wiki.aspect.LogAspect                      :89   [32m65386080022695937 [0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架开发","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":402,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-06-30 18:20:56.301 INFO  com.cq.wiki.aspect.LogAspect                      :90   [32m65386080022695937 [0;39m ------------- 结束 耗时：9 ms -------------
2021-06-30 18:21:00.017 INFO  com.cq.wiki.job.EbookSnapshotJob                  :32   [32m65386095646478336 [0;39m 生成今日电子书快照开始
2021-06-30 18:21:00.018 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65386095646478336 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-06-30 18:21:00.019 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65386095646478336 [0;39m ==> Parameters: 
2021-06-30 18:21:00.020 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65386095646478336 [0;39m <==    Updates: 0
2021-06-30 18:21:00.021 INFO  com.cq.wiki.job.EbookSnapshotJob                  :35   [32m65386095646478336 [0;39m 生成今日电子书快照结束，耗时：4毫秒
2021-06-30 18:21:00.310 INFO  com.cq.wiki.aspect.LogAspect                      :52   [32m65386096875409408 [0;39m ------------- 开始 -------------
2021-06-30 18:21:00.311 INFO  com.cq.wiki.aspect.LogAspect                      :53   [32m65386096875409408 [0;39m 请求地址: http://127.0.0.1:8880/user/login POST
2021-06-30 18:21:00.311 INFO  com.cq.wiki.aspect.LogAspect                      :54   [32m65386096875409408 [0;39m 类名方法: com.cq.wiki.controller.UserController.login
2021-06-30 18:21:00.311 INFO  com.cq.wiki.aspect.LogAspect                      :55   [32m65386096875409408 [0;39m 远程地址: 127.0.0.1
2021-06-30 18:21:00.312 INFO  com.cq.wiki.aspect.LogAspect                      :77   [32m65386096875409408 [0;39m 请求参数: [{"loginName":"test"}]
2021-06-30 18:21:00.316 DEBUG com.cq.wiki.mapper.UserMapper.selectByExample     :137  [32m65386096875409408 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user WHERE ( login_name = ? )
2021-06-30 18:21:00.317 DEBUG com.cq.wiki.mapper.UserMapper.selectByExample     :137  [32m65386096875409408 [0;39m ==> Parameters: test(String)
2021-06-30 18:21:00.318 TRACE com.cq.wiki.mapper.UserMapper.selectByExample     :143  [32m65386096875409408 [0;39m <==    Columns: id, login_name, name, password
2021-06-30 18:21:00.318 TRACE com.cq.wiki.mapper.UserMapper.selectByExample     :143  [32m65386096875409408 [0;39m <==        Row: 6290961574199, test, 测试, e70e2222a9d67c4f2eae107533359aa4
2021-06-30 18:21:00.318 DEBUG com.cq.wiki.mapper.UserMapper.selectByExample     :137  [32m65386096875409408 [0;39m <==      Total: 1
2021-06-30 18:21:00.322 INFO  com.cq.wiki.util.TokenUtil                        :24   [32m65386096875409408 [0;39m 当前时间的时间戳1625048460322
2021-06-30 18:21:00.322 INFO  com.cq.wiki.util.TokenUtil                        :27   [32m65386096875409408 [0;39m 过期时间戳为：1625134860322
2021-06-30 18:21:00.332 DEBUG com.cq.wiki.mapper.TokenMapper.insert             :137  [32m65386096875409408 [0;39m ==>  Preparing: insert into token (id, token) values (?, ?)
2021-06-30 18:21:00.333 DEBUG com.cq.wiki.mapper.TokenMapper.insert             :137  [32m65386096875409408 [0;39m ==> Parameters: 65386096967684096(Long), eyJhbGciOiJIUzI1NiJ9.eyJsb2dpbk5hbWUiOiJ0ZXN0IiwibmFtZSI6Iua1i-ivlSIsImlkIjo2MjkwOTYxNTc0MTk5LCJleHAiOjE2MjUxMzQ4NjAsImlhdCI6MTYyNTA0ODQ2MH0.9wQw14DPfVXjjP0d9g7UpQ0nKwcOsbdjILeiwfdzy7c(String)
2021-06-30 18:21:00.336 DEBUG com.cq.wiki.mapper.TokenMapper.insert             :137  [32m65386096875409408 [0;39m <==    Updates: 1
2021-06-30 18:21:00.336 INFO  com.cq.wiki.service.UserService                   :66   [32m65386096875409408 [0;39m token为：eyJhbGciOiJIUzI1NiJ9.eyJsb2dpbk5hbWUiOiJ0ZXN0IiwibmFtZSI6Iua1i-ivlSIsImlkIjo2MjkwOTYxNTc0MTk5LCJleHAiOjE2MjUxMzQ4NjAsImlhdCI6MTYyNTA0ODQ2MH0.9wQw14DPfVXjjP0d9g7UpQ0nKwcOsbdjILeiwfdzy7c
2021-06-30 18:21:00.338 INFO  com.cq.wiki.aspect.LogAspect                      :89   [32m65386096875409408 [0;39m 返回结果: {"content":{"id":6290961574199,"loginName":"test","name":"测试","token":"eyJhbGciOiJIUzI1NiJ9.eyJsb2dpbk5hbWUiOiJ0ZXN0IiwibmFtZSI6Iua1i-ivlSIsImlkIjo2MjkwOTYxNTc0MTk5LCJleHAiOjE2MjUxMzQ4NjAsImlhdCI6MTYyNTA0ODQ2MH0.9wQw14DPfVXjjP0d9g7UpQ0nKwcOsbdjILeiwfdzy7c"},"success":true}
2021-06-30 18:21:00.338 INFO  com.cq.wiki.aspect.LogAspect                      :90   [32m65386096875409408 [0;39m ------------- 结束 耗时：28 ms -------------
2021-06-30 18:21:05.007 INFO  com.cq.wiki.job.DocJob                            :31   [32m65386116576055296 [0;39m 更新电子书下的文档数据开始
2021-06-30 18:21:05.007 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65386116576055296 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-06-30 18:21:05.007 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65386116576055296 [0;39m ==> Parameters: 
2021-06-30 18:21:05.007 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65386116576055296 [0;39m <==    Updates: 7
2021-06-30 18:21:05.007 INFO  com.cq.wiki.job.DocJob                            :34   [32m65386116576055296 [0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2021-06-30 18:21:35.020 INFO  com.cq.wiki.job.DocJob                            :31   [32m65386242459701248 [0;39m 更新电子书下的文档数据开始
2021-06-30 18:21:35.020 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65386242459701248 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-06-30 18:21:35.020 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65386242459701248 [0;39m ==> Parameters: 
2021-06-30 18:21:35.020 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65386242459701248 [0;39m <==    Updates: 7
2021-06-30 18:21:35.020 INFO  com.cq.wiki.job.DocJob                            :34   [32m65386242459701248 [0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2021-06-30 18:22:00.006 INFO  com.cq.wiki.job.EbookSnapshotJob                  :32   [32m65386347258580992 [0;39m 生成今日电子书快照开始
2021-06-30 18:22:00.006 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65386347258580992 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-06-30 18:22:00.006 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65386347258580992 [0;39m ==> Parameters: 
2021-06-30 18:22:00.019 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65386347258580992 [0;39m <==    Updates: 0
2021-06-30 18:22:00.019 INFO  com.cq.wiki.job.EbookSnapshotJob                  :35   [32m65386347258580992 [0;39m 生成今日电子书快照结束，耗时：13毫秒
2021-06-30 18:22:05.023 INFO  com.cq.wiki.job.DocJob                            :31   [32m65386368301404160 [0;39m 更新电子书下的文档数据开始
2021-06-30 18:22:05.023 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65386368301404160 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-06-30 18:22:05.023 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65386368301404160 [0;39m ==> Parameters: 
2021-06-30 18:22:05.023 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65386368301404160 [0;39m <==    Updates: 7
2021-06-30 18:22:05.023 INFO  com.cq.wiki.job.DocJob                            :34   [32m65386368301404160 [0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2021-06-30 18:22:35.015 INFO  com.cq.wiki.job.DocJob                            :31   [32m65386494096969728 [0;39m 更新电子书下的文档数据开始
2021-06-30 18:22:35.015 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65386494096969728 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-06-30 18:22:35.015 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65386494096969728 [0;39m ==> Parameters: 
2021-06-30 18:22:35.015 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65386494096969728 [0;39m <==    Updates: 7
2021-06-30 18:22:35.015 INFO  com.cq.wiki.job.DocJob                            :34   [32m65386494096969728 [0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2021-06-30 18:23:00.009 INFO  com.cq.wiki.job.EbookSnapshotJob                  :32   [32m65386598929403904 [0;39m 生成今日电子书快照开始
2021-06-30 18:23:00.009 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65386598929403904 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-06-30 18:23:00.009 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65386598929403904 [0;39m ==> Parameters: 
2021-06-30 18:23:00.009 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65386598929403904 [0;39m <==    Updates: 0
2021-06-30 18:23:00.009 INFO  com.cq.wiki.job.EbookSnapshotJob                  :35   [32m65386598929403904 [0;39m 生成今日电子书快照结束，耗时：0毫秒
2021-06-30 18:23:05.010 INFO  com.cq.wiki.job.DocJob                            :31   [32m65386619905118208 [0;39m 更新电子书下的文档数据开始
2021-06-30 18:23:05.010 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65386619905118208 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-06-30 18:23:05.010 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65386619905118208 [0;39m ==> Parameters: 
2021-06-30 18:23:05.010 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65386619905118208 [0;39m <==    Updates: 7
2021-06-30 18:23:05.010 INFO  com.cq.wiki.job.DocJob                            :34   [32m65386619905118208 [0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2021-06-30 18:23:35.005 INFO  com.cq.wiki.job.DocJob                            :31   [32m65386745713266688 [0;39m 更新电子书下的文档数据开始
2021-06-30 18:23:35.006 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65386745713266688 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-06-30 18:23:35.006 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65386745713266688 [0;39m ==> Parameters: 
2021-06-30 18:23:35.007 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65386745713266688 [0;39m <==    Updates: 7
2021-06-30 18:23:35.007 INFO  com.cq.wiki.job.DocJob                            :34   [32m65386745713266688 [0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2021-06-30 18:23:37.557 INFO  com.cq.wiki.aspect.LogAspect                      :52   [32m65386756417130496 [0;39m ------------- 开始 -------------
2021-06-30 18:23:37.557 INFO  com.cq.wiki.aspect.LogAspect                      :53   [32m65386756417130496 [0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2021-06-30 18:23:37.557 INFO  com.cq.wiki.aspect.LogAspect                      :54   [32m65386756417130496 [0;39m 类名方法: com.cq.wiki.controller.CategoryController.allBook
2021-06-30 18:23:37.557 INFO  com.cq.wiki.aspect.LogAspect                      :55   [32m65386756417130496 [0;39m 远程地址: 127.0.0.1
2021-06-30 18:23:37.557 INFO  com.cq.wiki.aspect.LogAspect                      :77   [32m65386756417130496 [0;39m 请求参数: []
2021-06-30 18:23:37.558 DEBUG com.cq.wiki.mapper.CategoryMapper.selectByExample :137  [32m65386756417130496 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-06-30 18:23:37.559 DEBUG com.cq.wiki.mapper.CategoryMapper.selectByExample :137  [32m65386756417130496 [0;39m ==> Parameters: 
2021-06-30 18:23:37.560 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65386756417130496 [0;39m <==    Columns: id, parent, name, sort
2021-06-30 18:23:37.560 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65386756417130496 [0;39m <==        Row: 100, 0, 前端开发, 100
2021-06-30 18:23:37.560 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65386756417130496 [0;39m <==        Row: 101, 100, Vue, 101
2021-06-30 18:23:37.561 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65386756417130496 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-06-30 18:23:37.561 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65386756417130496 [0;39m <==        Row: 200, 0, Java, 200
2021-06-30 18:23:37.561 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65386756417130496 [0;39m <==        Row: 201, 200, 基础应用, 201
2021-06-30 18:23:37.561 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65386756417130496 [0;39m <==        Row: 202, 200, 框架开发, 202
2021-06-30 18:23:37.561 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65386756417130496 [0;39m <==        Row: 300, 0, Python, 300
2021-06-30 18:23:37.562 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65386756417130496 [0;39m <==        Row: 301, 300, 基础应用, 301
2021-06-30 18:23:37.562 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65386756417130496 [0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-06-30 18:23:37.562 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65386756417130496 [0;39m <==        Row: 400, 0, 数据库, 400
2021-06-30 18:23:37.562 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65386756417130496 [0;39m <==        Row: 401, 400, MySQL, 401
2021-06-30 18:23:37.562 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65386756417130496 [0;39m <==        Row: 402, 400, Oracle, 402
2021-06-30 18:23:37.562 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65386756417130496 [0;39m <==        Row: 500, 0, 其他, 500
2021-06-30 18:23:37.563 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65386756417130496 [0;39m <==        Row: 501, 500, 服务器, 501
2021-06-30 18:23:37.563 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65386756417130496 [0;39m <==        Row: 502, 500, 开发工具, 502
2021-06-30 18:23:37.563 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65386756417130496 [0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-06-30 18:23:37.563 DEBUG com.cq.wiki.mapper.CategoryMapper.selectByExample :137  [32m65386756417130496 [0;39m <==      Total: 16
2021-06-30 18:23:37.564 INFO  com.cq.wiki.aspect.LogAspect                      :89   [32m65386756417130496 [0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架开发","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":402,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-06-30 18:23:37.564 INFO  com.cq.wiki.aspect.LogAspect                      :90   [32m65386756417130496 [0;39m ------------- 结束 耗时：7 ms -------------
2021-06-30 18:23:37.938 INFO  com.cq.wiki.interceptor.LoginInterceptor          :33   [32m65386048489918465 [0;39m ------------- LoginInterceptor 开始 -------------
2021-06-30 18:23:37.938 INFO  com.cq.wiki.interceptor.LoginInterceptor          :38   [32m65386048489918465 [0;39m 从请求头里获取token：eyJhbGciOiJIUzI1NiJ9.eyJsb2dpbk5hbWUiOiJ0ZXN0IiwibmFtZSI6Iua1i-ivlSIsImlkIjo2MjkwOTYxNTc0MTk5LCJleHAiOjE2MjUxMzQ4NjAsImlhdCI6MTYyNTA0ODQ2MH0.9wQw14DPfVXjjP0d9g7UpQ0nKwcOsbdjILeiwfdzy7c
2021-06-30 18:23:37.939 INFO  com.cq.wiki.interceptor.LoginInterceptor          :60   [32m65386048489918465 [0;39m token：eyJhbGciOiJIUzI1NiJ9.eyJsb2dpbk5hbWUiOiJ0ZXN0IiwibmFtZSI6Iua1i-ivlSIsImlkIjo2MjkwOTYxNTc0MTk5LCJleHAiOjE2MjUxMzQ4NjAsImlhdCI6MTYyNTA0ODQ2MH0.9wQw14DPfVXjjP0d9g7UpQ0nKwcOsbdjILeiwfdzy7c验证通过
2021-06-30 18:23:37.945 INFO  com.cq.wiki.aspect.LogAspect                      :52   [32m65386758044520448 [0;39m ------------- 开始 -------------
2021-06-30 18:23:37.946 INFO  com.cq.wiki.aspect.LogAspect                      :53   [32m65386758044520448 [0;39m 请求地址: http://127.0.0.1:8880/user/list GET
2021-06-30 18:23:37.946 INFO  com.cq.wiki.aspect.LogAspect                      :54   [32m65386758044520448 [0;39m 类名方法: com.cq.wiki.controller.UserController.list
2021-06-30 18:23:37.946 INFO  com.cq.wiki.aspect.LogAspect                      :55   [32m65386758044520448 [0;39m 远程地址: 127.0.0.1
2021-06-30 18:23:37.947 INFO  com.cq.wiki.aspect.LogAspect                      :77   [32m65386758044520448 [0;39m 请求参数: [{"page":1,"size":10}]
2021-06-30 18:23:37.949 DEBUG c.cq.wiki.mapper.UserMapper.selectByExample_COUNT :137  [32m65386758044520448 [0;39m ==>  Preparing: SELECT count(0) FROM user
2021-06-30 18:23:37.949 DEBUG c.cq.wiki.mapper.UserMapper.selectByExample_COUNT :137  [32m65386758044520448 [0;39m ==> Parameters: 
2021-06-30 18:23:37.951 TRACE c.cq.wiki.mapper.UserMapper.selectByExample_COUNT :143  [32m65386758044520448 [0;39m <==    Columns: count(0)
2021-06-30 18:23:37.951 TRACE c.cq.wiki.mapper.UserMapper.selectByExample_COUNT :143  [32m65386758044520448 [0;39m <==        Row: 3
2021-06-30 18:23:37.952 DEBUG c.cq.wiki.mapper.UserMapper.selectByExample_COUNT :137  [32m65386758044520448 [0;39m <==      Total: 1
2021-06-30 18:23:37.952 DEBUG com.cq.wiki.mapper.UserMapper.selectByExample     :137  [32m65386758044520448 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user LIMIT ?
2021-06-30 18:23:37.953 DEBUG com.cq.wiki.mapper.UserMapper.selectByExample     :137  [32m65386758044520448 [0;39m ==> Parameters: 10(Integer)
2021-06-30 18:23:37.954 TRACE com.cq.wiki.mapper.UserMapper.selectByExample     :143  [32m65386758044520448 [0;39m <==    Columns: id, login_name, name, password
2021-06-30 18:23:37.954 TRACE com.cq.wiki.mapper.UserMapper.selectByExample     :143  [32m65386758044520448 [0;39m <==        Row: 6214409874794, chengqi0418, 程崎, 2f32b1a48b8bca0794a27782ce5eca6c
2021-06-30 18:23:37.955 TRACE com.cq.wiki.mapper.UserMapper.selectByExample     :143  [32m65386758044520448 [0;39m <==        Row: 6214732732183, hwh0717, 霍文慧, 79e63af7f217d11b7469265980f20156
2021-06-30 18:23:37.955 TRACE com.cq.wiki.mapper.UserMapper.selectByExample     :143  [32m65386758044520448 [0;39m <==        Row: 6290961574199, test, 测试, e70e2222a9d67c4f2eae107533359aa4
2021-06-30 18:23:37.955 DEBUG com.cq.wiki.mapper.UserMapper.selectByExample     :137  [32m65386758044520448 [0;39m <==      Total: 3
2021-06-30 18:23:37.955 INFO  com.cq.wiki.service.UserService                   :88   [32m65386758044520448 [0;39m 总行数：3
2021-06-30 18:23:37.955 INFO  com.cq.wiki.service.UserService                   :89   [32m65386758044520448 [0;39m 总页数：1
2021-06-30 18:23:37.961 INFO  com.cq.wiki.aspect.LogAspect                      :89   [32m65386758044520448 [0;39m 返回结果: {"content":{"list":[{"id":6214409874794,"loginName":"chengqi0418","name":"程崎"},{"id":6214732732183,"loginName":"hwh0717","name":"霍文慧"},{"id":6290961574199,"loginName":"test","name":"测试"}],"total":3},"success":true}
2021-06-30 18:23:37.962 INFO  com.cq.wiki.aspect.LogAspect                      :90   [32m65386758044520448 [0;39m ------------- 结束 耗时：17 ms -------------
2021-06-30 18:23:37.964 INFO  com.cq.wiki.interceptor.LoginInterceptor          :73   [32m65386758044520448 [0;39m ------------- LoginInterceptor 结束 耗时：26 ms -------------
2021-06-30 18:23:38.522 INFO  com.cq.wiki.aspect.LogAspect                      :52   [32m65386760460439552 [0;39m ------------- 开始 -------------
2021-06-30 18:23:38.522 INFO  com.cq.wiki.aspect.LogAspect                      :53   [32m65386760460439552 [0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2021-06-30 18:23:38.522 INFO  com.cq.wiki.aspect.LogAspect                      :54   [32m65386760460439552 [0;39m 类名方法: com.cq.wiki.controller.EbookSnapshotController.getStatistic
2021-06-30 18:23:38.523 INFO  com.cq.wiki.aspect.LogAspect                      :55   [32m65386760460439552 [0;39m 远程地址: 127.0.0.1
2021-06-30 18:23:38.523 INFO  com.cq.wiki.aspect.LogAspect                      :77   [32m65386760460439552 [0;39m 请求参数: []
2021-06-30 18:23:38.524 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m65386760460439552 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-06-30 18:23:38.524 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m65386760460439552 [0;39m ==> Parameters: 
2021-06-30 18:23:38.525 INFO  com.cq.wiki.aspect.LogAspect                      :52   [32m65386760477216768 [0;39m ------------- 开始 -------------
2021-06-30 18:23:38.525 INFO  com.cq.wiki.aspect.LogAspect                      :52   [32m65386760477216769 [0;39m ------------- 开始 -------------
2021-06-30 18:23:38.525 INFO  com.cq.wiki.aspect.LogAspect                      :53   [32m65386760477216768 [0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2021-06-30 18:23:38.525 INFO  com.cq.wiki.aspect.LogAspect                      :53   [32m65386760477216769 [0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2021-06-30 18:23:38.525 INFO  com.cq.wiki.aspect.LogAspect                      :54   [32m65386760477216768 [0;39m 类名方法: com.cq.wiki.controller.EbookSnapshotController.get30Statistic
2021-06-30 18:23:38.525 INFO  com.cq.wiki.aspect.LogAspect                      :54   [32m65386760477216769 [0;39m 类名方法: com.cq.wiki.controller.CategoryController.allBook
2021-06-30 18:23:38.525 INFO  com.cq.wiki.aspect.LogAspect                      :55   [32m65386760477216768 [0;39m 远程地址: 127.0.0.1
2021-06-30 18:23:38.525 INFO  com.cq.wiki.aspect.LogAspect                      :55   [32m65386760477216769 [0;39m 远程地址: 127.0.0.1
2021-06-30 18:23:38.526 INFO  com.cq.wiki.aspect.LogAspect                      :77   [32m65386760477216768 [0;39m 请求参数: []
2021-06-30 18:23:38.526 INFO  com.cq.wiki.aspect.LogAspect                      :77   [32m65386760477216769 [0;39m 请求参数: []
2021-06-30 18:23:38.526 TRACE c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m65386760460439552 [0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-06-30 18:23:38.526 TRACE c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m65386760460439552 [0;39m <==        Row: 2021-06-29, 0, 0, 0, 0
2021-06-30 18:23:38.526 DEBUG com.cq.wiki.mapper.CategoryMapper.selectByExample :137  [32m65386760477216769 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-06-30 18:23:38.526 DEBUG c.c.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m65386760477216768 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-06-30 18:23:38.526 TRACE c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m65386760460439552 [0;39m <==        Row: 2021-06-30, 118, 43, 118, 43
2021-06-30 18:23:38.526 DEBUG com.cq.wiki.mapper.CategoryMapper.selectByExample :137  [32m65386760477216769 [0;39m ==> Parameters: 
2021-06-30 18:23:38.526 DEBUG c.c.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m65386760477216768 [0;39m ==> Parameters: 
2021-06-30 18:23:38.527 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m65386760460439552 [0;39m <==      Total: 2
2021-06-30 18:23:38.527 INFO  com.cq.wiki.aspect.LogAspect                      :89   [32m65386760460439552 [0;39m 返回结果: {"content":[{"date":1624896000000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1624982400000,"viewCount":118,"viewIncrease":118,"voteCount":43,"voteIncrease":43}],"success":true}
2021-06-30 18:23:38.527 INFO  com.cq.wiki.aspect.LogAspect                      :90   [32m65386760460439552 [0;39m ------------- 结束 耗时：6 ms -------------
2021-06-30 18:23:38.528 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65386760477216769 [0;39m <==    Columns: id, parent, name, sort
2021-06-30 18:23:38.528 TRACE c.c.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m65386760477216768 [0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-06-30 18:23:38.528 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65386760477216769 [0;39m <==        Row: 100, 0, 前端开发, 100
2021-06-30 18:23:38.528 TRACE c.c.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m65386760477216768 [0;39m <==        Row: 2021-06-29, 0, 0
2021-06-30 18:23:38.528 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65386760477216769 [0;39m <==        Row: 101, 100, Vue, 101
2021-06-30 18:23:38.528 DEBUG c.c.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m65386760477216768 [0;39m <==      Total: 1
2021-06-30 18:23:38.529 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65386760477216769 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-06-30 18:23:38.529 INFO  com.cq.wiki.aspect.LogAspect                      :89   [32m65386760477216768 [0;39m 返回结果: {"content":[{"date":1624896000000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0}],"success":true}
2021-06-30 18:23:38.529 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65386760477216769 [0;39m <==        Row: 200, 0, Java, 200
2021-06-30 18:23:38.529 INFO  com.cq.wiki.aspect.LogAspect                      :90   [32m65386760477216768 [0;39m ------------- 结束 耗时：4 ms -------------
2021-06-30 18:23:38.529 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65386760477216769 [0;39m <==        Row: 201, 200, 基础应用, 201
2021-06-30 18:23:38.530 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65386760477216769 [0;39m <==        Row: 202, 200, 框架开发, 202
2021-06-30 18:23:38.530 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65386760477216769 [0;39m <==        Row: 300, 0, Python, 300
2021-06-30 18:23:38.530 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65386760477216769 [0;39m <==        Row: 301, 300, 基础应用, 301
2021-06-30 18:23:38.531 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65386760477216769 [0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-06-30 18:23:38.531 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65386760477216769 [0;39m <==        Row: 400, 0, 数据库, 400
2021-06-30 18:23:38.531 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65386760477216769 [0;39m <==        Row: 401, 400, MySQL, 401
2021-06-30 18:23:38.532 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65386760477216769 [0;39m <==        Row: 402, 400, Oracle, 402
2021-06-30 18:23:38.532 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65386760477216769 [0;39m <==        Row: 500, 0, 其他, 500
2021-06-30 18:23:38.532 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65386760477216769 [0;39m <==        Row: 501, 500, 服务器, 501
2021-06-30 18:23:38.532 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65386760477216769 [0;39m <==        Row: 502, 500, 开发工具, 502
2021-06-30 18:23:38.532 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65386760477216769 [0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-06-30 18:23:38.532 DEBUG com.cq.wiki.mapper.CategoryMapper.selectByExample :137  [32m65386760477216769 [0;39m <==      Total: 16
2021-06-30 18:23:38.533 INFO  com.cq.wiki.aspect.LogAspect                      :89   [32m65386760477216769 [0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架开发","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":402,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-06-30 18:23:38.533 INFO  com.cq.wiki.aspect.LogAspect                      :90   [32m65386760477216769 [0;39m ------------- 结束 耗时：8 ms -------------
2021-06-30 18:23:39.125 INFO  com.cq.wiki.interceptor.LoginInterceptor          :33   [32m65386080022695937 [0;39m ------------- LoginInterceptor 开始 -------------
2021-06-30 18:23:39.125 INFO  com.cq.wiki.interceptor.LoginInterceptor          :38   [32m65386080022695937 [0;39m 从请求头里获取token：eyJhbGciOiJIUzI1NiJ9.eyJsb2dpbk5hbWUiOiJ0ZXN0IiwibmFtZSI6Iua1i-ivlSIsImlkIjo2MjkwOTYxNTc0MTk5LCJleHAiOjE2MjUxMzQ4NjAsImlhdCI6MTYyNTA0ODQ2MH0.9wQw14DPfVXjjP0d9g7UpQ0nKwcOsbdjILeiwfdzy7c
2021-06-30 18:23:39.126 INFO  com.cq.wiki.interceptor.LoginInterceptor          :60   [32m65386080022695937 [0;39m token：eyJhbGciOiJIUzI1NiJ9.eyJsb2dpbk5hbWUiOiJ0ZXN0IiwibmFtZSI6Iua1i-ivlSIsImlkIjo2MjkwOTYxNTc0MTk5LCJleHAiOjE2MjUxMzQ4NjAsImlhdCI6MTYyNTA0ODQ2MH0.9wQw14DPfVXjjP0d9g7UpQ0nKwcOsbdjILeiwfdzy7c验证通过
2021-06-30 18:23:39.126 INFO  com.cq.wiki.aspect.LogAspect                      :52   [32m65386762997993472 [0;39m ------------- 开始 -------------
2021-06-30 18:23:39.127 INFO  com.cq.wiki.aspect.LogAspect                      :53   [32m65386762997993472 [0;39m 请求地址: http://127.0.0.1:8880/user/list GET
2021-06-30 18:23:39.127 INFO  com.cq.wiki.aspect.LogAspect                      :54   [32m65386762997993472 [0;39m 类名方法: com.cq.wiki.controller.UserController.list
2021-06-30 18:23:39.127 INFO  com.cq.wiki.aspect.LogAspect                      :55   [32m65386762997993472 [0;39m 远程地址: 127.0.0.1
2021-06-30 18:23:39.127 INFO  com.cq.wiki.aspect.LogAspect                      :77   [32m65386762997993472 [0;39m 请求参数: [{"page":1,"size":10}]
2021-06-30 18:23:39.128 DEBUG c.cq.wiki.mapper.UserMapper.selectByExample_COUNT :137  [32m65386762997993472 [0;39m ==>  Preparing: SELECT count(0) FROM user
2021-06-30 18:23:39.129 DEBUG c.cq.wiki.mapper.UserMapper.selectByExample_COUNT :137  [32m65386762997993472 [0;39m ==> Parameters: 
2021-06-30 18:23:39.130 TRACE c.cq.wiki.mapper.UserMapper.selectByExample_COUNT :143  [32m65386762997993472 [0;39m <==    Columns: count(0)
2021-06-30 18:23:39.130 TRACE c.cq.wiki.mapper.UserMapper.selectByExample_COUNT :143  [32m65386762997993472 [0;39m <==        Row: 3
2021-06-30 18:23:39.131 DEBUG c.cq.wiki.mapper.UserMapper.selectByExample_COUNT :137  [32m65386762997993472 [0;39m <==      Total: 1
2021-06-30 18:23:39.131 DEBUG com.cq.wiki.mapper.UserMapper.selectByExample     :137  [32m65386762997993472 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user LIMIT ?
2021-06-30 18:23:39.131 DEBUG com.cq.wiki.mapper.UserMapper.selectByExample     :137  [32m65386762997993472 [0;39m ==> Parameters: 10(Integer)
2021-06-30 18:23:39.132 TRACE com.cq.wiki.mapper.UserMapper.selectByExample     :143  [32m65386762997993472 [0;39m <==    Columns: id, login_name, name, password
2021-06-30 18:23:39.133 TRACE com.cq.wiki.mapper.UserMapper.selectByExample     :143  [32m65386762997993472 [0;39m <==        Row: 6214409874794, chengqi0418, 程崎, 2f32b1a48b8bca0794a27782ce5eca6c
2021-06-30 18:23:39.133 TRACE com.cq.wiki.mapper.UserMapper.selectByExample     :143  [32m65386762997993472 [0;39m <==        Row: 6214732732183, hwh0717, 霍文慧, 79e63af7f217d11b7469265980f20156
2021-06-30 18:23:39.133 TRACE com.cq.wiki.mapper.UserMapper.selectByExample     :143  [32m65386762997993472 [0;39m <==        Row: 6290961574199, test, 测试, e70e2222a9d67c4f2eae107533359aa4
2021-06-30 18:23:39.134 DEBUG com.cq.wiki.mapper.UserMapper.selectByExample     :137  [32m65386762997993472 [0;39m <==      Total: 3
2021-06-30 18:23:39.134 INFO  com.cq.wiki.service.UserService                   :88   [32m65386762997993472 [0;39m 总行数：3
2021-06-30 18:23:39.134 INFO  com.cq.wiki.service.UserService                   :89   [32m65386762997993472 [0;39m 总页数：1
2021-06-30 18:23:39.134 INFO  com.cq.wiki.aspect.LogAspect                      :89   [32m65386762997993472 [0;39m 返回结果: {"content":{"list":[{"id":6214409874794,"loginName":"chengqi0418","name":"程崎"},{"id":6214732732183,"loginName":"hwh0717","name":"霍文慧"},{"id":6290961574199,"loginName":"test","name":"测试"}],"total":3},"success":true}
2021-06-30 18:23:39.134 INFO  com.cq.wiki.aspect.LogAspect                      :90   [32m65386762997993472 [0;39m ------------- 结束 耗时：8 ms -------------
2021-06-30 18:23:39.135 INFO  com.cq.wiki.interceptor.LoginInterceptor          :73   [32m65386762997993472 [0;39m ------------- LoginInterceptor 结束 耗时：10 ms -------------
2021-06-30 18:24:00.016 INFO  com.cq.wiki.job.EbookSnapshotJob                  :32   [32m65386850617004032 [0;39m 生成今日电子书快照开始
2021-06-30 18:24:00.016 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65386850617004032 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-06-30 18:24:00.016 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65386850617004032 [0;39m ==> Parameters: 
2021-06-30 18:24:00.016 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65386850617004032 [0;39m <==    Updates: 0
2021-06-30 18:24:00.016 INFO  com.cq.wiki.job.EbookSnapshotJob                  :35   [32m65386850617004032 [0;39m 生成今日电子书快照结束，耗时：0毫秒
2021-06-30 18:24:05.001 INFO  com.cq.wiki.job.DocJob                            :31   [32m65386871525609472 [0;39m 更新电子书下的文档数据开始
2021-06-30 18:24:05.001 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65386871525609472 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-06-30 18:24:05.001 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65386871525609472 [0;39m ==> Parameters: 
2021-06-30 18:24:05.001 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65386871525609472 [0;39m <==    Updates: 7
2021-06-30 18:24:05.001 INFO  com.cq.wiki.job.DocJob                            :34   [32m65386871525609472 [0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2021-06-30 18:24:35.012 INFO  com.cq.wiki.job.DocJob                            :31   [32m65386997400866816 [0;39m 更新电子书下的文档数据开始
2021-06-30 18:24:35.012 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65386997400866816 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-06-30 18:24:35.012 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65386997400866816 [0;39m ==> Parameters: 
2021-06-30 18:24:35.012 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65386997400866816 [0;39m <==    Updates: 7
2021-06-30 18:24:35.012 INFO  com.cq.wiki.job.DocJob                            :34   [32m65386997400866816 [0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2021-06-30 18:25:00.005 INFO  com.cq.wiki.job.EbookSnapshotJob                  :32   [32m65387102229106688 [0;39m 生成今日电子书快照开始
2021-06-30 18:25:00.005 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65387102229106688 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-06-30 18:25:00.005 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65387102229106688 [0;39m ==> Parameters: 
2021-06-30 18:25:00.005 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65387102229106688 [0;39m <==    Updates: 0
2021-06-30 18:25:00.005 INFO  com.cq.wiki.job.EbookSnapshotJob                  :35   [32m65387102229106688 [0;39m 生成今日电子书快照结束，耗时：0毫秒
2021-06-30 18:25:05.013 INFO  com.cq.wiki.job.DocJob                            :31   [32m65387123234181120 [0;39m 更新电子书下的文档数据开始
2021-06-30 18:25:05.013 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65387123234181120 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-06-30 18:25:05.013 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65387123234181120 [0;39m ==> Parameters: 
2021-06-30 18:25:05.013 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65387123234181120 [0;39m <==    Updates: 7
2021-06-30 18:25:05.013 INFO  com.cq.wiki.job.DocJob                            :34   [32m65387123234181120 [0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2021-06-30 18:25:35.019 INFO  com.cq.wiki.job.DocJob                            :31   [32m65387249088466944 [0;39m 更新电子书下的文档数据开始
2021-06-30 18:25:35.020 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65387249088466944 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-06-30 18:25:35.021 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65387249088466944 [0;39m ==> Parameters: 
2021-06-30 18:25:35.022 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65387249088466944 [0;39m <==    Updates: 7
2021-06-30 18:25:35.023 INFO  com.cq.wiki.job.DocJob                            :34   [32m65387249088466944 [0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2021-06-30 18:26:00.012 INFO  com.cq.wiki.job.EbookSnapshotJob                  :32   [32m65387353916706816 [0;39m 生成今日电子书快照开始
2021-06-30 18:26:00.012 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65387353916706816 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-06-30 18:26:00.012 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65387353916706816 [0;39m ==> Parameters: 
2021-06-30 18:26:00.012 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65387353916706816 [0;39m <==    Updates: 0
2021-06-30 18:26:00.012 INFO  com.cq.wiki.job.EbookSnapshotJob                  :35   [32m65387353916706816 [0;39m 生成今日电子书快照结束，耗时：0毫秒
2021-06-30 18:26:05.015 INFO  com.cq.wiki.job.DocJob                            :31   [32m65387374900809728 [0;39m 更新电子书下的文档数据开始
2021-06-30 18:26:05.017 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65387374900809728 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-06-30 18:26:05.017 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65387374900809728 [0;39m ==> Parameters: 
2021-06-30 18:26:05.018 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65387374900809728 [0;39m <==    Updates: 7
2021-06-30 18:26:05.018 INFO  com.cq.wiki.job.DocJob                            :34   [32m65387374900809728 [0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2021-06-30 18:26:35.009 INFO  com.cq.wiki.job.DocJob                            :31   [32m65387500704763904 [0;39m 更新电子书下的文档数据开始
2021-06-30 18:26:35.009 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65387500704763904 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-06-30 18:26:35.009 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65387500704763904 [0;39m ==> Parameters: 
2021-06-30 18:26:35.010 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65387500704763904 [0;39m <==    Updates: 7
2021-06-30 18:26:35.011 INFO  com.cq.wiki.job.DocJob                            :34   [32m65387500704763904 [0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2021-06-30 18:27:00.013 INFO  com.cq.wiki.job.EbookSnapshotJob                  :32   [32m65387605579141120 [0;39m 生成今日电子书快照开始
2021-06-30 18:27:00.013 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65387605579141120 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-06-30 18:27:00.013 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65387605579141120 [0;39m ==> Parameters: 
2021-06-30 18:27:00.013 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65387605579141120 [0;39m <==    Updates: 0
2021-06-30 18:27:00.013 INFO  com.cq.wiki.job.EbookSnapshotJob                  :35   [32m65387605579141120 [0;39m 生成今日电子书快照结束，耗时：0毫秒
2021-06-30 18:27:05.024 INFO  com.cq.wiki.job.DocJob                            :31   [32m65387626596798464 [0;39m 更新电子书下的文档数据开始
2021-06-30 18:27:05.024 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65387626596798464 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-06-30 18:27:05.024 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65387626596798464 [0;39m ==> Parameters: 
2021-06-30 18:27:05.024 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65387626596798464 [0;39m <==    Updates: 7
2021-06-30 18:27:05.024 INFO  com.cq.wiki.job.DocJob                            :34   [32m65387626596798464 [0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2021-06-30 18:27:35.012 INFO  com.cq.wiki.job.DocJob                            :31   [32m65387752375586816 [0;39m 更新电子书下的文档数据开始
2021-06-30 18:27:35.012 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65387752375586816 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-06-30 18:27:35.012 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65387752375586816 [0;39m ==> Parameters: 
2021-06-30 18:27:35.012 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65387752375586816 [0;39m <==    Updates: 7
2021-06-30 18:27:35.012 INFO  com.cq.wiki.job.DocJob                            :34   [32m65387752375586816 [0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2021-06-30 18:27:52.423 INFO  com.cq.wiki.websocket.WebSocketServer             :41   [32m65386044224311296 [0;39m 连接关闭，token：Z1zzAL9hMe，session id：2！当前连接数：0
2021-06-30 18:27:53.163 INFO  com.cq.wiki.websocket.WebSocketServer             :32   [32m65386756417130496 [0;39m 有新连接：token：ys59UqIfxQ，session id：3，当前连接数：1
2021-06-30 18:27:53.291 INFO  com.cq.wiki.interceptor.LoginInterceptor          :33   [32m65386758044520448 [0;39m ------------- LoginInterceptor 开始 -------------
2021-06-30 18:27:53.291 INFO  com.cq.wiki.interceptor.LoginInterceptor          :38   [32m65386758044520448 [0;39m 从请求头里获取token：eyJhbGciOiJIUzI1NiJ9.eyJsb2dpbk5hbWUiOiJ0ZXN0IiwibmFtZSI6Iua1i-ivlSIsImlkIjo2MjkwOTYxNTc0MTk5LCJleHAiOjE2MjUxMzQ4NjAsImlhdCI6MTYyNTA0ODQ2MH0.9wQw14DPfVXjjP0d9g7UpQ0nKwcOsbdjILeiwfdzy7c
2021-06-30 18:27:53.292 INFO  com.cq.wiki.interceptor.LoginInterceptor          :60   [32m65386758044520448 [0;39m token：eyJhbGciOiJIUzI1NiJ9.eyJsb2dpbk5hbWUiOiJ0ZXN0IiwibmFtZSI6Iua1i-ivlSIsImlkIjo2MjkwOTYxNTc0MTk5LCJleHAiOjE2MjUxMzQ4NjAsImlhdCI6MTYyNTA0ODQ2MH0.9wQw14DPfVXjjP0d9g7UpQ0nKwcOsbdjILeiwfdzy7c验证通过
2021-06-30 18:27:53.293 INFO  com.cq.wiki.aspect.LogAspect                      :52   [32m65387829051658240 [0;39m ------------- 开始 -------------
2021-06-30 18:27:53.293 INFO  com.cq.wiki.aspect.LogAspect                      :53   [32m65387829051658240 [0;39m 请求地址: http://127.0.0.1:8880/user/list GET
2021-06-30 18:27:53.293 INFO  com.cq.wiki.aspect.LogAspect                      :54   [32m65387829051658240 [0;39m 类名方法: com.cq.wiki.controller.UserController.list
2021-06-30 18:27:53.294 INFO  com.cq.wiki.aspect.LogAspect                      :55   [32m65387829051658240 [0;39m 远程地址: 127.0.0.1
2021-06-30 18:27:53.294 INFO  com.cq.wiki.aspect.LogAspect                      :77   [32m65387829051658240 [0;39m 请求参数: [{"page":1,"size":10}]
2021-06-30 18:27:53.295 DEBUG c.cq.wiki.mapper.UserMapper.selectByExample_COUNT :137  [32m65387829051658240 [0;39m ==>  Preparing: SELECT count(0) FROM user
2021-06-30 18:27:53.295 DEBUG c.cq.wiki.mapper.UserMapper.selectByExample_COUNT :137  [32m65387829051658240 [0;39m ==> Parameters: 
2021-06-30 18:27:53.296 TRACE c.cq.wiki.mapper.UserMapper.selectByExample_COUNT :143  [32m65387829051658240 [0;39m <==    Columns: count(0)
2021-06-30 18:27:53.297 TRACE c.cq.wiki.mapper.UserMapper.selectByExample_COUNT :143  [32m65387829051658240 [0;39m <==        Row: 3
2021-06-30 18:27:53.297 DEBUG c.cq.wiki.mapper.UserMapper.selectByExample_COUNT :137  [32m65387829051658240 [0;39m <==      Total: 1
2021-06-30 18:27:53.297 DEBUG com.cq.wiki.mapper.UserMapper.selectByExample     :137  [32m65387829051658240 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user LIMIT ?
2021-06-30 18:27:53.298 DEBUG com.cq.wiki.mapper.UserMapper.selectByExample     :137  [32m65387829051658240 [0;39m ==> Parameters: 10(Integer)
2021-06-30 18:27:53.299 TRACE com.cq.wiki.mapper.UserMapper.selectByExample     :143  [32m65387829051658240 [0;39m <==    Columns: id, login_name, name, password
2021-06-30 18:27:53.299 TRACE com.cq.wiki.mapper.UserMapper.selectByExample     :143  [32m65387829051658240 [0;39m <==        Row: 6214409874794, chengqi0418, 程崎, 2f32b1a48b8bca0794a27782ce5eca6c
2021-06-30 18:27:53.299 TRACE com.cq.wiki.mapper.UserMapper.selectByExample     :143  [32m65387829051658240 [0;39m <==        Row: 6214732732183, hwh0717, 霍文慧, 79e63af7f217d11b7469265980f20156
2021-06-30 18:27:53.300 TRACE com.cq.wiki.mapper.UserMapper.selectByExample     :143  [32m65387829051658240 [0;39m <==        Row: 6290961574199, test, 测试, e70e2222a9d67c4f2eae107533359aa4
2021-06-30 18:27:53.300 DEBUG com.cq.wiki.mapper.UserMapper.selectByExample     :137  [32m65387829051658240 [0;39m <==      Total: 3
2021-06-30 18:27:53.300 INFO  com.cq.wiki.service.UserService                   :88   [32m65387829051658240 [0;39m 总行数：3
2021-06-30 18:27:53.300 INFO  com.cq.wiki.service.UserService                   :89   [32m65387829051658240 [0;39m 总页数：1
2021-06-30 18:27:53.301 INFO  com.cq.wiki.aspect.LogAspect                      :89   [32m65387829051658240 [0;39m 返回结果: {"content":{"list":[{"id":6214409874794,"loginName":"chengqi0418","name":"程崎"},{"id":6214732732183,"loginName":"hwh0717","name":"霍文慧"},{"id":6290961574199,"loginName":"test","name":"测试"}],"total":3},"success":true}
2021-06-30 18:27:53.301 INFO  com.cq.wiki.aspect.LogAspect                      :90   [32m65387829051658240 [0;39m ------------- 结束 耗时：8 ms -------------
2021-06-30 18:27:53.302 INFO  com.cq.wiki.interceptor.LoginInterceptor          :73   [32m65387829051658240 [0;39m ------------- LoginInterceptor 结束 耗时：11 ms -------------
2021-06-30 18:28:00.013 INFO  com.cq.wiki.job.EbookSnapshotJob                  :32   [32m65387857237381120 [0;39m 生成今日电子书快照开始
2021-06-30 18:28:00.013 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65387857237381120 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-06-30 18:28:00.013 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65387857237381120 [0;39m ==> Parameters: 
2021-06-30 18:28:00.013 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65387857237381120 [0;39m <==    Updates: 0
2021-06-30 18:28:00.013 INFO  com.cq.wiki.job.EbookSnapshotJob                  :35   [32m65387857237381120 [0;39m 生成今日电子书快照结束，耗时：0毫秒
2021-06-30 18:28:05.015 INFO  com.cq.wiki.job.DocJob                            :31   [32m65387878217289728 [0;39m 更新电子书下的文档数据开始
2021-06-30 18:28:05.015 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65387878217289728 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-06-30 18:28:05.015 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65387878217289728 [0;39m ==> Parameters: 
2021-06-30 18:28:05.015 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65387878217289728 [0;39m <==    Updates: 7
2021-06-30 18:28:05.015 INFO  com.cq.wiki.job.DocJob                            :34   [32m65387878217289728 [0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2021-06-30 18:28:16.127 INFO  com.cq.wiki.aspect.LogAspect                      :52   [32m65387924824395776 [0;39m ------------- 开始 -------------
2021-06-30 18:28:16.127 INFO  com.cq.wiki.aspect.LogAspect                      :53   [32m65387924824395776 [0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2021-06-30 18:28:16.127 INFO  com.cq.wiki.aspect.LogAspect                      :54   [32m65387924824395776 [0;39m 类名方法: com.cq.wiki.controller.EbookSnapshotController.getStatistic
2021-06-30 18:28:16.127 INFO  com.cq.wiki.aspect.LogAspect                      :55   [32m65387924824395776 [0;39m 远程地址: 127.0.0.1
2021-06-30 18:28:16.127 INFO  com.cq.wiki.aspect.LogAspect                      :77   [32m65387924824395776 [0;39m 请求参数: []
2021-06-30 18:28:16.128 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m65387924824395776 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-06-30 18:28:16.128 INFO  com.cq.wiki.aspect.LogAspect                      :52   [32m65387924828590080 [0;39m ------------- 开始 -------------
2021-06-30 18:28:16.128 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m65387924824395776 [0;39m ==> Parameters: 
2021-06-30 18:28:16.129 INFO  com.cq.wiki.aspect.LogAspect                      :53   [32m65387924828590080 [0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2021-06-30 18:28:16.129 INFO  com.cq.wiki.aspect.LogAspect                      :54   [32m65387924828590080 [0;39m 类名方法: com.cq.wiki.controller.EbookSnapshotController.get30Statistic
2021-06-30 18:28:16.129 INFO  com.cq.wiki.aspect.LogAspect                      :55   [32m65387924828590080 [0;39m 远程地址: 127.0.0.1
2021-06-30 18:28:16.129 INFO  com.cq.wiki.aspect.LogAspect                      :77   [32m65387924828590080 [0;39m 请求参数: []
2021-06-30 18:28:16.129 DEBUG c.c.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m65387924828590080 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-06-30 18:28:16.129 TRACE c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m65387924824395776 [0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-06-30 18:28:16.130 TRACE c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m65387924824395776 [0;39m <==        Row: 2021-06-29, 0, 0, 0, 0
2021-06-30 18:28:16.130 DEBUG c.c.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m65387924828590080 [0;39m ==> Parameters: 
2021-06-30 18:28:16.130 INFO  com.cq.wiki.aspect.LogAspect                      :52   [32m65387924836978688 [0;39m ------------- 开始 -------------
2021-06-30 18:28:16.130 INFO  com.cq.wiki.aspect.LogAspect                      :53   [32m65387924836978688 [0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2021-06-30 18:28:16.130 INFO  com.cq.wiki.aspect.LogAspect                      :54   [32m65387924836978688 [0;39m 类名方法: com.cq.wiki.controller.CategoryController.allBook
2021-06-30 18:28:16.130 INFO  com.cq.wiki.aspect.LogAspect                      :55   [32m65387924836978688 [0;39m 远程地址: 127.0.0.1
2021-06-30 18:28:16.130 INFO  com.cq.wiki.aspect.LogAspect                      :77   [32m65387924836978688 [0;39m 请求参数: []
2021-06-30 18:28:16.131 DEBUG com.cq.wiki.mapper.CategoryMapper.selectByExample :137  [32m65387924836978688 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-06-30 18:28:16.131 TRACE c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m65387924824395776 [0;39m <==        Row: 2021-06-30, 118, 43, 118, 43
2021-06-30 18:28:16.131 TRACE c.c.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m65387924828590080 [0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-06-30 18:28:16.131 TRACE c.c.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m65387924828590080 [0;39m <==        Row: 2021-06-29, 0, 0
2021-06-30 18:28:16.131 DEBUG com.cq.wiki.mapper.CategoryMapper.selectByExample :137  [32m65387924836978688 [0;39m ==> Parameters: 
2021-06-30 18:28:16.132 DEBUG c.c.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m65387924828590080 [0;39m <==      Total: 1
2021-06-30 18:28:16.132 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m65387924824395776 [0;39m <==      Total: 2
2021-06-30 18:28:16.132 INFO  com.cq.wiki.aspect.LogAspect                      :89   [32m65387924824395776 [0;39m 返回结果: {"content":[{"date":1624896000000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1624982400000,"viewCount":118,"viewIncrease":118,"voteCount":43,"voteIncrease":43}],"success":true}
2021-06-30 18:28:16.132 INFO  com.cq.wiki.aspect.LogAspect                      :89   [32m65387924828590080 [0;39m 返回结果: {"content":[{"date":1624896000000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0}],"success":true}
2021-06-30 18:28:16.132 INFO  com.cq.wiki.aspect.LogAspect                      :90   [32m65387924824395776 [0;39m ------------- 结束 耗时：5 ms -------------
2021-06-30 18:28:16.132 INFO  com.cq.wiki.aspect.LogAspect                      :90   [32m65387924828590080 [0;39m ------------- 结束 耗时：4 ms -------------
2021-06-30 18:28:16.132 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65387924836978688 [0;39m <==    Columns: id, parent, name, sort
2021-06-30 18:28:16.132 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65387924836978688 [0;39m <==        Row: 100, 0, 前端开发, 100
2021-06-30 18:28:16.133 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65387924836978688 [0;39m <==        Row: 101, 100, Vue, 101
2021-06-30 18:28:16.133 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65387924836978688 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-06-30 18:28:16.133 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65387924836978688 [0;39m <==        Row: 200, 0, Java, 200
2021-06-30 18:28:16.133 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65387924836978688 [0;39m <==        Row: 201, 200, 基础应用, 201
2021-06-30 18:28:16.133 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65387924836978688 [0;39m <==        Row: 202, 200, 框架开发, 202
2021-06-30 18:28:16.134 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65387924836978688 [0;39m <==        Row: 300, 0, Python, 300
2021-06-30 18:28:16.134 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65387924836978688 [0;39m <==        Row: 301, 300, 基础应用, 301
2021-06-30 18:28:16.134 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65387924836978688 [0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-06-30 18:28:16.134 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65387924836978688 [0;39m <==        Row: 400, 0, 数据库, 400
2021-06-30 18:28:16.134 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65387924836978688 [0;39m <==        Row: 401, 400, MySQL, 401
2021-06-30 18:28:16.135 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65387924836978688 [0;39m <==        Row: 402, 400, Oracle, 402
2021-06-30 18:28:16.135 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65387924836978688 [0;39m <==        Row: 500, 0, 其他, 500
2021-06-30 18:28:16.135 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65387924836978688 [0;39m <==        Row: 501, 500, 服务器, 501
2021-06-30 18:28:16.135 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65387924836978688 [0;39m <==        Row: 502, 500, 开发工具, 502
2021-06-30 18:28:16.136 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65387924836978688 [0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-06-30 18:28:16.136 DEBUG com.cq.wiki.mapper.CategoryMapper.selectByExample :137  [32m65387924836978688 [0;39m <==      Total: 16
2021-06-30 18:28:16.137 INFO  com.cq.wiki.aspect.LogAspect                      :89   [32m65387924836978688 [0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架开发","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":402,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-06-30 18:28:16.138 INFO  com.cq.wiki.aspect.LogAspect                      :90   [32m65387924836978688 [0;39m ------------- 结束 耗时：8 ms -------------
2021-06-30 18:28:35.009 INFO  com.cq.wiki.job.DocJob                            :31   [32m65388004021243904 [0;39m 更新电子书下的文档数据开始
2021-06-30 18:28:35.009 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65388004021243904 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-06-30 18:28:35.009 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65388004021243904 [0;39m ==> Parameters: 
2021-06-30 18:28:35.009 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65388004021243904 [0;39m <==    Updates: 7
2021-06-30 18:28:35.009 INFO  com.cq.wiki.job.DocJob                            :34   [32m65388004021243904 [0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2021-06-30 18:29:00.014 INFO  com.cq.wiki.job.EbookSnapshotJob                  :32   [32m65388108899815424 [0;39m 生成今日电子书快照开始
2021-06-30 18:29:00.014 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65388108899815424 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-06-30 18:29:00.014 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65388108899815424 [0;39m ==> Parameters: 
2021-06-30 18:29:00.014 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65388108899815424 [0;39m <==    Updates: 0
2021-06-30 18:29:00.014 INFO  com.cq.wiki.job.EbookSnapshotJob                  :35   [32m65388108899815424 [0;39m 生成今日电子书快照结束，耗时：0毫秒
2021-06-30 18:29:05.020 INFO  com.cq.wiki.job.DocJob                            :31   [32m65388129896501248 [0;39m 更新电子书下的文档数据开始
2021-06-30 18:29:05.020 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65388129896501248 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-06-30 18:29:05.020 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65388129896501248 [0;39m ==> Parameters: 
2021-06-30 18:29:05.020 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65388129896501248 [0;39m <==    Updates: 7
2021-06-30 18:29:05.020 INFO  com.cq.wiki.job.DocJob                            :34   [32m65388129896501248 [0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2021-06-30 18:29:35.015 INFO  com.cq.wiki.job.DocJob                            :31   [32m65388255704649728 [0;39m 更新电子书下的文档数据开始
2021-06-30 18:29:35.015 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65388255704649728 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-06-30 18:29:35.015 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65388255704649728 [0;39m ==> Parameters: 
2021-06-30 18:29:35.015 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65388255704649728 [0;39m <==    Updates: 7
2021-06-30 18:29:35.015 INFO  com.cq.wiki.job.DocJob                            :34   [32m65388255704649728 [0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2021-06-30 18:29:54.838 INFO  com.cq.wiki.websocket.WebSocketServer             :41   [32m65386062079463425 [0;39m 连接关闭，token：ys59UqIfxQ，session id：3！当前连接数：0
2021-06-30 18:29:55.388 INFO  com.cq.wiki.websocket.WebSocketServer             :32   [32m65386044224311296 [0;39m 有新连接：token：3qAEaJmRaH，session id：4，当前连接数：1
2021-06-30 18:29:55.517 INFO  com.cq.wiki.aspect.LogAspect                      :52   [32m65388341696270336 [0;39m ------------- 开始 -------------
2021-06-30 18:29:55.517 INFO  com.cq.wiki.aspect.LogAspect                      :53   [32m65388341696270336 [0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2021-06-30 18:29:55.517 INFO  com.cq.wiki.aspect.LogAspect                      :54   [32m65388341696270336 [0;39m 类名方法: com.cq.wiki.controller.EbookSnapshotController.getStatistic
2021-06-30 18:29:55.518 INFO  com.cq.wiki.aspect.LogAspect                      :55   [32m65388341696270336 [0;39m 远程地址: 127.0.0.1
2021-06-30 18:29:55.518 INFO  com.cq.wiki.aspect.LogAspect                      :77   [32m65388341696270336 [0;39m 请求参数: []
2021-06-30 18:29:55.518 INFO  com.cq.wiki.aspect.LogAspect                      :52   [32m65388341700464640 [0;39m ------------- 开始 -------------
2021-06-30 18:29:55.518 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m65388341696270336 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-06-30 18:29:55.519 INFO  com.cq.wiki.aspect.LogAspect                      :53   [32m65388341700464640 [0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2021-06-30 18:29:55.519 INFO  com.cq.wiki.aspect.LogAspect                      :54   [32m65388341700464640 [0;39m 类名方法: com.cq.wiki.controller.EbookSnapshotController.get30Statistic
2021-06-30 18:29:55.519 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m65388341696270336 [0;39m ==> Parameters: 
2021-06-30 18:29:55.519 INFO  com.cq.wiki.aspect.LogAspect                      :55   [32m65388341700464640 [0;39m 远程地址: 127.0.0.1
2021-06-30 18:29:55.519 INFO  com.cq.wiki.aspect.LogAspect                      :77   [32m65388341700464640 [0;39m 请求参数: []
2021-06-30 18:29:55.520 DEBUG c.c.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m65388341700464640 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-06-30 18:29:55.520 TRACE c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m65388341696270336 [0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-06-30 18:29:55.521 TRACE c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m65388341696270336 [0;39m <==        Row: 2021-06-29, 1, 0, 0, 0
2021-06-30 18:29:55.521 DEBUG c.c.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m65388341700464640 [0;39m ==> Parameters: 
2021-06-30 18:29:55.521 TRACE c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m65388341696270336 [0;39m <==        Row: 2021-06-30, 118, 43, 118, 43
2021-06-30 18:29:55.521 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m65388341696270336 [0;39m <==      Total: 2
2021-06-30 18:29:55.522 INFO  com.cq.wiki.aspect.LogAspect                      :89   [32m65388341696270336 [0;39m 返回结果: {"content":[{"date":1624896000000,"viewCount":1,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1624982400000,"viewCount":118,"viewIncrease":118,"voteCount":43,"voteIncrease":43}],"success":true}
2021-06-30 18:29:55.522 INFO  com.cq.wiki.aspect.LogAspect                      :52   [32m65388341717241856 [0;39m ------------- 开始 -------------
2021-06-30 18:29:55.522 INFO  com.cq.wiki.aspect.LogAspect                      :90   [32m65388341696270336 [0;39m ------------- 结束 耗时：5 ms -------------
2021-06-30 18:29:55.522 TRACE c.c.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m65388341700464640 [0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-06-30 18:29:55.522 INFO  com.cq.wiki.aspect.LogAspect                      :53   [32m65388341717241856 [0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2021-06-30 18:29:55.523 INFO  com.cq.wiki.aspect.LogAspect                      :54   [32m65388341717241856 [0;39m 类名方法: com.cq.wiki.controller.CategoryController.allBook
2021-06-30 18:29:55.523 TRACE c.c.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m65388341700464640 [0;39m <==        Row: 2021-06-29, 0, 0
2021-06-30 18:29:55.523 INFO  com.cq.wiki.aspect.LogAspect                      :55   [32m65388341717241856 [0;39m 远程地址: 127.0.0.1
2021-06-30 18:29:55.523 INFO  com.cq.wiki.aspect.LogAspect                      :77   [32m65388341717241856 [0;39m 请求参数: []
2021-06-30 18:29:55.523 DEBUG c.c.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m65388341700464640 [0;39m <==      Total: 1
2021-06-30 18:29:55.523 INFO  com.cq.wiki.aspect.LogAspect                      :89   [32m65388341700464640 [0;39m 返回结果: {"content":[{"date":1624896000000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0}],"success":true}
2021-06-30 18:29:55.524 INFO  com.cq.wiki.aspect.LogAspect                      :90   [32m65388341700464640 [0;39m ------------- 结束 耗时：6 ms -------------
2021-06-30 18:29:55.524 DEBUG com.cq.wiki.mapper.CategoryMapper.selectByExample :137  [32m65388341717241856 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-06-30 18:29:55.524 DEBUG com.cq.wiki.mapper.CategoryMapper.selectByExample :137  [32m65388341717241856 [0;39m ==> Parameters: 
2021-06-30 18:29:55.526 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65388341717241856 [0;39m <==    Columns: id, parent, name, sort
2021-06-30 18:29:55.526 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65388341717241856 [0;39m <==        Row: 100, 0, 前端开发, 100
2021-06-30 18:29:55.526 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65388341717241856 [0;39m <==        Row: 101, 100, Vue, 101
2021-06-30 18:29:55.526 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65388341717241856 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-06-30 18:29:55.527 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65388341717241856 [0;39m <==        Row: 200, 0, Java, 200
2021-06-30 18:29:55.527 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65388341717241856 [0;39m <==        Row: 201, 200, 基础应用, 201
2021-06-30 18:29:55.527 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65388341717241856 [0;39m <==        Row: 202, 200, 框架开发, 202
2021-06-30 18:29:55.527 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65388341717241856 [0;39m <==        Row: 300, 0, Python, 300
2021-06-30 18:29:55.527 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65388341717241856 [0;39m <==        Row: 301, 300, 基础应用, 301
2021-06-30 18:29:55.527 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65388341717241856 [0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-06-30 18:29:55.528 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65388341717241856 [0;39m <==        Row: 400, 0, 数据库, 400
2021-06-30 18:29:55.528 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65388341717241856 [0;39m <==        Row: 401, 400, MySQL, 401
2021-06-30 18:29:55.528 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65388341717241856 [0;39m <==        Row: 402, 400, Oracle, 402
2021-06-30 18:29:55.528 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65388341717241856 [0;39m <==        Row: 500, 0, 其他, 500
2021-06-30 18:29:55.528 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65388341717241856 [0;39m <==        Row: 501, 500, 服务器, 501
2021-06-30 18:29:55.528 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65388341717241856 [0;39m <==        Row: 502, 500, 开发工具, 502
2021-06-30 18:29:55.528 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65388341717241856 [0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-06-30 18:29:55.529 DEBUG com.cq.wiki.mapper.CategoryMapper.selectByExample :137  [32m65388341717241856 [0;39m <==      Total: 16
2021-06-30 18:29:55.529 INFO  com.cq.wiki.aspect.LogAspect                      :89   [32m65388341717241856 [0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架开发","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":402,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-06-30 18:29:55.529 INFO  com.cq.wiki.aspect.LogAspect                      :90   [32m65388341717241856 [0;39m ------------- 结束 耗时：7 ms -------------
2021-06-30 18:30:00.011 INFO  com.cq.wiki.job.EbookSnapshotJob                  :32   [32m65388360545472512 [0;39m 生成今日电子书快照开始
2021-06-30 18:30:00.011 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65388360545472512 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-06-30 18:30:00.011 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65388360545472512 [0;39m ==> Parameters: 
2021-06-30 18:30:00.025 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65388360545472512 [0;39m <==    Updates: 0
2021-06-30 18:30:00.025 INFO  com.cq.wiki.job.EbookSnapshotJob                  :35   [32m65388360545472512 [0;39m 生成今日电子书快照结束，耗时：14毫秒
2021-06-30 18:30:05.015 INFO  com.cq.wiki.job.DocJob                            :31   [32m65388381533769728 [0;39m 更新电子书下的文档数据开始
2021-06-30 18:30:05.015 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65388381533769728 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-06-30 18:30:05.015 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65388381533769728 [0;39m ==> Parameters: 
2021-06-30 18:30:05.015 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65388381533769728 [0;39m <==    Updates: 7
2021-06-30 18:30:05.015 INFO  com.cq.wiki.job.DocJob                            :34   [32m65388381533769728 [0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2021-06-30 18:30:35.013 INFO  com.cq.wiki.job.DocJob                            :31   [32m65388507354501120 [0;39m 更新电子书下的文档数据开始
2021-06-30 18:30:35.013 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65388507354501120 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-06-30 18:30:35.013 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65388507354501120 [0;39m ==> Parameters: 
2021-06-30 18:30:35.013 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65388507354501120 [0;39m <==    Updates: 7
2021-06-30 18:30:35.013 INFO  com.cq.wiki.job.DocJob                            :34   [32m65388507354501120 [0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2021-06-30 18:31:00.006 INFO  com.cq.wiki.job.EbookSnapshotJob                  :32   [32m65388612182740992 [0;39m 生成今日电子书快照开始
2021-06-30 18:31:00.006 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65388612182740992 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-06-30 18:31:00.006 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65388612182740992 [0;39m ==> Parameters: 
2021-06-30 18:31:00.006 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65388612182740992 [0;39m <==    Updates: 0
2021-06-30 18:31:00.006 INFO  com.cq.wiki.job.EbookSnapshotJob                  :35   [32m65388612182740992 [0;39m 生成今日电子书快照结束，耗时：0毫秒
2021-06-30 18:31:05.015 INFO  com.cq.wiki.job.DocJob                            :31   [32m65388633192009728 [0;39m 更新电子书下的文档数据开始
2021-06-30 18:31:05.015 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65388633192009728 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-06-30 18:31:05.015 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65388633192009728 [0;39m ==> Parameters: 
2021-06-30 18:31:05.015 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65388633192009728 [0;39m <==    Updates: 7
2021-06-30 18:31:05.015 INFO  com.cq.wiki.job.DocJob                            :34   [32m65388633192009728 [0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2021-06-30 18:31:35.008 INFO  com.cq.wiki.job.DocJob                            :31   [32m65388758991769600 [0;39m 更新电子书下的文档数据开始
2021-06-30 18:31:35.008 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65388758991769600 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-06-30 18:31:35.008 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65388758991769600 [0;39m ==> Parameters: 
2021-06-30 18:31:35.008 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65388758991769600 [0;39m <==    Updates: 7
2021-06-30 18:31:35.008 INFO  com.cq.wiki.job.DocJob                            :34   [32m65388758991769600 [0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2021-06-30 18:32:00.014 INFO  com.cq.wiki.job.EbookSnapshotJob                  :32   [32m65388863874535424 [0;39m 生成今日电子书快照开始
2021-06-30 18:32:00.015 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65388863874535424 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-06-30 18:32:00.015 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65388863874535424 [0;39m ==> Parameters: 
2021-06-30 18:32:00.017 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65388863874535424 [0;39m <==    Updates: 0
2021-06-30 18:32:00.017 INFO  com.cq.wiki.job.EbookSnapshotJob                  :35   [32m65388863874535424 [0;39m 生成今日电子书快照结束，耗时：3毫秒
2021-06-30 18:32:02.786 INFO  com.cq.wiki.websocket.WebSocketServer             :41   [32m65386062087852032 [0;39m 连接关闭，token：3qAEaJmRaH，session id：4！当前连接数：0
2021-06-30 18:32:03.319 INFO  com.cq.wiki.websocket.WebSocketServer             :32   [32m65386096875409408 [0;39m 有新连接：token：QZK7awv3Go，session id：5，当前连接数：1
2021-06-30 18:32:03.440 INFO  com.cq.wiki.aspect.LogAspect                      :52   [32m65388878244220928 [0;39m ------------- 开始 -------------
2021-06-30 18:32:03.440 INFO  com.cq.wiki.aspect.LogAspect                      :53   [32m65388878244220928 [0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2021-06-30 18:32:03.440 INFO  com.cq.wiki.aspect.LogAspect                      :54   [32m65388878244220928 [0;39m 类名方法: com.cq.wiki.controller.EbookSnapshotController.getStatistic
2021-06-30 18:32:03.441 INFO  com.cq.wiki.aspect.LogAspect                      :55   [32m65388878244220928 [0;39m 远程地址: 127.0.0.1
2021-06-30 18:32:03.441 INFO  com.cq.wiki.aspect.LogAspect                      :77   [32m65388878244220928 [0;39m 请求参数: []
2021-06-30 18:32:03.441 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m65388878244220928 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-06-30 18:32:03.442 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m65388878244220928 [0;39m ==> Parameters: 
2021-06-30 18:32:03.443 TRACE c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m65388878244220928 [0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-06-30 18:32:03.444 TRACE c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m65388878244220928 [0;39m <==        Row: 2021-06-29, 1, 0, 0, 0
2021-06-30 18:32:03.444 TRACE c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m65388878244220928 [0;39m <==        Row: 2021-06-30, 118, 43, 117, 43
2021-06-30 18:32:03.445 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m65388878244220928 [0;39m <==      Total: 2
2021-06-30 18:32:03.445 INFO  com.cq.wiki.aspect.LogAspect                      :89   [32m65388878244220928 [0;39m 返回结果: {"content":[{"date":1624896000000,"viewCount":1,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1624982400000,"viewCount":118,"viewIncrease":117,"voteCount":43,"voteIncrease":43}],"success":true}
2021-06-30 18:32:03.446 INFO  com.cq.wiki.aspect.LogAspect                      :90   [32m65388878244220928 [0;39m ------------- 结束 耗时：6 ms -------------
2021-06-30 18:32:03.446 INFO  com.cq.wiki.aspect.LogAspect                      :52   [32m65388878269386752 [0;39m ------------- 开始 -------------
2021-06-30 18:32:03.446 INFO  com.cq.wiki.aspect.LogAspect                      :52   [32m65388878269386753 [0;39m ------------- 开始 -------------
2021-06-30 18:32:03.446 INFO  com.cq.wiki.aspect.LogAspect                      :53   [32m65388878269386752 [0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2021-06-30 18:32:03.446 INFO  com.cq.wiki.aspect.LogAspect                      :54   [32m65388878269386752 [0;39m 类名方法: com.cq.wiki.controller.CategoryController.allBook
2021-06-30 18:32:03.446 INFO  com.cq.wiki.aspect.LogAspect                      :53   [32m65388878269386753 [0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2021-06-30 18:32:03.446 INFO  com.cq.wiki.aspect.LogAspect                      :54   [32m65388878269386753 [0;39m 类名方法: com.cq.wiki.controller.EbookSnapshotController.get30Statistic
2021-06-30 18:32:03.446 INFO  com.cq.wiki.aspect.LogAspect                      :55   [32m65388878269386752 [0;39m 远程地址: 127.0.0.1
2021-06-30 18:32:03.446 INFO  com.cq.wiki.aspect.LogAspect                      :55   [32m65388878269386753 [0;39m 远程地址: 127.0.0.1
2021-06-30 18:32:03.447 INFO  com.cq.wiki.aspect.LogAspect                      :77   [32m65388878269386752 [0;39m 请求参数: []
2021-06-30 18:32:03.447 INFO  com.cq.wiki.aspect.LogAspect                      :77   [32m65388878269386753 [0;39m 请求参数: []
2021-06-30 18:32:03.447 DEBUG com.cq.wiki.mapper.CategoryMapper.selectByExample :137  [32m65388878269386752 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-06-30 18:32:03.447 DEBUG c.c.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m65388878269386753 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-06-30 18:32:03.448 DEBUG com.cq.wiki.mapper.CategoryMapper.selectByExample :137  [32m65388878269386752 [0;39m ==> Parameters: 
2021-06-30 18:32:03.448 DEBUG c.c.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m65388878269386753 [0;39m ==> Parameters: 
2021-06-30 18:32:03.449 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65388878269386752 [0;39m <==    Columns: id, parent, name, sort
2021-06-30 18:32:03.449 TRACE c.c.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m65388878269386753 [0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-06-30 18:32:03.449 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65388878269386752 [0;39m <==        Row: 100, 0, 前端开发, 100
2021-06-30 18:32:03.449 TRACE c.c.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m65388878269386753 [0;39m <==        Row: 2021-06-29, 0, 0
2021-06-30 18:32:03.449 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65388878269386752 [0;39m <==        Row: 101, 100, Vue, 101
2021-06-30 18:32:03.449 DEBUG c.c.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m65388878269386753 [0;39m <==      Total: 1
2021-06-30 18:32:03.449 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65388878269386752 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-06-30 18:32:03.450 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65388878269386752 [0;39m <==        Row: 200, 0, Java, 200
2021-06-30 18:32:03.450 INFO  com.cq.wiki.aspect.LogAspect                      :89   [32m65388878269386753 [0;39m 返回结果: {"content":[{"date":1624896000000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0}],"success":true}
2021-06-30 18:32:03.450 INFO  com.cq.wiki.aspect.LogAspect                      :90   [32m65388878269386753 [0;39m ------------- 结束 耗时：4 ms -------------
2021-06-30 18:32:03.450 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65388878269386752 [0;39m <==        Row: 201, 200, 基础应用, 201
2021-06-30 18:32:03.450 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65388878269386752 [0;39m <==        Row: 202, 200, 框架开发, 202
2021-06-30 18:32:03.451 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65388878269386752 [0;39m <==        Row: 300, 0, Python, 300
2021-06-30 18:32:03.451 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65388878269386752 [0;39m <==        Row: 301, 300, 基础应用, 301
2021-06-30 18:32:03.451 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65388878269386752 [0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-06-30 18:32:03.452 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65388878269386752 [0;39m <==        Row: 400, 0, 数据库, 400
2021-06-30 18:32:03.452 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65388878269386752 [0;39m <==        Row: 401, 400, MySQL, 401
2021-06-30 18:32:03.452 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65388878269386752 [0;39m <==        Row: 402, 400, Oracle, 402
2021-06-30 18:32:03.452 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65388878269386752 [0;39m <==        Row: 500, 0, 其他, 500
2021-06-30 18:32:03.453 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65388878269386752 [0;39m <==        Row: 501, 500, 服务器, 501
2021-06-30 18:32:03.453 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65388878269386752 [0;39m <==        Row: 502, 500, 开发工具, 502
2021-06-30 18:32:03.454 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65388878269386752 [0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-06-30 18:32:03.454 DEBUG com.cq.wiki.mapper.CategoryMapper.selectByExample :137  [32m65388878269386752 [0;39m <==      Total: 16
2021-06-30 18:32:03.455 INFO  com.cq.wiki.aspect.LogAspect                      :89   [32m65388878269386752 [0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架开发","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":402,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-06-30 18:32:03.456 INFO  com.cq.wiki.aspect.LogAspect                      :90   [32m65388878269386752 [0;39m ------------- 结束 耗时：10 ms -------------
2021-06-30 18:32:05.015 INFO  com.cq.wiki.job.DocJob                            :31   [32m65388884850249728 [0;39m 更新电子书下的文档数据开始
2021-06-30 18:32:05.017 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65388884850249728 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-06-30 18:32:05.017 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65388884850249728 [0;39m ==> Parameters: 
2021-06-30 18:32:05.019 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65388884850249728 [0;39m <==    Updates: 7
2021-06-30 18:32:05.019 INFO  com.cq.wiki.job.DocJob                            :34   [32m65388884850249728 [0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2021-06-30 18:32:18.874 INFO  com.cq.wiki.websocket.WebSocketServer             :41   [32m65388341700464640 [0;39m 连接关闭，token：QZK7awv3Go，session id：5！当前连接数：0
2021-06-30 18:32:20.210 INFO  com.cq.wiki.websocket.WebSocketServer             :32   [32m65388341717241856 [0;39m 有新连接：token：ussunImvu1，session id：6，当前连接数：1
2021-06-30 18:32:20.785 INFO  com.cq.wiki.aspect.LogAspect                      :52   [32m65388950994423808 [0;39m ------------- 开始 -------------
2021-06-30 18:32:20.786 INFO  com.cq.wiki.aspect.LogAspect                      :53   [32m65388950994423808 [0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2021-06-30 18:32:20.787 INFO  com.cq.wiki.aspect.LogAspect                      :54   [32m65388950994423808 [0;39m 类名方法: com.cq.wiki.controller.EbookSnapshotController.getStatistic
2021-06-30 18:32:20.787 INFO  com.cq.wiki.aspect.LogAspect                      :55   [32m65388950994423808 [0;39m 远程地址: 127.0.0.1
2021-06-30 18:32:20.787 INFO  com.cq.wiki.aspect.LogAspect                      :52   [32m65388951002812417 [0;39m ------------- 开始 -------------
2021-06-30 18:32:20.787 INFO  com.cq.wiki.aspect.LogAspect                      :52   [32m65388951002812416 [0;39m ------------- 开始 -------------
2021-06-30 18:32:20.787 INFO  com.cq.wiki.aspect.LogAspect                      :77   [32m65388950994423808 [0;39m 请求参数: []
2021-06-30 18:32:20.787 INFO  com.cq.wiki.aspect.LogAspect                      :53   [32m65388951002812416 [0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2021-06-30 18:32:20.787 INFO  com.cq.wiki.aspect.LogAspect                      :53   [32m65388951002812417 [0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2021-06-30 18:32:20.787 INFO  com.cq.wiki.aspect.LogAspect                      :54   [32m65388951002812416 [0;39m 类名方法: com.cq.wiki.controller.EbookSnapshotController.get30Statistic
2021-06-30 18:32:20.788 INFO  com.cq.wiki.aspect.LogAspect                      :54   [32m65388951002812417 [0;39m 类名方法: com.cq.wiki.controller.CategoryController.allBook
2021-06-30 18:32:20.788 INFO  com.cq.wiki.aspect.LogAspect                      :55   [32m65388951002812416 [0;39m 远程地址: 127.0.0.1
2021-06-30 18:32:20.788 INFO  com.cq.wiki.aspect.LogAspect                      :55   [32m65388951002812417 [0;39m 远程地址: 127.0.0.1
2021-06-30 18:32:20.788 INFO  com.cq.wiki.aspect.LogAspect                      :77   [32m65388951002812417 [0;39m 请求参数: []
2021-06-30 18:32:20.788 INFO  com.cq.wiki.aspect.LogAspect                      :77   [32m65388951002812416 [0;39m 请求参数: []
2021-06-30 18:32:20.788 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m65388950994423808 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-06-30 18:32:20.789 DEBUG com.cq.wiki.mapper.CategoryMapper.selectByExample :137  [32m65388951002812417 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-06-30 18:32:20.789 DEBUG c.c.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m65388951002812416 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-06-30 18:32:20.789 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m65388950994423808 [0;39m ==> Parameters: 
2021-06-30 18:32:20.789 DEBUG com.cq.wiki.mapper.CategoryMapper.selectByExample :137  [32m65388951002812417 [0;39m ==> Parameters: 
2021-06-30 18:32:20.789 DEBUG c.c.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m65388951002812416 [0;39m ==> Parameters: 
2021-06-30 18:32:20.790 TRACE c.c.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m65388951002812416 [0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-06-30 18:32:20.790 TRACE c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m65388950994423808 [0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-06-30 18:32:20.790 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65388951002812417 [0;39m <==    Columns: id, parent, name, sort
2021-06-30 18:32:20.791 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65388951002812417 [0;39m <==        Row: 100, 0, 前端开发, 100
2021-06-30 18:32:20.791 TRACE c.c.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m65388951002812416 [0;39m <==        Row: 2021-06-29, 0, 0
2021-06-30 18:32:20.791 TRACE c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m65388950994423808 [0;39m <==        Row: 2021-06-29, 1, 0, 0, 0
2021-06-30 18:32:20.791 DEBUG c.c.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m65388951002812416 [0;39m <==      Total: 1
2021-06-30 18:32:20.791 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65388951002812417 [0;39m <==        Row: 101, 100, Vue, 101
2021-06-30 18:32:20.791 TRACE c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m65388950994423808 [0;39m <==        Row: 2021-06-30, 118, 43, 117, 43
2021-06-30 18:32:20.792 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m65388950994423808 [0;39m <==      Total: 2
2021-06-30 18:32:20.792 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65388951002812417 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-06-30 18:32:20.792 INFO  com.cq.wiki.aspect.LogAspect                      :89   [32m65388951002812416 [0;39m 返回结果: {"content":[{"date":1624896000000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0}],"success":true}
2021-06-30 18:32:20.792 INFO  com.cq.wiki.aspect.LogAspect                      :90   [32m65388951002812416 [0;39m ------------- 结束 耗时：5 ms -------------
2021-06-30 18:32:20.792 INFO  com.cq.wiki.aspect.LogAspect                      :89   [32m65388950994423808 [0;39m 返回结果: {"content":[{"date":1624896000000,"viewCount":1,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1624982400000,"viewCount":118,"viewIncrease":117,"voteCount":43,"voteIncrease":43}],"success":true}
2021-06-30 18:32:20.792 INFO  com.cq.wiki.aspect.LogAspect                      :90   [32m65388950994423808 [0;39m ------------- 结束 耗时：7 ms -------------
2021-06-30 18:32:20.792 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65388951002812417 [0;39m <==        Row: 200, 0, Java, 200
2021-06-30 18:32:20.793 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65388951002812417 [0;39m <==        Row: 201, 200, 基础应用, 201
2021-06-30 18:32:20.794 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65388951002812417 [0;39m <==        Row: 202, 200, 框架开发, 202
2021-06-30 18:32:20.794 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65388951002812417 [0;39m <==        Row: 300, 0, Python, 300
2021-06-30 18:32:20.795 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65388951002812417 [0;39m <==        Row: 301, 300, 基础应用, 301
2021-06-30 18:32:20.796 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65388951002812417 [0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-06-30 18:32:20.797 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65388951002812417 [0;39m <==        Row: 400, 0, 数据库, 400
2021-06-30 18:32:20.798 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65388951002812417 [0;39m <==        Row: 401, 400, MySQL, 401
2021-06-30 18:32:20.799 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65388951002812417 [0;39m <==        Row: 402, 400, Oracle, 402
2021-06-30 18:32:20.799 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65388951002812417 [0;39m <==        Row: 500, 0, 其他, 500
2021-06-30 18:32:20.799 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65388951002812417 [0;39m <==        Row: 501, 500, 服务器, 501
2021-06-30 18:32:20.800 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65388951002812417 [0;39m <==        Row: 502, 500, 开发工具, 502
2021-06-30 18:32:20.800 TRACE com.cq.wiki.mapper.CategoryMapper.selectByExample :143  [32m65388951002812417 [0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-06-30 18:32:20.800 DEBUG com.cq.wiki.mapper.CategoryMapper.selectByExample :137  [32m65388951002812417 [0;39m <==      Total: 16
2021-06-30 18:32:20.802 INFO  com.cq.wiki.aspect.LogAspect                      :89   [32m65388951002812417 [0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架开发","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":402,"name":"Oracle","parent":400,"sort":402},{"id":500,"name":"其他","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-06-30 18:32:20.802 INFO  com.cq.wiki.aspect.LogAspect                      :90   [32m65388951002812417 [0;39m ------------- 结束 耗时：15 ms -------------
2021-06-30 18:32:35.007 INFO  com.cq.wiki.job.DocJob                            :31   [32m65389010645815296 [0;39m 更新电子书下的文档数据开始
2021-06-30 18:32:35.007 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65389010645815296 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-06-30 18:32:35.007 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65389010645815296 [0;39m ==> Parameters: 
2021-06-30 18:32:35.007 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65389010645815296 [0;39m <==    Updates: 7
2021-06-30 18:32:35.007 INFO  com.cq.wiki.job.DocJob                            :34   [32m65389010645815296 [0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2021-06-30 18:33:00.010 INFO  com.cq.wiki.job.EbookSnapshotJob                  :32   [32m65389115515998208 [0;39m 生成今日电子书快照开始
2021-06-30 18:33:00.010 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65389115515998208 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-06-30 18:33:00.010 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65389115515998208 [0;39m ==> Parameters: 
2021-06-30 18:33:00.010 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65389115515998208 [0;39m <==    Updates: 0
2021-06-30 18:33:00.010 INFO  com.cq.wiki.job.EbookSnapshotJob                  :35   [32m65389115515998208 [0;39m 生成今日电子书快照结束，耗时：0毫秒
2021-06-30 18:33:05.010 INFO  com.cq.wiki.job.DocJob                            :31   [32m65389136487518208 [0;39m 更新电子书下的文档数据开始
2021-06-30 18:33:05.011 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65389136487518208 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-06-30 18:33:05.011 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65389136487518208 [0;39m ==> Parameters: 
2021-06-30 18:33:05.012 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65389136487518208 [0;39m <==    Updates: 7
2021-06-30 18:33:05.012 INFO  com.cq.wiki.job.DocJob                            :34   [32m65389136487518208 [0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2021-06-30 18:33:21.585 INFO  com.cq.wiki.aspect.LogAspect                      :52   [32m65389206008107008 [0;39m ------------- 开始 -------------
2021-06-30 18:33:21.585 INFO  com.cq.wiki.aspect.LogAspect                      :53   [32m65389206008107008 [0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2021-06-30 18:33:21.585 INFO  com.cq.wiki.aspect.LogAspect                      :54   [32m65389206008107008 [0;39m 类名方法: com.cq.wiki.controller.EbookSnapshotController.getStatistic
2021-06-30 18:33:21.585 INFO  com.cq.wiki.aspect.LogAspect                      :55   [32m65389206008107008 [0;39m 远程地址: 127.0.0.1
2021-06-30 18:33:21.585 INFO  com.cq.wiki.aspect.LogAspect                      :77   [32m65389206008107008 [0;39m 请求参数: []
2021-06-30 18:33:21.585 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m65389206008107008 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-06-30 18:33:21.585 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m65389206008107008 [0;39m ==> Parameters: 
2021-06-30 18:33:21.585 INFO  com.cq.wiki.aspect.LogAspect                      :52   [32m65389206008107009 [0;39m ------------- 开始 -------------
2021-06-30 18:33:21.585 INFO  com.cq.wiki.aspect.LogAspect                      :53   [32m65389206008107009 [0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2021-06-30 18:33:21.585 INFO  com.cq.wiki.aspect.LogAspect                      :54   [32m65389206008107009 [0;39m 类名方法: com.cq.wiki.controller.EbookSnapshotController.get30Statistic
2021-06-30 18:33:21.585 INFO  com.cq.wiki.aspect.LogAspect                      :55   [32m65389206008107009 [0;39m 远程地址: 127.0.0.1
2021-06-30 18:33:21.585 INFO  com.cq.wiki.aspect.LogAspect                      :77   [32m65389206008107009 [0;39m 请求参数: []
2021-06-30 18:33:21.585 TRACE c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m65389206008107008 [0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-06-30 18:33:21.585 DEBUG c.c.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m65389206008107009 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-06-30 18:33:21.585 TRACE c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m65389206008107008 [0;39m <==        Row: 2021-06-29, 1, 0, 0, 0
2021-06-30 18:33:21.585 DEBUG c.c.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m65389206008107009 [0;39m ==> Parameters: 
2021-06-30 18:33:21.585 TRACE c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m65389206008107008 [0;39m <==        Row: 2021-06-30, 118, 43, 117, 43
2021-06-30 18:33:21.585 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m65389206008107008 [0;39m <==      Total: 2
2021-06-30 18:33:21.585 INFO  com.cq.wiki.aspect.LogAspect                      :89   [32m65389206008107008 [0;39m 返回结果: {"content":[{"date":1624896000000,"viewCount":1,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1624982400000,"viewCount":118,"viewIncrease":117,"voteCount":43,"voteIncrease":43}],"success":true}
2021-06-30 18:33:21.585 INFO  com.cq.wiki.aspect.LogAspect                      :90   [32m65389206008107008 [0;39m ------------- 结束 耗时：0 ms -------------
2021-06-30 18:33:21.585 TRACE c.c.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m65389206008107009 [0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-06-30 18:33:21.585 TRACE c.c.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m65389206008107009 [0;39m <==        Row: 2021-06-29, 0, 0
2021-06-30 18:33:21.585 DEBUG c.c.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m65389206008107009 [0;39m <==      Total: 1
2021-06-30 18:33:21.585 INFO  com.cq.wiki.aspect.LogAspect                      :89   [32m65389206008107009 [0;39m 返回结果: {"content":[{"date":1624896000000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0}],"success":true}
2021-06-30 18:33:21.585 INFO  com.cq.wiki.aspect.LogAspect                      :90   [32m65389206008107009 [0;39m ------------- 结束 耗时：0 ms -------------
2021-06-30 18:33:35.003 INFO  com.cq.wiki.job.DocJob                            :31   [32m65389262287278080 [0;39m 更新电子书下的文档数据开始
2021-06-30 18:33:35.003 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65389262287278080 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-06-30 18:33:35.003 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65389262287278080 [0;39m ==> Parameters: 
2021-06-30 18:33:35.003 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65389262287278080 [0;39m <==    Updates: 7
2021-06-30 18:33:35.003 INFO  com.cq.wiki.job.DocJob                            :34   [32m65389262287278080 [0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2021-06-30 18:34:00.020 INFO  com.cq.wiki.job.EbookSnapshotJob                  :32   [32m65389367216181248 [0;39m 生成今日电子书快照开始
2021-06-30 18:34:00.020 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65389367216181248 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-06-30 18:34:00.020 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65389367216181248 [0;39m ==> Parameters: 
2021-06-30 18:34:00.020 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65389367216181248 [0;39m <==    Updates: 0
2021-06-30 18:34:00.020 INFO  com.cq.wiki.job.EbookSnapshotJob                  :35   [32m65389367216181248 [0;39m 生成今日电子书快照结束，耗时：0毫秒
2021-06-30 18:34:05.019 INFO  com.cq.wiki.job.DocJob                            :31   [32m65389388183506944 [0;39m 更新电子书下的文档数据开始
2021-06-30 18:34:05.019 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65389388183506944 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-06-30 18:34:05.019 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65389388183506944 [0;39m ==> Parameters: 
2021-06-30 18:34:05.019 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65389388183506944 [0;39m <==    Updates: 7
2021-06-30 18:34:05.019 INFO  com.cq.wiki.job.DocJob                            :34   [32m65389388183506944 [0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2021-06-30 18:34:35.006 INFO  com.cq.wiki.job.DocJob                            :31   [32m65389513958100992 [0;39m 更新电子书下的文档数据开始
2021-06-30 18:34:35.006 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65389513958100992 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-06-30 18:34:35.006 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65389513958100992 [0;39m ==> Parameters: 
2021-06-30 18:34:35.006 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65389513958100992 [0;39m <==    Updates: 7
2021-06-30 18:34:35.006 INFO  com.cq.wiki.job.DocJob                            :34   [32m65389513958100992 [0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2021-06-30 18:35:00.006 INFO  com.cq.wiki.job.EbookSnapshotJob                  :32   [32m65389618815700992 [0;39m 生成今日电子书快照开始
2021-06-30 18:35:00.006 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65389618815700992 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-06-30 18:35:00.006 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65389618815700992 [0;39m ==> Parameters: 
2021-06-30 18:35:00.006 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m65389618815700992 [0;39m <==    Updates: 0
2021-06-30 18:35:00.006 INFO  com.cq.wiki.job.EbookSnapshotJob                  :35   [32m65389618815700992 [0;39m 生成今日电子书快照结束，耗时：0毫秒
2021-06-30 18:35:05.004 INFO  com.cq.wiki.job.DocJob                            :31   [32m65389639778832384 [0;39m 更新电子书下的文档数据开始
2021-06-30 18:35:05.004 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65389639778832384 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-06-30 18:35:05.004 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65389639778832384 [0;39m ==> Parameters: 
2021-06-30 18:35:05.004 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65389639778832384 [0;39m <==    Updates: 7
2021-06-30 18:35:05.004 INFO  com.cq.wiki.job.DocJob                            :34   [32m65389639778832384 [0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2021-06-30 18:35:35.015 INFO  com.cq.wiki.job.DocJob                            :31   [32m65389765654089728 [0;39m 更新电子书下的文档数据开始
2021-06-30 18:35:35.015 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65389765654089728 [0;39m ==>  Preparing: update ebook t1,(select ebook_id, count(1) doc_count , sum(view_count) view_count,sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count , t1.view_count = t2.view_count , t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-06-30 18:35:35.015 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65389765654089728 [0;39m ==> Parameters: 
2021-06-30 18:35:35.015 DEBUG com.cq.wiki.mapper.DocMapperCust.updateEbookInfo  :137  [32m65389765654089728 [0;39m <==    Updates: 7
2021-06-30 18:35:35.015 INFO  com.cq.wiki.job.DocJob                            :34   [32m65389765654089728 [0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2021-06-30 18:35:38.225 INFO  com.cq.wiki.aspect.LogAspect                      :52   [32m65389779117805568 [0;39m ------------- 开始 -------------
2021-06-30 18:35:38.225 INFO  com.cq.wiki.aspect.LogAspect                      :52   [32m65389779117805569 [0;39m ------------- 开始 -------------
2021-06-30 18:35:38.225 INFO  com.cq.wiki.aspect.LogAspect                      :53   [32m65389779117805568 [0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2021-06-30 18:35:38.225 INFO  com.cq.wiki.aspect.LogAspect                      :53   [32m65389779117805569 [0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2021-06-30 18:35:38.240 INFO  com.cq.wiki.aspect.LogAspect                      :54   [32m65389779117805568 [0;39m 类名方法: com.cq.wiki.controller.EbookSnapshotController.get30Statistic
2021-06-30 18:35:38.240 INFO  com.cq.wiki.aspect.LogAspect                      :54   [32m65389779117805569 [0;39m 类名方法: com.cq.wiki.controller.EbookSnapshotController.getStatistic
2021-06-30 18:35:38.240 INFO  com.cq.wiki.aspect.LogAspect                      :55   [32m65389779117805569 [0;39m 远程地址: 127.0.0.1
2021-06-30 18:35:38.240 INFO  com.cq.wiki.aspect.LogAspect                      :55   [32m65389779117805568 [0;39m 远程地址: 127.0.0.1
2021-06-30 18:35:38.240 INFO  com.cq.wiki.aspect.LogAspect                      :77   [32m65389779117805568 [0;39m 请求参数: []
2021-06-30 18:35:38.240 INFO  com.cq.wiki.aspect.LogAspect                      :77   [32m65389779117805569 [0;39m 请求参数: []
2021-06-30 18:35:38.240 DEBUG c.c.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m65389779117805568 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-06-30 18:35:38.240 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m65389779117805569 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-06-30 18:35:38.240 DEBUG c.c.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m65389779117805568 [0;39m ==> Parameters: 
2021-06-30 18:35:38.240 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m65389779117805569 [0;39m ==> Parameters: 
2021-06-30 18:35:38.240 TRACE c.c.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m65389779117805568 [0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-06-30 18:35:38.240 TRACE c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m65389779117805569 [0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-06-30 18:35:38.240 TRACE c.c.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m65389779117805568 [0;39m <==        Row: 2021-06-29, 0, 0
2021-06-30 18:35:38.240 TRACE c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m65389779117805569 [0;39m <==        Row: 2021-06-29, 1, 0, 0, 0
2021-06-30 18:35:38.240 DEBUG c.c.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m65389779117805568 [0;39m <==      Total: 1
2021-06-30 18:35:38.240 TRACE c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m65389779117805569 [0;39m <==        Row: 2021-06-30, 118, 43, 117, 43
2021-06-30 18:35:38.240 INFO  com.cq.wiki.aspect.LogAspect                      :89   [32m65389779117805568 [0;39m 返回结果: {"content":[{"date":1624896000000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0}],"success":true}
2021-06-30 18:35:38.240 DEBUG c.c.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m65389779117805569 [0;39m <==      Total: 2
2021-06-30 18:35:38.240 INFO  com.cq.wiki.aspect.LogAspect                      :90   [32m65389779117805568 [0;39m ------------- 结束 耗时：15 ms -------------
2021-06-30 18:35:38.240 INFO  com.cq.wiki.aspect.LogAspect                      :89   [32m65389779117805569 [0;39m 返回结果: {"content":[{"date":1624896000000,"viewCount":1,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1624982400000,"viewCount":118,"viewIncrease":117,"voteCount":43,"voteIncrease":43}],"success":true}
2021-06-30 18:35:38.240 INFO  com.cq.wiki.aspect.LogAspect                      :90   [32m65389779117805569 [0;39m ------------- 结束 耗时：15 ms -------------
